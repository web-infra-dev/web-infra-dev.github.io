{"version":3,"file":"static/js/async/docs_zh_guides_topic-detail_monorepo_publish_mdx.6bfea7ba.js","sources":["./docs/zh/guides/topic-detail/monorepo/publish.mdx"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"zh%2Fguides%2Ftopic-detail%2Fmonorepo%2Fpublish.mdx\"] = {\"toc\":[{\"text\":\"准备工作\",\"id\":\"准备工作\",\"depth\":2},{\"text\":\"生成变更记录\",\"id\":\"生成变更记录\",\"depth\":2},{\"text\":\"版本更新\",\"id\":\"版本更新\",\"depth\":2},{\"text\":\"发布\",\"id\":\"发布\",\"depth\":2}],\"title\":\"可复用模块的发布\",\"frontmatter\":{\"sidebar_position\":4}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        p: \"p\",\n        h2: \"h2\",\n        code: \"code\",\n        pre: \"pre\",\n        strong: \"strong\",\n        div: \"div\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"可复用模块的发布\">{\"可复用模块的发布\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#可复用模块的发布\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.p>{\"在 Monorepo 中有时会需要把多个模块项目发布到 \"}<_components.a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noopener noreferrer\">{\"NPM\"}</_components.a>{\" 上，本章将要介绍如果在 Monorepo 中对子项目进行版本更新以及发布。\"}</_components.p>{\"\\n\"}<_components.h2 id=\"准备工作\">{\"准备工作\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#准备工作\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"接着 \"}<_components.a href=\"/guides/topic-detail/monorepo/sub-project-interface\">{\"子项目联调\"}</_components.a>{\" 章节的例子，我们对 \"}<_components.code>{\"components\"}</_components.code>{\" 模块进行发布。\"}</_components.p>{\"\\n\"}<_components.h2 id=\"生成变更记录\">{\"生成变更记录\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#生成变更记录\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"在开发阶段，当某个模块的功能开完完成之后，一般需要提交代码（例如提交到 \"}<_components.a href=\"https://github.com/\" target=\"_blank\" rel=\"noopener noreferrer\">{\"GitHub\"}</_components.a>{\" 上）并需要记录本次修改的内容。在 Modern.js 的 Monorepo 工程中，我们可以在 monorepo 根目录执行命令：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code>{\"pnpm run change\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"然后根据提示选择变更或者将要发布的包以及选择包升级的版本，并填写变更信息。变更信息的内容可以包含此次开发的功能、修复的问题等。\"}</_components.p>{\"\\n\"}<_components.p>{\"那么对于上面的例子，我们选择变更的项目为 \"}<_components.code>{\"components\"}</_components.code>{\"，并填写此次变更的内容：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code>{\"$ modern change\\n🦋  Which packages would you like to include? \\xb7 components\\n🦋  Which packages should have a major bump? \\xb7 No items were selected\\n🦋  Which packages should have a minor bump? \\xb7 components\\n🦋  Please enter a summary for this change (this will be in the changelogs). Submit empty line to open external editor\\n🦋  Summary \\xb7 add features\\n🦋  === Releasing the following packages ===\\n🦋  [Minor]\\n🦋    components\\n🦋  ╔════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗\\n🦋  ║                                                      ========= NOTE ========                                                       ║\\n🦋  ║All dependents of these packages that will be incompatible with the new version will be patch bumped when this changeset is applied.║\\n🦋  ╚════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝\\n🦋  Is this your desired changeset? (Y/n) \\xb7 true\\n🦋  Changeset added! - you can now commit it\\n🦋\\n🦋  If you want to modify or expand on the changeset summary, you can find it here\\n🦋  info /Users/demo/modern-js/official/monorepo-pnpm/.changeset/silent-tigers-run.md\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"该命令完成后，在 \"}<_components.code>{\".changeset\"}</_components.code>{\" 中会有新的 \"}<_components.code>{\"silent-tigers-run.md\"}</_components.code>{\" 文件生成，其中包含了刚刚填写的信息，这些新生成的文件将用于后面发布流程中使用。\"}<_components.strong>{\"因此在提交代码的时候，需要将\"}<_components.code>{\".changeset\"}</_components.code>{\" 目录下的文件一并提交\"}</_components.strong>{\"。\"}</_components.p>{\"\\n\"}<_components.h2 id=\"版本更新\">{\"版本更新\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#版本更新\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"在模块发布之前，还需要将模块的版本进行更新。。在 Modern.js 的 Monorepo 工程中，可以在 Monorepo 项目根目录下执行：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code>{\"pnpm run bump\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"该命令会根据之前生成在 \"}<_components.code>{\".changeset\"}</_components.code>{\" 目录下的文件自动更新对应模块的版本号和 CHANGELOG 信息，执行成功后会看到：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code>{\"🦋  All files have been updated. Review them and commit at your leisure\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"发布\">{\"发布\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#发布\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"最后执行 \"}<_components.code>{\"pnpm run prepare --filter {./packages} && pnpm run release\"}</_components.code>{\"，便可以发布对应的模块了。\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive info\"><_components.div className=\"modern-directive-title\">{\"补充信息\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"在上面的命令中 --filter {./packages} 用于筛选位于 \"}<_components.code>{\"./packages\"}</_components.code>{\" 目录下的子项目，可以通过 \"}<_components.a href=\"https://pnpm.io/filtering\" target=\"_blank\" rel=\"noopener noreferrer\">{\"PNPM Filtering\"}</_components.a>{\" 来了解更多它的使用。\"}</_components.p>{\"\\n\"}</_components.div></_components.div></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","a","p","h2","code","pre","strong","div","components","id","className","href","target","rel","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_"],"mappings":"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"}