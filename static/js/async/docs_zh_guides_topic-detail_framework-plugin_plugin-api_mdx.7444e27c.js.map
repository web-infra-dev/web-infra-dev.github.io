{"version":3,"file":"static/js/async/docs_zh_guides_topic-detail_framework-plugin_plugin-api_mdx.7444e27c.js","sources":["./docs/zh/guides/topic-detail/framework-plugin/plugin-api.mdx"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"zh%2Fguides%2Ftopic-detail%2Fframework-plugin%2Fplugin-api.mdx\"] = {\"toc\":[{\"text\":\"API\",\"id\":\"api\",\"depth\":2},{\"text\":\"useConfigContext\",\"id\":\"useconfigcontext\",\"depth\":3},{\"text\":\"useResolvedConfigContext\",\"id\":\"useresolvedconfigcontext\",\"depth\":3},{\"text\":\"useAppContext\",\"id\":\"useappcontext\",\"depth\":3},{\"text\":\"useHookRunners\",\"id\":\"usehookrunners\",\"depth\":3}],\"title\":\"插件 API\",\"frontmatter\":{\"title\":\"插件 API\",\"sidebar_position\":6}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        p: \"p\",\n        code: \"code\",\n        pre: \"pre\",\n        h2: \"h2\",\n        h3: \"h3\",\n        div: \"div\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"插件-api\">{\"插件 API\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#插件-api\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.p>{\"插件的 \"}<_components.code>{\"setup\"}</_components.code>{\" 函数会接收一个 \"}<_components.code>{\"api\"}</_components.code>{\" 入参，你可以调用 api 上提供的一些方法来获取到配置、应用上下文等信息。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"import type { CliPlugin } from '@modern-js/core';\\n\\nexport const myPlugin = (): CliPlugin => ({\\n  name: 'my-plugin',\\n\\n  setup(api) {\\n    // 获取应用原始配置\\n    const config = api.useConfigContext();\\n    // 获取应用运行上下文\\n    const appContext = api.useAppContext();\\n    // 获取解析之后的最终配置\\n    const resolvedConfig = api.useResolvedConfigContext();\\n  },\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"api\">{\"API\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#api\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.h3 id=\"useconfigcontext\">{\"useConfigContext\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#useconfigcontext\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"用于获取应用原始配置。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"const useConfigContext: () => UserConfig;\\n\\ninterface UserConfig {\\n  source?: SourceConfig;\\n  output?: OutputConfig;\\n  server?: ServerConfig;\\n  deploy?: DeployConfig;\\n  // ...other fields\\n}\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"具体配置字段的意义请参考 \"}<_components.a href=\"/configure/app/usage\">{\"配置\"}</_components.a>{\"。\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive tip\"><_components.div className=\"modern-directive-title\">{\"TIP\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"该方法获取到的是只读配置，不可修改。如果需要修改配置，请使用 \"}<_components.a href=\"/guides/topic-detail/framework-plugin/hook-list#config\">{\"config hook\"}</_components.a>{\"。\\n\"}</_components.p></_components.div></_components.div>{\"\\n\"}<_components.h3 id=\"useresolvedconfigcontext\">{\"useResolvedConfigContext\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#useresolvedconfigcontext\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"用于获取被解析、合并之后的最终配置。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"const useResolvedConfigContext: () => NormalizedConfig;\\n\\ninterface NormalizedConfig {\\n  source: NormalizedSourceConfig;\\n  output: NormalizedOutputConfig;\\n  server: NormalizedServerConfig;\\n  deploy: NormalizedDeployConfig;\\n  _raw: UserConfig; // 原始配置对象\\n  // ...other fields\\n}\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"配置字段的完整内容请参考 \"}<_components.a href=\"/configure/app/usage\">{\"配置\"}</_components.a>{\"。\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive tip\"><_components.div className=\"modern-directive-title\">{\"TIP\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"该方法获取到的是只读配置，不可修改。如果需要修改配置，请使用 \"}<_components.a href=\"/guides/topic-detail/framework-plugin/hook-list#config\">{\"config hook\"}</_components.a>{\"。\\n\"}</_components.p></_components.div></_components.div>{\"\\n\"}<_components.h3 id=\"useappcontext\">{\"useAppContext\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#useappcontext\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"用于获取应用运行上下文。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"const useAppContext: () => IAppContext;\\n\\ninterface IAppContext {\\n  appDirectory: string;\\n  configFile: string | false;\\n  ip?: string;\\n  port?: number;\\n  distDirectory: string;\\n  packageName: string;\\n  srcDirectory: string;\\n  sharedDirectory: string;\\n  nodeModulesDirectory: string;\\n  internalDirectory: string;\\n  plugins: {\\n    cli?: any;\\n    server?: any;\\n  }[];\\n  entrypoints: Entrypoint[];\\n  serverRoutes: ServerRoute[];\\n  htmlTemplates: HtmlTemplates;\\n}\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"usehookrunners\">{\"useHookRunners\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#usehookrunners\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"用于获取 Hooks 的执行器，并触发特定的 Hook 执行。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"import type { CliPlugin } from '@modern-js/core';\\n\\nexport const myPlugin = (): CliPlugin => ({\\n  name: 'my-plugin',\\n\\n  async setup(api) {\\n    const hookRunners = api.useHookRunners();\\n    // 触发 afterBuild Hook\\n    await hookRunners.afterBuild();\\n  },\\n});\\n\"}</_components.code></_components.pre></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","a","p","code","pre","h2","h3","div","components","id","className","href","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_"],"mappings":"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"}