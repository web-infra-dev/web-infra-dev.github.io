{"version":3,"file":"static/js/async/docs_zh_guides_topic-detail_model_quick-start_mdx.1cc46fd5.js","sources":["./docs/zh/components/reduck-migration.mdx","./docs/zh/guides/topic-detail/model/quick-start.mdx"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"zh%2Fcomponents%2Freduck-migration.mdx\"] = {\"toc\":[],\"title\":\"\",\"frontmatter\":{}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    return <></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n","globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"zh%2Fguides%2Ftopic-detail%2Fmodel%2Fquick-start.mdx\"] = {\"toc\":[{\"text\":\"核心概念\",\"id\":\"核心概念\",\"depth\":2},{\"text\":\"基本用法\",\"id\":\"基本用法\",\"depth\":2}],\"title\":\"快速上手\",\"frontmatter\":{\"sidebar_position\":1,\"title\":\"快速上手\"}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nimport ReduckMigration from \"@site-docs/components/reduck-migration\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        p: \"p\",\n        div: \"div\",\n        ol: \"ol\",\n        li: \"li\",\n        h2: \"h2\",\n        strong: \"strong\",\n        img: \"img\",\n        code: \"code\",\n        pre: \"pre\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"快速上手\">{\"快速上手\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#快速上手\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}{\"\\n\"}<ReduckMigration/>{\"\\n\"}<_components.p><_components.a href=\"https://github.com/web-infra-dev/reduck\" target=\"_blank\" rel=\"noopener noreferrer\">{\"Reduck\"}</_components.a>{\" 是 Modern.js 团队开发的遵循 MVC 模式的状态管理库，底层状态存储基于 \"}<_components.a href=\"https://redux.js.org/\" target=\"_blank\" rel=\"noopener noreferrer\">{\"Redux\"}</_components.a>{\" 实现，同时提供更高层级的抽象，并完全兼容 Redux 生态。\"}</_components.p>{\"\\n\"}<_components.p>{\"Reduck 的目标是以 MVC 模式组织 React 应用开发结构，将业务逻辑维护在 Model 层，业务逻辑与 UI 解耦，让开发业务逻辑更集中、更简单，同时通过更高层级的抽象，减少重复工作（样板代码）。\"}</_components.p>{\"\\n\"}<_components.p>{\"Reduck 在 MVC 模式中，扮演 M(Model) 的角色，React UI Component 对应 V(View)，从 Reduck 中获取 Model 并修改 Model 的 React Container Component 对应 C(View Controller/Container)。\"}</_components.p>{\"\\n\"}<_components.p>{\"Modern.js 的状态管理解决方案，是通过内置 Reduck 实现的。在 Modern.js 中使用 Reduck，不仅免去了手动集成的环节，而且所有 Reduck API 都可以从 Modern.js 的 Runtime 包中直接导入使用，具有更好的一致性体验。\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive info\"><_components.div className=\"modern-directive-title\">{\"INFO\"}</_components.div><_components.div className=\"modern-directive-content\">{\"\\n\"}<_components.ol>{\"\\n\"}<_components.li>{\"Modern.js 中使用 Reduck API，需要先设置 \"}<_components.a href=\"/configure/app/runtime/state\">{\"runtime.state\"}</_components.a>{\" 以启用状态管理插件。\"}</_components.li>{\"\\n\"}<_components.li>{\"Reduck 也可以脱离 Modern.js 作为状态管理库\"}<_components.a href=\"/guides/topic-detail/model/use-out-of-modernjs\">{\"单独使用\"}</_components.a>{\"。\"}</_components.li>{\"\\n\"}</_components.ol>{\"\\n\"}</_components.div></_components.div>{\"\\n\"}<_components.h2 id=\"核心概念\">{\"核心概念\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#核心概念\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"Reduck 中的核心概念只有 4 个： Model、State、Actions、Effects。\"}</_components.p>{\"\\n\"}<_components.p>{\"Model: 对独立模块的逻辑和所需状态的封装，由 State、Actions、Effects 组成。\"}</_components.p>{\"\\n\"}<_components.p>{\"State: Model 中保存的状态。\"}</_components.p>{\"\\n\"}<_components.p>{\"Actions: 用于修改 State 的纯函数，函数必须是\"}<_components.strong>{\"同步\"}</_components.strong>{\"的。\"}</_components.p>{\"\\n\"}<_components.p>{\"Effects: 用于修改 State 的带有副作用的函数，函数可以是\"}<_components.strong>{\"异步\"}</_components.strong>{\"的。Effects 中可以调用自身或其他 Model 的 Actions 和 Effects。\"}</_components.p>{\"\\n\"}<_components.p>{\"Reduck 数据流如下图所示：\"}</_components.p>{\"\\n\"}<_components.p><_components.img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/reduck-concept.svg\" alt=\"Reduck 数据流\"/></_components.p>{\"\\n\"}<_components.h2 id=\"基本用法\">{\"基本用法\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#基本用法\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"下来我们以一个简单的 \"}<_components.strong>{\"计数器\"}</_components.strong>{\" 应用为例，演示 Reduck 的基本用法。\"}</_components.p>{\"\\n\"}<_components.p>{\"首先，我们定义一个名为 \"}<_components.code>{\"count\"}</_components.code>{\" 的 Model：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"import { model } from '@modern-js/runtime/model';\\n\\nconst countModel = model('count').define({\\n  state: {\\n    value: 1,\\n  },\\n});\\n\\nexport default countModel;\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"我们使用 API \"}<_components.code>{\"model\"}</_components.code>{\" 创建 \"}<_components.code>{\"countModel\"}</_components.code>{\"，\"}<_components.code>{\"countModel\"}</_components.code>{\" 当前只包含存储计数器值的状态，即代码中的 \"}<_components.code>{\"value\"}</_components.code>{\"。\"}</_components.p>{\"\\n\"}<_components.p>{\"我们定义一个 action，用于计算器自增加 1：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"import { model } from '@modern-js/runtime/model';\\n\\nconst countModel = model('count').define({\\n  state: {\\n    value: 1,\\n  },\\n  actions: {\\n    add(state) {\\n      state.value += 1;\\n    },\\n  },\\n});\\n\\nexport default countModel;\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"在 \"}<_components.code>{\"add\"}</_components.code>{\" action 中，我们可以直接修改 state 的值，进行加 1 操作，而不需要把 state 作为不可变对象进行操作，这是因为 Reduck 集成了 \"}<_components.a href=\"https://github.com/immerjs/immer\" target=\"_blank\" rel=\"noopener noreferrer\">{\"immer\"}</_components.a>{\"，可以直接修改原 state 对象。\"}</_components.p>{\"\\n\"}<_components.p>{\"接下来，我们演示如何在组件中使用 Model。\"}</_components.p>{\"\\n\"}<_components.p>{\"新建一个组件 Counter，在组件内通过 \"}<_components.code>{\"useModel\"}</_components.code>{\" API 使用 \"}<_components.code>{\"countModel\"}</_components.code>{\"：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"import { useModel } from '@modern-js/runtime/model';\\nimport countModel from './models/count';\\n\\nfunction Counter() {\\n  const [state, actions] = useModel(countModel);\\n\\n  return (\\n    <div>\\n      <div>counter: {state.value}</div>\\n      <button onClick={() => actions.add()}>add</button>\\n    </div>\\n  );\\n}\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p><_components.code>{\"useModel\"}</_components.code>{\" 获取 \"}<_components.code>{\"countModel\"}</_components.code>{\" 的 \"}<_components.code>{\"state\"}</_components.code>{\" 和 \"}<_components.code>{\"actions\"}</_components.code>{\"，组件展示当前计算器的值，点击 \"}<_components.code>{\"add\"}</_components.code>{\" 按钮，计数器自增 1。\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive info\"><_components.div className=\"modern-directive-title\">{\"INFO\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"由于使用的案例比较简单，这里并没有严格按照 MVC 模式进行分层，组件 \"}<_components.code>{\"Counter\"}</_components.code>{\" 同时起到了 V 和 C 两层的作用。\"}</_components.p>{\"\\n\"}</_components.div></_components.div>{\"\\n\"}<_components.p>{\"最终演示效果如下：\"}</_components.p>{\"\\n\"}<_components.p><_components.img src=\"https://lf3-static.bytednsdoc.com/obj/eden-cn/eueh7vhojuh/modern/simple-count-model.gif\" alt=\"countModel\"/></_components.p>{\"\\n\"}<_components.p>{\"这样，我们就完了一个简单的计数器应用。本节完整的示例代码可以在\"}<_components.a href=\"https://github.com/web-infra-dev/modern-js-examples/tree/main/examples/runtime-api/counter-model\" target=\"_blank\" rel=\"noopener noreferrer\">{\"这里\"}</_components.a>{\"查看。\"}</_components.p></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","globalThis","__RSPRESS_PAGE_META","MDXLayout","Object","assign","components","wrapper","_","_components","h1","a","p","div","ol","li","h2","strong","img","code","pre","id","className","href","target","rel","src","alt"],"mappings":"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"}