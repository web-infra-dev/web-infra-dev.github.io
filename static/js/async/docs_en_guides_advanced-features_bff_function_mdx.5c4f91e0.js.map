{"version":3,"file":"static/js/async/docs_en_guides_advanced-features_bff_function_mdx.5c4f91e0.js","sources":["./docs/en/components/enable-bff.mdx","./docs/en/guides/advanced-features/bff/function.mdx"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"en%2Fcomponents%2Fenable-bff.mdx\"] = {\"toc\":[],\"title\":\"\",\"frontmatter\":{}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nimport { Tabs, Tab as TabItem } from \"@theme\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        ol: \"ol\",\n        li: \"li\",\n        code: \"code\",\n        pre: \"pre\"\n    }, _provideComponents(), props.components);\n    return <><_components.ol>{\"\\n\"}<_components.li>{\"Execute \"}<_components.code>{\"pnpm new\"}</_components.code>{' and select \"Enable BFF\"'}</_components.li>{\"\\n\"}<_components.li>{\"Add the following code to \"}<_components.code>{\"modern.config.[tj]s\"}</_components.code>{\" according to the chosen runtime framework:\"}</_components.li>{\"\\n\"}</_components.ol>{\"\\n\"}{\"\\n\"}<Tabs><TabItem value=\"express\" label=\"Express.js\" default><_components.pre><_components.code className=\"language-ts\" meta='title=\"modern.config.ts\"'>{\"import { expressPlugin } from '@modern-js/plugin-express';\\nimport { bffPlugin } from '@modern-js/plugin-bff';\\n\\nexport default defineConfig({\\n  plugins: [expressPlugin(), bffPlugin()],\\n});\\n\"}</_components.code></_components.pre></TabItem><TabItem value=\"koa\" label=\"Koa.js\"><_components.pre><_components.code className=\"language-ts\" meta='title=\"modern.config.ts\"'>{\"import { koaPlugin } from '@modern-js/plugin-koa';\\nimport { bffPlugin } from '@modern-js/plugin-bff';\\n\\nexport default defineConfig({\\n  plugins: [koaPlugin(), bffPlugin()],\\n});\\n\"}</_components.code></_components.pre></TabItem></Tabs></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n","globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"en%2Fguides%2Fadvanced-features%2Fbff%2Ffunction.mdx\"] = {\"toc\":[{\"text\":\"Enable BFF\",\"id\":\"enable-bff\",\"depth\":2},{\"text\":\"BFF Function\",\"id\":\"bff-function\",\"depth\":2},{\"text\":\"API Routes\",\"id\":\"api-routes\",\"depth\":2},{\"text\":\"Default Route\",\"id\":\"default-route\",\"depth\":3},{\"text\":\"Multi-layer Routing\",\"id\":\"multi-layer-routing\",\"depth\":3},{\"text\":\"Dynamic Routing\",\"id\":\"dynamic-routing\",\"depth\":3},{\"text\":\"Allow List\",\"id\":\"allow-list\",\"depth\":3},{\"text\":\"RESTful API\",\"id\":\"restful-api\",\"depth\":2},{\"text\":\"Function Named Export\",\"id\":\"function-named-export\",\"depth\":3},{\"text\":\"Function Parameter Rule\",\"id\":\"function-parameter-rule\",\"depth\":3},{\"text\":\"Dynamic Path\",\"id\":\"dynamic-path\",\"depth\":4},{\"text\":\"RequestOption\",\"id\":\"requestoption\",\"depth\":4}],\"title\":\"Basic Usage\",\"frontmatter\":{\"sidebar_position\":1,\"title\":\"Basic Usage\"}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nimport EnableBFF from \"@site-docs-en/components/enable-bff\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        p: \"p\",\n        code: \"code\",\n        h2: \"h2\",\n        strong: \"strong\",\n        pre: \"pre\",\n        div: \"div\",\n        img: \"img\",\n        h3: \"h3\",\n        ul: \"ul\",\n        li: \"li\",\n        h4: \"h4\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"basic-usage\">{\"Basic Usage\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#basic-usage\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.p>{\"Applications developed with Modern.js can define API functions in the \"}<_components.code>{\"api/\"}</_components.code>{\" directory, which can be called by the front-end to send requests without writing front and back-end glue layer code, At the same time, it ensures the type safety of the front and back end\"}</_components.p>{\"\\n\"}<_components.h2 id=\"enable-bff\">{\"Enable BFF\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#enable-bff\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}{\"\\n\"}<EnableBFF/>{\"\\n\"}<_components.h2 id=\"bff-function\">{\"BFF Function\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#bff-function\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"The functions that are allowed to be called through integration are called \"}<_components.strong>{\"BFF functions\"}</_components.strong>{\". Here is the simplest BFF function to write, creating an \"}<_components.code>{\"api/hello.ts\"}</_components.code>{\" file:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"api/hello.ts\"'>{\"export const get = async () => 'Hello Modern.js';\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"Then directly import the function in \"}<_components.code>{\"src/App.tsx\"}</_components.code>{\" and call:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-tsx\" meta=\"title=src/App.tsx\">{\"import { useState, useEffect } from 'react';\\nimport { get as hello } from '@api/hello';\\n\\nexport default () => {\\n  const [text, setText] = useState('');\\n\\n  useEffect(() => {\\n    hello().then(setText);\\n  }, []);\\n  return <div>{text}</div>;\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.div className=\"modern-directive info\"><_components.div className=\"modern-directive-title\">{\"INFO\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"Modern.js generator has already configured the \"}<_components.code>{\"@api\"}</_components.code>{\" alias in tsconfig.json, so you can import functions directly by aliases.\"}</_components.p>{\"\\n\"}</_components.div></_components.div>{\"\\n\"}<_components.p>{\"The functions import in \"}<_components.code>{\"src/App.tsx\"}</_components.code>{\" will be automatically converted into interface calls, so there is no need to call the interface through fetch.\"}</_components.p>{\"\\n\"}<_components.p>{\"Execute \"}<_components.code>{\"pnpm run dev\"}</_components.code>{\", then open \"}<_components.code>{\"http://localhost:8080/\"}</_components.code>{\" to see that the page has displayed the content returned by the BFF function. In Network, you can see that the page sent a request to \"}<_components.code>{\"http://localhost:8080/api/hello\"}</_components.code>{\".\"}</_components.p>{\"\\n\"}<_components.p><_components.img src=\"https://p6-piu.byteimg.com/tos-cn-i-8jisjyls3a/fd41750f8d414179a9b4ecb519919b36~tplv-8jisjyls3a-3:0:0:q75.png\" alt=\"Network\"/></_components.p>{\"\\n\"}<_components.h2 id=\"api-routes\">{\"API Routes\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#api-routes\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"In Modern.js, the BFF function routing system is implemented based on the file system, and it is also a conventional routing system.\"}</_components.p>{\"\\n\"}<_components.p>{\"In \"}<_components.strong>{\"Function Mode\"}</_components.strong>{\", All files under \"}<_components.code>{\"api/\"}</_components.code>{\" will map to an interface. In \"}<_components.strong>{\"Framework Mode\"}</_components.strong>{\", All files under \"}<_components.code>{\"api/lambda\"}</_components.code>{\" will map to an interface\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive note\"><_components.div className=\"modern-directive-title\">{\"NOTE\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"Function Mode & Framework Mode will introduce soon.\"}</_components.p>{\"\\n\"}</_components.div></_components.div>{\"\\n\"}<_components.p>{\"All routes generated by BFF functions have a prefix, and the default value is \"}<_components.code>{\"/api\"}</_components.code>{\". The prefix can be set through \"}<_components.a href=\"/configure/app/bff/prefix\">{\"bff.prefix\"}</_components.a>{\".\"}</_components.p>{\"\\n\"}<_components.p>{\"Several routing conventions are described as follow.\"}</_components.p>{\"\\n\"}<_components.h3 id=\"default-route\">{\"Default Route\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#default-route\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"Files named \"}<_components.code>{\"index.[jt]s\"}</_components.code>{\" are mapped to the previous directory.\"}</_components.p>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li><_components.code>{\"api/index.ts\"}</_components.code>{\" -> \"}<_components.code>{\"{prefix}/\"}</_components.code></_components.li>{\"\\n\"}<_components.li><_components.code>{\"api/user/index.ts\"}</_components.code>{\" -> \"}<_components.code>{\"{prefix}/user\"}</_components.code></_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.h3 id=\"multi-layer-routing\">{\"Multi-layer Routing\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#multi-layer-routing\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"Supports parsing nested files, if you create a nested folder structure, the files will still automatically parse routes in the same way.\"}</_components.p>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li><_components.code>{\"api/hello.ts\"}</_components.code>{\" -> \"}<_components.code>{\"{prefix}/hello\"}</_components.code></_components.li>{\"\\n\"}<_components.li><_components.code>{\"api/user/list.ts\"}</_components.code>{\" -> \"}<_components.code>{\"{prefix}/user/list\"}</_components.code></_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.h3 id=\"dynamic-routing\">{\"Dynamic Routing\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#dynamic-routing\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"Create folders or files named with \"}<_components.code>{\"[xxx]\"}</_components.code>{\" to support dynamic named routing parameters.\"}</_components.p>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li><_components.code>{\"api/user/[username]/info.ts\"}</_components.code>{\" -> \"}<_components.code>{\"{prefix}/user/:username/info\"}</_components.code></_components.li>{\"\\n\"}<_components.li><_components.code>{\"api/user/username/[action].ts\"}</_components.code>{\" -> \"}<_components.code>{\"{prefix}/user/username/:action\"}</_components.code></_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.h3 id=\"allow-list\">{\"Allow List\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#allow-list\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"By default, all files in the'api/'directory will be parsed as BFF function files, but the following files will not be parsed:\"}</_components.p>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"file name start with \"}<_components.code>{\"_\"}</_components.code>{\", for example \"}<_components.code>{\"_utils.ts\"}</_components.code>{\".\"}</_components.li>{\"\\n\"}<_components.li>{\"files in directory which name start with \"}<_components.code>{\"_\"}</_components.code>{\", for example \"}<_components.code>{\"_utils/index.ts\"}</_components.code>{\"、\"}<_components.code>{\"_utils/cp.ts\"}</_components.code>{\".\"}</_components.li>{\"\\n\"}<_components.li>{\"test files, for example \"}<_components.code>{\"foo.test.ts\"}</_components.code>{\".\"}</_components.li>{\"\\n\"}<_components.li>{\"type files, for example \"}<_components.code>{\"hello.d.ts\"}</_components.code>{\".\"}</_components.li>{\"\\n\"}<_components.li>{\"files in \"}<_components.code>{\"node_module\"}</_components.code>{\".\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.h2 id=\"restful-api\">{\"RESTful API\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#restful-api\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"Modern.js BFF functions need to be defined according to the RESTful API standard, follow the HTTP Method specification, and do not allow free parameter definition.\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive info\"><_components.div className=\"modern-directive-title\">{\"INFO\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"Assuming that the function allows free definition of parameters, the resulting route must be called by the \"}<_components.strong>{\"private protocol\"}</_components.strong>{\" (the reason is that the request parameters cannot be distinguished from the request body), and cannot implement any RESTful API.\"}</_components.p>{\"\\n\"}<_components.p>{\"If the service is only used for the application itself, there is no problem. but its \"}<_components.strong>{\"non-standard interface definition\"}</_components.strong>{\" cannot be integrated into the larger system. In the case of multiple systems working together (such as BFF low-code construction), other systems also need to follow the \"}<_components.strong>{\"private protocol\"}</_components.strong>{\".\"}</_components.p>{\"\\n\"}</_components.div></_components.div>{\"\\n\"}<_components.h3 id=\"function-named-export\">{\"Function Named Export\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#function-named-export\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"Modern.js the export name of the BFF function determines the Method of the corresponding interface of the function, such as \"}<_components.code>{\"get\"}</_components.code>{\", \"}<_components.code>{\"post\"}</_components.code>{\" and so on.\"}</_components.p>{\"\\n\"}<_components.p>{\"For example, following the example, a \"}<_components.code>{\"GET\"}</_components.code>{\" interface can be exported.\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export const get = async () => {\\n  return {\\n    name: 'Modern.js',\\n    desc: 'Web engineering system',\\n  };\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"Following the example below, a \"}<_components.code>{\"POST\"}</_components.code>{\" interface can be exported.\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export const post = async () => {\\n  return {\\n    name: 'Modern.js',\\n    desc: 'Web engineering system',\\n  };\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"\\n\"}<_components.p>{\"Modern.js supports 9 definitions for HTTP Method: \"}<_components.code>{\"GET\"}</_components.code>{\"、\"}<_components.code>{\"POST\"}</_components.code>{\"、\"}<_components.code>{\"PUT\"}</_components.code>{\"、\"}<_components.code>{\"DELETE\"}</_components.code>{\"、\"}<_components.code>{\"CONNECT\"}</_components.code>{\"、\"}<_components.code>{\"TRACE\"}</_components.code>{\"、\"}<_components.code>{\"PATCH\"}</_components.code>{\"、\"}<_components.code>{\"OPTIONS\"}</_components.code>{\"、\"}<_components.code>{\"HEAD\"}</_components.code>{\", can be exported using these methods as functions.\"}</_components.p>{\"\\n\"}</_components.li>{\"\\n\"}<_components.li>{\"\\n\"}<_components.p>{\"The name is size insensitive, if \"}<_components.code>{\"GET\"}</_components.code>{\", can write \"}<_components.code>{\"get\"}</_components.code>{\"、\"}<_components.code>{\"Get\"}</_components.code>{\"、\"}<_components.code>{\"GEt\"}</_components.code>{\"、\"}<_components.code>{\"GET\"}</_components.code>{\", can be accurately identified. But default export as \"}<_components.code>{\"export default xxx\"}</_components.code>{\" will be map to \"}<_components.code>{\"Get\"}</_components.code>{\".\"}</_components.p>{\"\\n\"}</_components.li>{\"\\n\"}<_components.li>{\"\\n\"}<_components.p>{\"Multiple functions of different Methods can be defined in one file, but if multiple functions of the same Method are defined, only the first will take effect.\"}</_components.p>{\"\\n\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.div className=\"modern-directive info\"><_components.div className=\"modern-directive-title\">{\"INFO\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"It should be noted that the defined functions should all be asynchronous, which is related to the type when the function is called, which will be mentioned later.\"}</_components.p>{\"\\n\"}</_components.div></_components.div>{\"\\n\"}<_components.h3 id=\"function-parameter-rule\">{\"Function Parameter Rule\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#function-parameter-rule\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"As mentioned above, in order to meet the design criteria of RESTful APIs, the BFF function in Modern.js needs to follow certain imported parameter rules.\"}</_components.p>{\"\\n\"}<_components.p>{\"The function parameters are divided into two parts, the dynamic part in the request path and the request option \"}<_components.code>{\"RequestOption\"}</_components.code>{\".\"}</_components.p>{\"\\n\"}<_components.h4 id=\"dynamic-path\">{\"Dynamic Path\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#dynamic-path\">{\"#\"}</_components.a></_components.h4>{\"\\n\"}<_components.p>{\"Dynamic routing will be used as imported parameters in the first part of the function, and each imported parameter corresponds to a dynamic route. For example, in the following example, uid will be passed into the function as the first two parameters:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"api/[level]/[id].ts\"'>{\"export default async (level: number, id: number) => {\\n  const userData = await queryUser(level, uid);\\n  return userData;\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"Pass dynamic parameters directly when calling:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"App.tsx\"'>{\"import { useState, useEffect } from 'react';\\nimport { get as getUser } from '@api/[level]/[id]';\\n\\nexport default () => {\\n  const [name, setName] = useState('');\\n\\n  useEffect(() => {\\n    getUser(6, 001).then(userData => setName(userData.name));\\n  }, []);\\n\\n  return <div>{name}</div>;\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h4 id=\"requestoption\">{\"RequestOption\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#requestoption\">{\"#\"}</_components.a></_components.h4>{\"\\n\"}<_components.p>{\"The parameter after Dynamic Path is the object \"}<_components.code>{\"RequestOption\"}</_components.code>{\" containing querystring and request body, which is used to define the types of \"}<_components.code>{\"data\"}</_components.code>{\" and \"}<_components.code>{\"query\"}</_components.code>{\".\"}</_components.p>{\"\\n\"}<_components.p>{\"In normal functions without dynamic routing, the incoming \"}<_components.code>{\"data\"}</_components.code>{\" and \"}<_components.code>{\"query\"}</_components.code>{\" can be obtained from the first imported parameter, for example:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"api/hello.ts\"'>{\"import type { RequestOption } from '@modern-js/runtime/server';\\n\\nexport async function post({\\n  query,\\n  data,\\n}: RequestOption<Record<string, string>, Record<string, string>>) {\\n  // do somethings\\n}\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"When a function file uses dynamic routing rules, dynamic routing before the \"}<_components.code>{\"RequestOption\"}</_components.code>{\" parameter.\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"api/[sku]/[id]/item.ts\"'>{\"export async function post(\\n  sku: string,\\n  id: string,\\n  {\\n    data,\\n    query,\\n  }: RequestOption<Record<string, string>, Record<string, string>>,\\n) {\\n  // do somethings\\n}\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"Also pass in the parameters according to the function definition:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"App.tsx\"'>{\"import { post } from '@api/[sku]/[id]/item';\\n\\nexport default () => {\\n  const addSku = () => {\\n    post('0001' /* sku */, '1234' /* id */, {\\n      query: {\\n        /* ... */\\n      },\\n      data: {\\n        /* ... */\\n      },\\n    });\\n  };\\n\\n  return <div onClick={addSku}>Add SKU</div>;\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"As mentioned earlier, the defined functions should be asynchronous because they are automatically converted to HTTP interface calls when called by the front end.\"}</_components.p>{\"\\n\"}<_components.p>{\"so in order to keep the type definition consistent with the actual calling, it is necessary to set the BFF function to asynchronous when defining it.\"}</_components.p></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","ol","li","code","pre","components","Tabs","Tab","value","label","default","className","meta","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_","h1","a","p","h2","strong","div","img","h3","ul","h4","id","href","src","alt"],"mappings":"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"}