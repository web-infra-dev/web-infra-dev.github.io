<!doctype html><html  lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title data-rh="true">In-depth understanding of build - Modern.js Module</title><meta data-rh="true" name="description" content="Module Engineering Solutions"/>
<script id="check-dark-light">
;(() => {
  const saved = localStorage.getItem('rspress-theme-appearance')
  const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
  if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
    document.documentElement.classList.add('dark')
  }
})()
</script>
<link rel="icon" href="https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/logo-1x-0104.png"><script defer="defer">!function(){var s,t,a,e,c,n,i,r,o,j,f,u,d,l,y={},b={};function p(s){var t=b[s];if(void 0!==t)return t.exports;var a=b[s]={id:s,loaded:!1,exports:{}};return y[s](a,a.exports,p),a.loaded=!0,a.exports}p.m=y,p.es=function(s,t){return Object.keys(s).forEach((function(a){"default"!==a&&!Object.prototype.hasOwnProperty.call(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:function(){return s[a]}})})),s},s={10656:["8057"],10879:["587"],11928:["6863"],13272:["8613"],13310:["1122"],13646:["9774"],13884:["7313"],14073:["9578"],14672:["3095"],16872:["3361"],17794:["7332"],19614:["1288"],19796:["1691"],19853:["7000"],21387:["2031"],23328:["4542"],24870:["7346"],26143:["5893"],26154:["8729"],26416:["7530"],26536:["7847"],27457:["1241"],28154:["2502"],30690:["8676"],31161:["2635"],31364:["7515"],31450:["9470"],32337:["5685"],333:["8686"],37954:["6353"],38080:["3493"],39088:["1136"],3924:["5062"],39291:["7099"],39882:["5010"],40595:["4282"],41506:["8965"],43698:["8954"],43821:["8348"],45173:["9513"],45763:["3764"],46836:["4256"],47440:["1453"],47534:["879"],47892:["2315"],48008:["2172"],49228:["4735"],49979:["4254"],51061:["651"],54265:["8407"],56355:["2626"],56380:["3238"],57679:["7222"],57801:["1264"],58765:["9327"],61160:["1894"],63018:["8638"],64765:["8432"],65196:["5590"],66471:["5468"],6653:["7334"],69:["5718"],69405:["9077"],71282:["7492"],7157:["1655"],71588:["3506"],71752:["8040"],74644:["4519"],75125:["9592"],78440:["8002"],80229:["1474"],82365:["9229"],83010:["3427"],85607:["6892"],87226:["2686"],90262:["3449"],90898:["3657"],91234:["4165"],91484:["8584"],91758:["6422"],91854:["9036"],92844:["4357"],9444:["3126"],94795:["4148"],958:["4492"],95990:["1835"],97273:["8116"],97407:["61"],9874:["1751"],99577:["7990"]},p.el=function(t){var a=s[t];return void 0===a?Promise.resolve():a.length>1?Promise.all(a.map(p.e)):p.e(a[0])},p.f={},p.e=function(s){return Promise.all(Object.keys(p.f).reduce((function(t,a){return p.f[a](s,t),t}),[]))},p.p="/module-tools/",p.u=function(s){return{1122:"static/js/async/1122.70222d69.js",1136:"static/js/async/1136.a4f73b2c.js",1241:"static/js/async/1241.990b325d.js",1264:"static/js/async/1264.6d73e465.js",1288:"static/js/async/1288.40d90b1a.js",1453:"static/js/async/1453.35b1a748.js",1474:"static/js/async/1474.ea73e4d9.js",1655:"static/js/async/1655.1b16e9cd.js",1691:"static/js/async/1691.277486ab.js",1751:"static/js/async/1751.54f578eb.js",1835:"static/js/async/1835.1a356307.js",1894:"static/js/async/1894.2243af48.js",2031:"static/js/async/2031.46fc9804.js",2172:"static/js/async/2172.cf336346.js",2315:"static/js/async/2315.44701630.js",2502:"static/js/async/2502.aedb219f.js",2626:"static/js/async/2626.368b9d45.js",2635:"static/js/async/2635.013b38da.js",2686:"static/js/async/2686.79d334c1.js",3095:"static/js/async/3095.f468adc8.js",3126:"static/js/async/3126.f2ad81f0.js",3238:"static/js/async/3238.4360fdeb.js",3361:"static/js/async/3361.6cd76041.js",3427:"static/js/async/3427.1c7d4d6f.js",3449:"static/js/async/3449.8ac3d593.js",3493:"static/js/async/3493.98769fec.js",3506:"static/js/async/3506.e9831680.js",3657:"static/js/async/3657.c6b4f5ef.js",3764:"static/js/async/3764.767eb06b.js",4148:"static/js/async/4148.2946eb8b.js",4165:"static/js/async/4165.c3e7cfee.js",4254:"static/js/async/4254.d27bebd9.js",4256:"static/js/async/4256.71788f68.js",4282:"static/js/async/4282.df44b0bc.js",4357:"static/js/async/4357.8fe01757.js",4492:"static/js/async/4492.223bc1e9.js",4519:"static/js/async/4519.55a402b2.js",4542:"static/js/async/4542.cd2761ef.js",4735:"static/js/async/4735.e8357455.js",5010:"static/js/async/5010.3e87a486.js",5062:"static/js/async/5062.eb9bfb70.js",5468:"static/js/async/5468.f891d5f3.js",5590:"static/js/async/5590.e50a2ba0.js",5685:"static/js/async/5685.3635a21b.js",5718:"static/js/async/5718.e38a3ac0.js",587:"static/js/async/587.3235e688.js",5893:"static/js/async/5893.eb2af71f.js",61:"static/js/async/61.0ed8ff86.js",6353:"static/js/async/6353.d61b3b9b.js",6422:"static/js/async/6422.6f95f9c1.js",651:"static/js/async/651.daaba8b0.js",6863:"static/js/async/6863.4ba23cd7.js",6892:"static/js/async/6892.7e5068b0.js",7e3:"static/js/async/7000.13ec2f7f.js",7099:"static/js/async/7099.a8e25033.js",7222:"static/js/async/7222.1e3d92c3.js",7313:"static/js/async/7313.94de907b.js",7332:"static/js/async/7332.81658d3c.js",7334:"static/js/async/7334.6d9dcc8f.js",7346:"static/js/async/7346.5e04769d.js",7492:"static/js/async/7492.5268525b.js",7515:"static/js/async/7515.9f13dd4f.js",7530:"static/js/async/7530.b02e49a5.js",7847:"static/js/async/7847.c3ff71a1.js",7990:"static/js/async/7990.3eb86292.js",8002:"static/js/async/8002.2255fb8c.js",8040:"static/js/async/8040.0ed1f739.js",8057:"static/js/async/8057.b6ba928f.js",8116:"static/js/async/8116.268f76eb.js",8348:"static/js/async/8348.80dca933.js",8407:"static/js/async/8407.3d26ea77.js",8432:"static/js/async/8432.d7fabbd1.js",8584:"static/js/async/8584.3ee66194.js",8613:"static/js/async/8613.e6291ac0.js",8638:"static/js/async/8638.7035dd74.js",8676:"static/js/async/8676.26b1e9f3.js",8686:"static/js/async/8686.c4c574b9.js",8729:"static/js/async/8729.786f5299.js",879:"static/js/async/879.ff577d6e.js",8954:"static/js/async/8954.ddf0dde6.js",8965:"static/js/async/8965.262bc1fa.js",9036:"static/js/async/9036.6e9368a4.js",9077:"static/js/async/9077.2ff94b97.js",9229:"static/js/async/9229.0fe02738.js",9327:"static/js/async/9327.884fedd7.js",9470:"static/js/async/9470.ae8a8894.js",9513:"static/js/async/9513.3af11aac.js",9578:"static/js/async/9578.5fd6d97e.js",9592:"static/js/async/9592.abfbfbab.js",9774:"static/js/async/9774.a13744a3.js"}[s]},p.k=function(s){return s+".css"},t={},p.l=function(s,a,e,c){if(t[s])t[s].push(a);else{if(void 0!==e)for(var n,i,r=document.getElementsByTagName("script"),o=0;o<r.length;o++){var j=r[o];if(j.getAttribute("src")==s){n=j;break}}!n&&(i=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,n.src=s),t[s]=[a];var f=function(a,e){n.onerror=n.onload=null,clearTimeout(u);var c=t[s];if(delete t[s],n.parentNode&&n.parentNode.removeChild(n),c&&c.forEach((function(s){return s(e)})),a)return a(e)},u=setTimeout(f.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=f.bind(null,n.onerror),n.onload=f.bind(null,n.onload),i&&document.head.appendChild(n)}},p.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},a=[],p.O=function(s,t,e,c){if(!t){var n=1/0;for(j=0;j<a.length;j++){t=a[j][0],e=a[j][1],c=a[j][2];for(var i=!0,r=0;r<t.length;r++)n>=c&&Object.keys(p.O).every((function(s){return p.O[s](t[r])}))?t.splice(r--,1):(i=!1,c<n&&(n=c));if(i){a.splice(j--,1);var o=e()}}return o}c=c||0;for(var j=a.length;j>0&&a[j-1][2]>c;j--)a[j]=a[j-1];a[j]=[t,e,c]},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(s){if("object"==typeof window)return window}}(),p.d=function(s,t){for(var a in t)p.o(t,a)&&!p.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:t[a]})},p.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},p.n=function(s){return s&&s.__esModule?s.default:s},c=Object.getPrototypeOf?function(s){return Object.getPrototypeOf(s)}:function(s){return s.__proto__},p.t=function(s,t){if(1&t&&(s=this(s)),8&t||"object"==typeof s&&s&&(4&t&&s.__esModule||16&t&&"function"==typeof s.then))return s;var a=Object.create(null);p.r(a);var n={};e=e||[null,c({}),c([]),c(c)];for(var i=2&t&&s;"object"==typeof i&&!~e.indexOf(i);i=c(i))Object.getOwnPropertyNames(i).forEach((function(t){n[t]=function(){return s[t]}}));return n.default=function(){return s},p.d(a,n),a},p.nmd=function(s){return s.paths=[],!s.children&&(s.children=[]),s},n={"builder-runtime":0,"lib-lodash":0,"lib-polyfill":0,"lib-react":0,"lib-router":0,main:0},i="webpack",r="data-webpack-loading",o=function(s,t,a,e){var c,n,o="chunk-"+s;if(!e){for(var j=document.getElementsByTagName("link"),f=0;f<j.length;f++){var u=j[f],d=u.getAttribute("href")||u.href;if(d&&!d.startsWith(p.p)&&(d=p.p+(d.startsWith("/")?d.slice(1):d)),"stylesheet"==u.rel&&(d&&d.startsWith(t)||u.getAttribute("data-webpack")==i+":"+o)){c=u;break}}if(!a)return c}!c&&(n=!0,(c=document.createElement("link")).setAttribute("data-webpack",i+":"+o),c.setAttribute(r,1),c.rel="stylesheet",c.href=t);var l=function(s,t){if(c.onerror=c.onload=null,c.removeAttribute(r),clearTimeout(y),t&&"load"!=t.type&&c.parentNode.removeChild(c),a(t),s)return s(t)};if(c.getAttribute(r)){var y=setTimeout(l.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=l.bind(null,c.onerror),c.onload=l.bind(null,c.onload)}else l(void 0,{type:"load",target:c});return e?e.parentNode.insertBefore(c,e):n&&document.head.appendChild(c),c},p.f.css=function(s,t){var a=p.o(n,s)?n[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["1896"].indexOf(s)>-1){var e=new Promise((function(t,e){a=n[s]=[t,e]}));t.push(a[2]=e);var c=p.p+p.k(s),i=Error();o(s,c,(function(t){if(p.o(n,s)&&(0!==(a=n[s])&&(n[s]=void 0),a))if("load"!==t.type){var e=t&&t.type,c=t&&t.target&&t.target.src;i.message="Loading css chunk "+s+" failed.\n("+e+": "+c+")",i.name="ChunkLoadError",i.type=e,i.request=c,a[1](i)}else a[0]()}))}else n[s]=0},j=function(s,t){var a=t[0];s&&s(t);for(var e=0;e<a.length;e++)void 0===n[a[e]]&&(n[a[e]]=0)},(f=self.webpackChunk_modern_js_module_tools_docs=self.webpackChunk_modern_js_module_tools_docs||[]).forEach(j.bind(null,0)),f.push=j.bind(null,f.push.bind(f)),u={"builder-runtime":0},p.f.j=function(s,t){var a=p.o(u,s)?u[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["1122","1136","1241","1264","1288","1453","1474","1655","1691","1751","1835","1894","1896","2031","2172","2315","2502","2626","2635","2686","3095","3126","3238","3361","3427","3449","3493","3506","3657","3764","4148","4165","4254","4256","4282","4357","4492","4519","4542","4735","5010","5062","5468","5590","5685","5718","587","5893","61","6353","6422","651","6863","6892","7000","7099","7222","7313","7332","7334","7346","7492","7515","7530","7847","7990","8002","8040","8057","8116","8348","8407","8432","8584","8613","8638","8676","8686","8729","879","8954","8965","9036","9077","9229","9327","9470","9513","9578","9592","9774","lib-lodash","lib-polyfill","lib-react","lib-router","main"].indexOf(s)>-1){var e=new Promise((function(t,e){a=u[s]=[t,e]}));t.push(a[2]=e);var c=p.p+p.u(s),n=Error();p.l(c,(function(t){if(p.o(u,s)&&(0!==(a=u[s])&&(u[s]=void 0),a)){var e=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;n.message="Loading chunk "+s+" failed.\n("+e+": "+c+")",n.name="ChunkLoadError",n.type=e,n.request=c,a[1](n)}}),"chunk-"+s,s)}else u[s]=0},p.O.j=function(s){return 0===u[s]},d=function(s,t){var a,e,c=t[0],n=t[1],i=t[2],r=0;if(c.some((function(s){return 0!==u[s]}))){for(a in n)p.o(n,a)&&(p.m[a]=n[a]);if(i)var o=i(p)}for(s&&s(t);r<c.length;r++)e=c[r],p.o(u,e)&&u[e]&&u[e][0](),u[e]=0;return p.O(o)},(l=self.webpackChunk_modern_js_module_tools_docs=self.webpackChunk_modern_js_module_tools_docs||[]).forEach(d.bind(null,0)),l.push=d.bind(null,l.push.bind(l))}()</script><script defer="defer" src="/module-tools/static/js/lib-react.a518e260.js"></script><script defer="defer" src="/module-tools/static/js/lib-router.90ad3fc3.js"></script><script defer="defer" src="/module-tools/static/js/lib-lodash.6f830af4.js"></script><script defer="defer" src="/module-tools/static/js/lib-polyfill.6cc24fac.js"></script><script defer="defer" src="/module-tools/static/js/1896.7ed31db9.js"></script><script defer="defer" src="/module-tools/static/js/main.6982089a.js"></script><link href="/module-tools/static/css/1896.36d88d32.css" rel="stylesheet"></head><body ><div id="root"><div><div class="navContainer_1719c sticky rspress-nav px-6 "><div class="container_1719c flex justify-between items-center h-full"><div class="undefined"><a href="/module-tools/en" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>Modern.js Module</span></a></div><div class="undefined flex flex-1 justify-end items-center"><div class="rightNav_1719c"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="navSearchButton_b68d7"><button><svg width="18" height="24" viewBox="0 0 32 32" hight="18"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_b68d7">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_b68d7"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_2625c  cursor-pointer" target="" href="/module-tools/en/guide/intro/welcome.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">Guide</div></a><a class="link_2625c  cursor-pointer" target="" href="/module-tools/en/api/index.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a><a class="link_2625c  cursor-pointer" target="" href="/module-tools/en/plugins/guide/getting-started.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">Plugins</div></a><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><span class="text-sm font-medium flex" style="margin-right:2px">v2.37.1</span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div class="nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:2rem;background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/solutions/module-tools/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="link_2625c "><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Changelog</span></div></div></a></div></div><div><div class="font-medium my-1"><a href="https://modernjs.dev/en/community/contributing-guide.html" target="_blank" rel="noopener noreferrer" class="link_2625c "><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Contributing</span></div></div></a></div></div></div></div></div></div></div><div class="flex-center flex-row"><div class="translation menu-item_1719c flex text-sm font-bold items-center px-3 py-2"><div><div class="relative flex-center h-14"><button class="nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><span class="text-sm font-medium flex" style="margin-right:2px"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div class="nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:2rem;background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_2625c  cursor-pointer" target="" href="/module-tools/guide/advance/in-depth-about-build.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>简体中文</span></div></div></a></div></div><div><div class="rounded-2xl my-1 flex" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><span class="text-brand">English</span></div></div></div></div></div></div></div><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg></div></div></div><div class="social-links menu-item_c942e flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/solutions/module-tools" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_c942e"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div><div class="mobileNavMenu_1719c"><div class="navScreen_798af " id="navScreen"><div class="container_798af"><div class="navMenu_798af"><div class="navMenuItem_798af w-full"><a class="link_2625c  cursor-pointer" target="" href="/module-tools/en/guide/intro/welcome.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">Guide</div></a></div><div class="navMenuItem_798af w-full"><a class="link_2625c  cursor-pointer" target="" href="/module-tools/en/api/index.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a></div><div class="navMenuItem_798af w-full"><a class="link_2625c  cursor-pointer" target="" href="/module-tools/en/plugins/guide/getting-started.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">Plugins</div></a></div><div class="navMenuItem_798af w-full"><div class="mx-3 last:mr-0"><div class=" navScreenMenuGroup_798af relative"><button class="button_798af"><span class="buttonSpan_798af">v2.37.1</span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" down_798af "><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div><div class="items_798af"><div><div class="py-1 font-medium"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/solutions/module-tools/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="link_2625c "><div><div class="flex justify-center"><span>Changelog</span></div></div></a></div></div><div><div class="py-1 font-medium"><a href="https://modernjs.dev/en/community/contributing-guide.html" target="_blank" rel="noopener noreferrer" class="link_2625c "><div><div class="flex justify-center"><span>Contributing</span></div></div></a></div></div></div></div></div></div></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_798af flex justify-center"></div><div class="undefined flex text-sm font-bold justify-center"><div class="mx-1.5 my-1"><div class=" navScreenMenuGroup_798af relative"><button class="button_798af"><span class="buttonSpan_798af"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" down_798af "><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div><div class="items_798af"><div><div class="py-1 font-medium"><a class="link_2625c  cursor-pointer" target="" href="/module-tools/guide/advance/in-depth-about-build.html"><div><div class="flex justify-center"><span>简体中文</span></div></div></a></div></div><div><div class="p-1 text-center"><span class="text-brand">English</span></div></div></div></div></div></div></div><div class="social-links menu-item_c942e flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/solutions/module-tools" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_c942e"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div></div><button class=" navHamburger_19e92 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_c7b5e pt-0"><div class="rspress-sidebar-menu"><button class="flex-center"><div class="text-md mr-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span class="text-sm">Menu</span></button></div><aside class="sidebar_82695 rspress-sidebar "><div class="navTitleMask_82695"><div class="undefined"><a href="/module-tools/en" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>Modern.js Module</span></a></div></div><div class="mt-1 sidebarContent_82695"><div class="rspress-scrollbar" style="max-height:calc(100vh - var(--rp-nav-height) - 8px);overflow:scroll"><nav class="pb-2"><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItem_82695" style="border-radius:0 1rem 1rem 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">Introduction</h2><div class="collapseContainer_82695 p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/intro/welcome.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Welcome to Modern.js Module</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/intro/why-module-engineering-solution.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Why you need Modern.js Module</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/intro/getting-started.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Quick Start</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItem_82695" style="border-radius:0 1rem 1rem 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">Basic Guide</h2><div class="collapseContainer_82695 p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/basic/before-getting-started.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Before you start</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/basic/command-preview.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">CLI Commands</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/basic/modify-output-product.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Modify the output product</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/basic/use-micro-generator.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Using the Microgenerator</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/basic/using-storybook.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Using Storybook</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/basic/test-your-project.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Testing Projects</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/basic/publish-your-project.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Versioning and Publishing</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItem_82695" style="border-radius:0 1rem 1rem 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">Advanced Guide</h2><div class="collapseContainer_82695 p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/advance/in-depth-about-build.html"><div class="menuItemActive_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0;color:var(--rp-c-brand)">In-depth understanding of build</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/advance/in-depth-about-dev-command.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">In-depth understanding of the dev command</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/advance/copy.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Use the Copy Tools</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/advance/external-dependency.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Handle third-party dependencies</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/advance/build-umd.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Build umd artifacts</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/advance/asset.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Handle static assets</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItem_82695" style="border-radius:0 1rem 1rem 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">Best practices</h2><div class="collapseContainer_82695 p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/best-practices/components.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Developing Components</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/best-practices/use-tailwindcss.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Using Tailwind CSS</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItem_82695" style="border-radius:0 1rem 1rem 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">FAQ</h2><div class="collapseContainer_82695 p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(90deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/faq/build.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Build FAQ</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/faq/storybook.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Storybook FAQ</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/module-tools/en/guide/faq/test.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Test FAQ</div></a></div></div></div></section></nav></div></div></aside><div class="content_c7b5e rspress-doc-container flex flex-shrink-0 m-auto"><div class="w-full"><div><div class="rspress-doc"><!--$--><h1 id="in-depth-understanding-of-build" class="text-3xl mb-10 leading-10 tracking-tight title_e0087">In-depth understanding of build<a class="link_e0087 header-anchor" aria-hidden="true" href="#in-depth-understanding-of-build">#</a></h1>
<p class="my-4 leading-7">In the &quot;Basic Usage&quot; section, we already knew that you can modify the output files of a project through the <code>buildConfig</code> configuration. <code>buildConfig</code> not only describes some of the features of the product, but also provides some functionality for building the product.</p>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">If you are not familiar with <code>buildConfig</code>, please read <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/guide/basic/modify-output-product.html">modify-output-product</a>.
</p></div></div>
<p class="my-4 leading-7">In this chapter we&#x27;ll dive into the use of certain build configurations and understand what happens when the <code>modern build</code> command is executed.</p>
<h2 id="bundle-bundleless" class="mt-14 mb-6 text-2xl tracking-tight title_e0087"><code>bundle</code> /<code>bundleless</code><a class="link_e0087 header-anchor" aria-hidden="true" href="#bundle-bundleless">#</a></h2>
<p class="my-4 leading-7">So first let&#x27;s understand bundle and bundleless.</p>
<p class="my-4 leading-7">A bundle is a package of build products, which may be a single file or multiple files based on a certain <a href="https://esbuild.github.io/api/#splitting" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087">code splitting strategy</a>.</p>
<p class="my-4 leading-7">bundleless, on the other hand, means that each source file is compiled and built separately, but not bundled together. Each output file can be found with its corresponding source code file. The process of <strong class="font-semibold">bundleless build can also be understood as the process of code conversion of source files only</strong>.</p>
<p class="my-4 leading-7">They have their own benefits.</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">bundle can reduce the size of build artifacts and also pre-package dependencies to reduce the size of installed dependencies. Packaging libraries in advance can speed up application project builds.</li>
<li class="[&amp;:not(:first-child)]:mt-2">bundleless maintains the original file structure and is more conducive to debugging and tree shaking.</li>
</ul>
<div class="rspress-directive warning"><div class="rspress-directive-title">WARNING</div><div class="rspress-directive-content"><p class="my-4 leading-7">bundleless is a single-file compilation mode, so for referencing and exporting types, you need to add the <code>type</code> keyword. For example, <code>import type { A } from &#x27;./types&#x27;</code>. Please refer to the <a href="https://esbuild.github.io/content-types/#isolated-modules" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087">esbuild documentation</a> for more information.
</p></div></div>
<p class="my-4 leading-7">In <code>buildConfig</code> you can specify whether the current build task is bundle or bundleless by using <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#buildtype"><code>buildConfig.buildType</code></a>.</p>
<h2 id="input-sourcedir" class="mt-14 mb-6 text-2xl tracking-tight title_e0087"><code>input</code> /<code>sourceDir</code><a class="link_e0087 header-anchor" aria-hidden="true" href="#input-sourcedir">#</a></h2>
<p class="my-4 leading-7"><a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#input"><code>buildConfig.input</code></a> is used to specify the path to a file or directory from which to read the source code, the default value of which varies between bundle and bundleless builds:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">When <code>buildType: &#x27;bundle&#x27;</code>, <code>input</code> defaults to <code>src/index.(j|t)sx?</code>.</li>
<li class="[&amp;:not(:first-child)]:mt-2">When <code>buildType: &#x27;bundleless&#x27;</code>, <code>input</code> defaults to <code>[&#x27;src&#x27;]</code>.</li>
</ul>
<p class="my-4 leading-7">From the default value, we know that <strong class="font-semibold">building in bundle mode usually specifies one or more files as the entry point for the build, while building in bundleless mode specifies a directory and uses all the files in that directory as the entry point</strong>.</p>
<p class="my-4 leading-7"><a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#sourcedir"><code>sourceDir</code></a> is used to specify the source directory, which is <strong class="font-semibold">only</strong> related to the following two elements:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Type file generation</li>
<li class="[&amp;:not(:first-child)]:mt-2"><a href="https://esbuild.github.io/api/#outbase" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087"><code>outbase</code></a> for specifying the build process</li>
</ul>
<p class="my-4 leading-7">So we can get its best practices:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">Only specify <code>input</code> during the bundle build.</strong></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">In general, bundleless only needs to specify <code>sourceDir</code> (where <code>input</code> will be aligned with <code>sourceDir</code>).</strong> If we want to use the <code>input</code> in bundleless, we only need to specify <code>sourceDir</code>.</li>
</ul>
<p class="my-4 leading-7">If you want to convert only some of the files in bundleless, e.g. only the files in the <code>src/runtime</code> directory, you need to configure <code>input</code>:</p>
<div class="language-js"><div class="rspress-code-title">modern.config.ts</div><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> defineConfig </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/module-tools&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-function)">defineConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">buildConfig</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">input</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;src/runtime&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">sourceDir</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;src&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="use-swc" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">use swc<a class="link_e0087 header-anchor" aria-hidden="true" href="#use-swc">#</a></h2>
<p class="my-4 leading-7">In some scenarios, esbuild is not enough to meet our needs, and we will use swc to do the code conversion.</p>
<p class="my-4 leading-7">Starting from version <strong class="font-semibold">2.36.0</strong>, the Modern.js Module will use swc by default when it comes to the following functionality, but that doesn&#x27;t mean we don&#x27;t use esbuild any more, the rest of the functionality will still use esbuild.</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#transformimport">transformImport</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#transformlodash">transformLodash</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#externalhelpers">externalHelpers</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#format-umd">format: umd</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#target">target: es5</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a href="https://www.typescriptlang.org/tsconfig#emitDecoratorMetadata" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087">emitDecoratorMetadata: true</a></li>
</ul>
<p class="my-4 leading-7">In fact, we&#x27;ve been using swc for full code conversion since <strong class="font-semibold">2.16.0</strong>. However, swc also has some limitations, so we added <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#sourcetype">sourceType</a> to turn off swc when the source is formatted as &#x27;commonjs&#x27;, which isn&#x27;t really user-intuitive, and the cjs mode of the swc formatted outputs don&#x27;t have annotate each export name, which can cause problems in node.
So we deprecated this behaviour and went back to the original design - <strong class="font-semibold">using swc as a supplement only in situations where it was needed</strong>.</p>
<h2 id="using-hooks-to-intervene-in-the-build-process" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">Using Hooks to Intervene in the Build Process<a class="link_e0087 header-anchor" aria-hidden="true" href="#using-hooks-to-intervene-in-the-build-process">#</a></h2>
<p class="my-4 leading-7">The Modern.js Module provides a Hook mechanism that allows us to inject custom logic at different stages of the build process.
The Modern.js Module Hook is implemented using <a href="https://github.com/webpack/tapable" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087">tapable</a>, which extends esbuild&#x27;s plugin mechanism, and is recommended to be used directly if esbuild plugins already meet your needs.
Here&#x27;s how to use it:</p>
<h3 id="hook-type" class="mt-10 mb-2 leading-7 text-xl title_e0087">Hook type<a class="link_e0087 header-anchor" aria-hidden="true" href="#hook-type">#</a></h3>
<h4 id="asyncseriesbailhook" class="mt-8 leading-6 text-base title_e0087">AsyncSeriesBailHook<a class="link_e0087 header-anchor" aria-hidden="true" href="#asyncseriesbailhook">#</a></h4>
<p class="my-4 leading-7">Serial hooks that stop the execution of other tapped functions if a tapped function returns a non-undefined result.</p>
<h4 id="asyncserieswaterfallhooks" class="mt-8 leading-6 text-base title_e0087">AsyncSeriesWaterFallHooks<a class="link_e0087 header-anchor" aria-hidden="true" href="#asyncserieswaterfallhooks">#</a></h4>
<p class="my-4 leading-7">Serial hooks whose results are passed to the next tapped function.</p>
<h3 id="hook-api" class="mt-10 mb-2 leading-7 text-xl title_e0087">Hook API<a class="link_e0087 header-anchor" aria-hidden="true" href="#hook-api">#</a></h3>
<h4 id="load" class="mt-8 leading-6 text-base title_e0087">load<a class="link_e0087 header-anchor" aria-hidden="true" href="#load">#</a></h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">AsyncSeriesBailHook</li>
<li class="[&amp;:not(:first-child)]:mt-2">Triggered at esbuild <a href="https://esbuild.github.io/plugins/#on-load" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087">onLoad callbacks</a> to fetch module content based on the module path</li>
<li class="[&amp;:not(:first-child)]:mt-2">Input parameters</li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">interface</span><span> </span><span class="token class-name">LoadArgs</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  path</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  namespace</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  suffix</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Return parameters</li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">LoadResult</span><span> </span><span class="token operator">=</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      contents</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> </span><span class="token" style="color:var(--code-token-comment)">// module contents</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      map</span><span class="token operator">?</span><span class="token operator">:</span><span> SourceMap</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> </span><span class="token" style="color:var(--code-token-comment)">// https://esbuild.github.io/api/#sourcemap</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      loader</span><span class="token operator">?</span><span class="token operator">:</span><span> Loader</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> </span><span class="token" style="color:var(--code-token-comment)">// https://esbuild.github.io/api/#loader</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      resolveDir</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-keyword)">undefined</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Example</li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>compiler</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>hooks</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>load</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">tapPromise</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;load content from memfs&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-keyword)">async</span><span> args </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> contents </span><span class="token operator">=</span><span> memfs</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">readFileSync</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>args</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>path</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    contents</span><span class="token operator">:</span><span> contents</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    loader</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h4 id="transform" class="mt-8 leading-6 text-base title_e0087">transform<a class="link_e0087 header-anchor" aria-hidden="true" href="#transform">#</a></h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">AsyncSeriesWaterFallHooks</li>
<li class="[&amp;:not(:first-child)]:mt-2">Triggered at esbuild <a href="https://esbuild.github.io/plugins/#on-load" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087">onLoad callbacks</a>.
Transforms the contents of the module fetched during the load phase</li>
<li class="[&amp;:not(:first-child)]:mt-2">Input parameters (return parameters)</li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">Source</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  code</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  map</span><span class="token operator">?</span><span class="token operator">:</span><span> SourceMap</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  path</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  loader</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Example</li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>compiler</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>hooks</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>transform</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">tapPromise</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;6to5&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-keyword)">async</span><span> args </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> result </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">babelTransform</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>args</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>code</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> presets</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;@babel/preset-env&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    code</span><span class="token operator">:</span><span> result</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>code</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    map</span><span class="token operator">:</span><span> result</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>map</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h4 id="renderchunk" class="mt-8 leading-6 text-base title_e0087">renderChunk<a class="link_e0087 header-anchor" aria-hidden="true" href="#renderchunk">#</a></h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">AsyncSeriesWaterFallHooks</li>
<li class="[&amp;:not(:first-child)]:mt-2">Triggered at esbuild <a href="https://esbuild.github.io/plugins/#on-end" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087">onEnd callbacks</a>.
This is similar to the transform hook, but works on the products generated by esbuild.</li>
<li class="[&amp;:not(:first-child)]:mt-2">Input parameters (return parameters)</li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">AssetChunk</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  type</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;asset&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  contents</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span> </span><span class="token operator">|</span><span> Buffer</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  entryPoint</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-comment)">/**
</span></span><span class="token" style="display:block;padding:0 1.25rem;color:var(--code-token-comment)">   * absolute file path
</span><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">   */</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  fileName</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  originalFileName</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">JsChunk</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  type</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;chunk&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  contents</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  entryPoint</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-comment)">/**
</span></span><span class="token" style="display:block;padding:0 1.25rem;color:var(--code-token-comment)">   * absolute file path
</span><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">   */</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  fileName</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  map</span><span class="token operator">?</span><span class="token operator">:</span><span> SourceMap</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  modules</span><span class="token operator">?</span><span class="token operator">:</span><span> Record</span><span class="token operator">&lt;</span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-symbol)">any</span><span class="token operator">&gt;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  originalFileName</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">Chunk</span><span> </span><span class="token operator">=</span><span> AssetChunk </span><span class="token operator">|</span><span> JsChunk</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Examples</li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>compiler</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>hooks</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>renderChunk</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">tapPromise</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;minify&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-keyword)">async</span><span> chunk </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>chunk</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>type </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;chunk&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> code </span><span class="token operator">=</span><span> chunk</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>contents</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">toString</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> result </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">await</span><span> </span><span class="token" style="color:var(--code-token-function)">minify</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">call</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>compiler</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> code</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token operator">...</span><span>chunk</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      contents</span><span class="token operator">:</span><span> result</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>code</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      map</span><span class="token operator">:</span><span> result</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>map</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> chunk</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="dts" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">dts<a class="link_e0087 header-anchor" aria-hidden="true" href="#dts">#</a></h2>
<p class="my-4 leading-7">The <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#dts"><code>buildConfig.dts</code></a> configuration is mainly used for type file generation.</p>
<h3 id="turn-off-type-generation" class="mt-10 mb-2 leading-7 text-xl title_e0087">Turn off type generation<a class="link_e0087 header-anchor" aria-hidden="true" href="#turn-off-type-generation">#</a></h3>
<p class="my-4 leading-7">Type generation is turned on by default, if you need to turn it off, you can configure it as follows:</p>
<div class="language-js"><div class="rspress-code-title">modern.config.ts</div><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> defineConfig </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/module-tools&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-function)">defineConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">buildConfig</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">dts</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">The build speed is generally improved by closing the type file.</p></div></div>
<h3 id="build-type-files" class="mt-10 mb-2 leading-7 text-xl title_e0087">Build type files<a class="link_e0087 header-anchor" aria-hidden="true" href="#build-type-files">#</a></h3>
<p class="my-4 leading-7">With <code>buildType: &#x27;bundleless&#x27;</code>, type files are generated using the project&#x27;s <code>tsc</code> command to complete production.</p>
<p class="my-4 leading-7">The <strong class="font-semibold">Modern.js Module also supports bundling of type files</strong>, although care needs to be taken when using this feature.</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Some third-party dependencies have incorrect syntax that can cause the bundling process to fail. So in this case, you need to exclude such third-party packages manually with <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/module-tools/en/api/config/build-config.html#externals"><code>buildConfig.externals</code></a>.</li>
<li class="[&amp;:not(:first-child)]:mt-2">It is not possible to handle the case where the type file of a third-party dependency points to a <code>.ts</code> file. For example, the <code>package.json</code> of a third-party dependency contains something like this: <code>{&quot;types&quot;: &quot;. /src/index.ts&quot;}</code>.</li>
</ul>
<h3 id="alias-conversion" class="mt-10 mb-2 leading-7 text-xl title_e0087">Alias Conversion<a class="link_e0087 header-anchor" aria-hidden="true" href="#alias-conversion">#</a></h3>
<p class="my-4 leading-7">During the bundleless build process, if an alias appears in the source code, e.g.</p>
<div class="language-js"><div class="rspress-code-title">./src/index.ts</div><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> utils </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@common/utils&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">Normally, the type files generated with <code>tsc</code> will also contain these aliases. However, Modern.js Module will convert the aliases in the type file generated by <code>tsc</code> to:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Alias conversion is possible for code of the form <code>import &#x27;@common/utils&#x27;</code> or <code>import utils from &#x27;@common/utils&#x27;</code>.</li>
<li class="[&amp;:not(:first-child)]:mt-2">Aliasing is possible for code of the form <code>export { utils } from &#x27;@common/utils&#x27;</code>.</li>
</ul>
<p class="my-4 leading-7">However, there are some cases that cannot be handled at this time.Output types of the form <code>Promise&lt;import(&#x27;@common/utils&#x27;)&gt;</code> cannot be converted at this time.
You can discuss it <a href="https://github.com/web-infra-dev/modern.js/discussions/4511" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087">here</a></p>
<h3 id="some-examples-of-the-use-ofdts" class="mt-10 mb-2 leading-7 text-xl title_e0087">Some examples of the use of<code>dts</code><a class="link_e0087 header-anchor" aria-hidden="true" href="#some-examples-of-the-use-ofdts">#</a></h3>
<p class="my-4 leading-7">General usage:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> defineConfig </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/module-tools&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-function)">defineConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-comment)">// The output path of the bundled type file at this point is `./dist/types`</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">buildConfig</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">buildType</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;bundle&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">dts</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">tsconfigPath</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./other-tsconfig.json&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">distPath</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./types&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">outDir</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./dist&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">For the use of <code>dts.only</code>:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> defineConfig </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/module-tools&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-function)">defineConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-comment)">// At this moment the type file is not bundled and the output path is `./dist/types`</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">buildConfig</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">buildType</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;bundle&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">dts</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">outDir</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./dist&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">buildType</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;bundleless&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">dts</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token literal-property" style="color:var(--code-token-parameter)">only</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">outDir</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./dist/types&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="build-process" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">Build process<a class="link_e0087 header-anchor" aria-hidden="true" href="#build-process">#</a></h2>
<p class="my-4 leading-7">When the <code>modern build</code> command is executed, the</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Clear the output directory according to <code>buildConfig.outDir</code>.</li>
<li class="[&amp;:not(:first-child)]:mt-2">Compile <code>js/ts</code> source code to generate the JS build artifacts for bundle/bundleless.</li>
<li class="[&amp;:not(:first-child)]:mt-2">Generate bundle/bundleless type files using <code>tsc</code>.</li>
<li class="[&amp;:not(:first-child)]:mt-2">Handle Copy tasks.</li>
</ul>
<h2 id="build-errors" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">Build errors<a class="link_e0087 header-anchor" aria-hidden="true" href="#build-errors">#</a></h2>
<p class="my-4 leading-7">When a build error occurs, based on the information learned above, it is easy to understand what error appears in the terminal.</p>
<p class="my-4 leading-7"><strong class="font-semibold">Errors reported for js or ts builds:</strong></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>error  ModuleBuildError:
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">╭───────────────────────╮
</span><span style="display:block;padding:0 1.25rem">│ bundle failed:        │
</span><span style="display:block;padding:0 1.25rem">│  - format is &quot;cjs&quot;    │
</span><span style="display:block;padding:0 1.25rem">│  - target is &quot;esnext&quot; │
</span><span style="display:block;padding:0 1.25rem">╰───────────────────────╯
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">Detailed Information:</span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7"><strong class="font-semibold">Errors reported for the type file generation process:</strong></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>error   ModuleBuildError:
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">bundle DTS failed:</span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">For <code>js/ts</code> build errors, we can tell from the error message.</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">By <code>&#x27;bundle failed:&#x27;</code> to determine if the error is reported for a bundle build or a bundleless build</li>
<li class="[&amp;:not(:first-child)]:mt-2">What is the <code>format</code> of the build process</li>
<li class="[&amp;:not(:first-child)]:mt-2">What is the <code>target</code> of the build process</li>
<li class="[&amp;:not(:first-child)]:mt-2">The specific error message</li>
</ul>
<h2 id="debug-mode" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">Debug mode<a class="link_e0087 header-anchor" aria-hidden="true" href="#debug-mode">#</a></h2>
<p class="my-4 leading-7">From <strong class="font-semibold">2.36.0</strong>, For troubleshooting purposes, the Modern.js Module provides a debug mode, which you can enable by adding the DEBUG=module environment variable when executing a build.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>DEBUG=module modern build</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">In debug mode, you&#x27;ll see more detailed build logs output in Shell, which are mainly process logs:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>module run beforeBuildTask hooks +6ms
</span></span><span style="display:block;padding:0 1.25rem">module run beforeBuildTask hooks done +0ms
</span><span style="display:block;padding:0 1.25rem">module [DTS] Build Start +139ms
</span><span style="display:block;padding:0 1.25rem">module [CJS] Build Start +1ms</span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">In addition, Module provides the ability to debug internal workflows. You can enable more detailed debugging logging by setting the <code>DEBUG=module:*</code> environment variable.</p>
<p class="my-4 leading-7">Currently, only <code>DEBUG=module:resolve</code> is supported, which allows you to see a detailed log of module resolution within the Module.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>module:resolve onResolve args: {
</span></span><span style="display:block;padding:0 1.25rem">  path: &#x27;./src/hooks/misc.ts&#x27;,
</span><span style="display:block;padding:0 1.25rem">  importer: &#x27;&#x27;,
</span><span style="display:block;padding:0 1.25rem">  namespace: &#x27;file&#x27;,
</span><span style="display:block;padding:0 1.25rem">  resolveDir: &#x27;/Users/bytedance/modern.js/packages/solutions/module-tools&#x27;,
</span><span style="display:block;padding:0 1.25rem">  kind: &#x27;entry-point&#x27;,
</span><span style="display:block;padding:0 1.25rem">  pluginData: undefined
</span><span style="display:block;padding:0 1.25rem">} +0ms
</span><span style="display:block;padding:0 1.25rem">  module:resolve onResolve result: {
</span><span style="display:block;padding:0 1.25rem">  path: &#x27;/Users/bytedance/modern.js/packages/solutions/module-tools/src/hooks/misc.ts&#x27;,
</span><span style="display:block;padding:0 1.25rem">  external: false,
</span><span style="display:block;padding:0 1.25rem">  namespace: &#x27;file&#x27;,
</span><span style="display:block;padding:0 1.25rem">  sideEffects: undefined,
</span><span style="display:block;padding:0 1.25rem">  suffix: &#x27;&#x27;
</span><span style="display:block;padding:0 1.25rem">} +0ms</span></code></pre><button class="copy"></button></div></div><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/document/module-doc/docs/en/guide/advance/in-depth-about-build.md" target="_blank" class="editLink_d8024">Edit this page on GitHub</a></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_cd2c7 flex flex-col"><a class="link_2625c pager-link_cd2c7 cursor-pointer" target="" href="/module-tools/en/guide/basic/publish-your-project.html"><span class="desc_cd2c7">Previous Page</span><span class="title_cd2c7">Versioning and Publishing</span></a></div><div class="next_cd2c7 flex flex-col"><a class="link_2625c pager-link_cd2c7 next_cd2c7 cursor-pointer" target="" href="/module-tools/en/guide/advance/in-depth-about-dev-command.html"><span class="desc_cd2c7">Next page</span><span class="title_cd2c7">In-depth understanding of the dev command</span></a></div></div></footer></div></div></div><div class="aside-container_c7b5e"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">ON THIS PAGE</div><nav class="mt-1"><ul class="relative"><li><a href="#bundle--bundleless" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">bundle / bundleless</span></a></li><li><a href="#input--sourcedir" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">input / sourceDir</span></a></li><li><a href="#use-swc" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">use swc</span></a></li><li><a href="#using-hooks-to-intervene-in-the-build-process" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">Using Hooks to Intervene in the Build Process</span></a></li><li><a href="#hook-type" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">Hook type</span></a></li><li><a href="#asyncseriesbailhook" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">AsyncSeriesBailHook</span></a></li><li><a href="#asyncserieswaterfallhooks" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">AsyncSeriesWaterFallHooks</span></a></li><li><a href="#hook-api" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">Hook API</span></a></li><li><a href="#load" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">load</span></a></li><li><a href="#transform" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">transform</span></a></li><li><a href="#renderchunk" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">renderChunk</span></a></li><li><a href="#dts" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">dts</span></a></li><li><a href="#turn-off-type-generation" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">Turn off type generation</span></a></li><li><a href="#build-type-files" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">Build type files</span></a></li><li><a href="#alias-conversion" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">Alias Conversion</span></a></li><li><a href="#some-examples-of-the-use-of-dts" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">Some examples of the use of dts</span></a></li><li><a href="#build-process" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">Build process</span></a></li><li><a href="#build-errors" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">Build errors</span></a></li><li><a href="#debug-mode" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">Debug mode</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div><div id="search-container"></div></body></html>