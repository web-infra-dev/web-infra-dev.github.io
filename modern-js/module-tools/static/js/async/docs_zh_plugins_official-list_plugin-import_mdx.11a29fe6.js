(self.webpackChunk_modern_js_module_tools_docs=self.webpackChunk_modern_js_module_tools_docs||[]).push([["docs_zh_plugins_official-list_plugin-import_mdx"],{42428:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return a}});var o,s=r("15169"),l=r("43932"),i=r("9880"),d=r("23169");function t(e){var n=Object.assign({h1:"h1",a:"a",p:"p",div:"div",code:"code",h2:"h2",h3:"h3",pre:"pre",ul:"ul",li:"li",strong:"strong"},(0,d.useMDXComponents)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"import-插件",children:["Import 插件",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#import-插件",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["提供与 ",(0,i.jsx)(n.a,{href:"https://github.com/umijs/babel-plugin-import",target:"_blank",rel:"noopener noreferrer",children:"babel-plugin-import"})," 等价的能力和配置，基于 ",(0,i.jsx)(n.a,{href:"https://swc.rs/",target:"_blank",rel:"noopener noreferrer",children:"SWC"})," 实现。"]}),"\n",(0,i.jsxs)(n.div,{className:"modern-directive tip",children:[(0,i.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,i.jsx)(n.div,{className:"modern-directive-content",children:(0,i.jsxs)(n.p,{children:["从 ",(0,i.jsx)(n.code,{children:"@modern-js/module-tools"})," v2.16.0 版本开始，该插件功能内置在 Module Tools 中，由 ",(0,i.jsx)(n.a,{href:"/api/config/build-config#transformimport",children:(0,i.jsx)(n.code,{children:"transformImport"})}),"\n配置提供。\n"]})})]}),"\n",(0,i.jsxs)(n.h2,{id:"快速开始",children:["快速开始",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#快速开始",children:"#"})]}),"\n",(0,i.jsxs)(n.h3,{id:"安装",children:["安装",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#安装",children:"#"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# npm\nnpm install @modern-js/plugin-module-import -D\n\n# yarn\nyarn add @modern-js/plugin-module-import -D\n\n# pnpm\npnpm add @modern-js/plugin-module-import -D\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"注册插件",children:["注册插件",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#注册插件",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"在 Module Tools 中，你可以按照如下方式注册插件："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { moduleTools, defineConfig } from '@modern-js/module-tools';\nimport { modulePluginImport } from '@modern-js/plugin-module-import';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginImport({\n      pluginImport: [\n        {\n          libraryName: 'antd',\n          style: true,\n        },\n      ],\n    }),\n  ],\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"这样我们就可以在 Module Tools 中使用自动导入的能力了。"}),"\n",(0,i.jsxs)(n.h2,{id:"配置",children:["配置",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"type Options = {\n  pluginImport?: ImportItem[];\n};\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"pluginimport",children:["pluginImport",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#pluginimport",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["类型：",(0,i.jsx)(n.code,{children:"object[]"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["其中数组元素为一个 babel-plugin-import 的配置对象。配置对象可以参考 ",(0,i.jsx)(n.a,{href:"https://github.com/umijs/babel-plugin-import#options",target:"_blank",rel:"noopener noreferrer",children:"options"}),"。"]}),"\n",(0,i.jsx)(n.p,{children:"使用示例："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { modulePluginImport } from '@modern-js/plugin-module-import';\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginImport({\n      pluginImport: [\n        // babel-plugin-import 的 options 配置\n        {\n          libraryName: 'foo',\n          style: true,\n        },\n      ],\n    }),\n  ],\n});\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"注意事项",children:["注意事项",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#注意事项",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://swc.rs/",target:"_blank",rel:"noopener noreferrer",children:"SWC"})," (Speedy Web Compiler) 是基于 Rust 语言编写的，而该插件是基于 SWC，移植自 ",(0,i.jsx)(n.a,{href:"https://github.com/umijs/babel-plugin-import",target:"_blank",rel:"noopener noreferrer",children:"babel-plugin-import"}),"，配置选项保持了一致。"]}),"\n",(0,i.jsxs)(n.p,{children:["一些配置可以传入函数，例如 ",(0,i.jsx)(n.code,{children:"customName"}),"，",(0,i.jsx)(n.code,{children:"customStyleName"})," 等，这些 JavaScript 函数会由 Rust 通过 Node-API 调用，这种调用会造成一些性能劣化。"]}),"\n",(0,i.jsxs)(n.p,{children:["简单的函数逻辑其实可以通过模版语言来代替，因此 ",(0,i.jsx)(n.code,{children:"customName"}),"，",(0,i.jsx)(n.code,{children:"customStyleName"})," 等这些配置除了可以传入函数，也可以传入字符串作为模版来代替函数，提高性能。"]}),"\n",(0,i.jsx)(n.p,{children:"我们以这段代码作为示例："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { MyButton as Btn } from 'foo';\n"})}),"\n",(0,i.jsx)(n.p,{children:"添加以下配置："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"modulePluginImport({\n  pluginImport: [\n    {\n      libraryName: 'foo',\n      customName: 'foo/es/{{ member }}',\n    },\n  ],\n});\n"})}),"\n",(0,i.jsxs)(n.p,{children:["其中的 ",(0,i.jsx)(n.code,{children:"{{ member }}"})," 会被替换为相应的引入成员，转换后:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import Btn from 'foo/es/MyButton';\n"})}),"\n",(0,i.jsxs)(n.p,{children:["可以看出配置 ",(0,i.jsx)(n.code,{children:'customName: "foo/es/{{ member }}"'})," 的效果等同于配置 ",(0,i.jsx)(n.code,{children:" customName: (member) => `foo/es/${member}`  "})," ，但是不会有 Node-API 的调用开销。"]}),"\n",(0,i.jsxs)(n.p,{children:["这里使用到的模版是 ",(0,i.jsx)(n.a,{href:"https://handlebarsjs.com",target:"_blank",rel:"noopener noreferrer",children:"handlebars"}),"，模版配置中还内置了一些有用的辅助工具，还是以上面的导入语句为例，配置成："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { modulePluginImport } from '@modern-js/plugin-module-import';\nimport { moduleTools, defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig({\n  plugins: [\n    moduleTools(),\n    modulePluginImport({\n      pluginImport: [\n        {\n          libraryName: 'foo',\n          customName: 'foo/es/{{ kebabCase member }}',\n        },\n      ],\n    }),\n  ],\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"会转换成下面的结果："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import Btn from 'foo/es/my-button';\n"})}),"\n",(0,i.jsxs)(n.p,{children:["除了 ",(0,i.jsx)(n.code,{children:"kebabCase"})," 以外还有 ",(0,i.jsx)(n.code,{children:"camelCase"}),"，",(0,i.jsx)(n.code,{children:"snakeCase"}),"，",(0,i.jsx)(n.code,{children:"upperCase"}),"，",(0,i.jsx)(n.code,{children:"lowerCase"})," 可以使用。"]})]})}(o=globalThis).__RSPRESS_PAGE_META||(o.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["zh%2Fplugins%2Fofficial-list%2Fplugin-import.mdx"]={toc:[{text:"快速开始",id:"快速开始",depth:2},{text:"安装",id:"安装",depth:3},{text:"注册插件",id:"注册插件",depth:3},{text:"配置",id:"配置",depth:2},{text:"pluginImport",id:"pluginimport",depth:3},{text:"注意事项",id:"注意事项",depth:2}],title:"Import 插件",frontmatter:{}};var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,d.useMDXComponents)(),e.components).wrapper;return n?(0,i.jsx)(n,(0,l._)((0,s._)({},e),{children:(0,i.jsx)(t,(0,s._)({},e))})):t(e)}}}]);