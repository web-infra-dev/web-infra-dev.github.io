{"version":3,"file":"static/js/async/docs_en_guide_advance_build-umd_mdx.33566435.js","sources":["./docs/en/guide/advance/build-umd.mdx"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"en%2Fguide%2Fadvance%2Fbuild-umd.mdx\"] = {\"toc\":[{\"text\":\"Third-party dependency handling for umd artifacts\",\"id\":\"third-party-dependency-handling-for-umd-artifacts\",\"depth\":2},{\"text\":\"Example\",\"id\":\"example\",\"depth\":3},{\"text\":\"Global variable names of third-party dependencies\",\"id\":\"global-variable-names-of-third-party-dependencies\",\"depth\":3},{\"text\":\"Changing the name of a global variable in a project\",\"id\":\"changing-the-name-of-a-global-variable-in-a-project\",\"depth\":2}],\"title\":\"Build umd artifacts\",\"frontmatter\":{\"sidebar_position\":5}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        p: \"p\",\n        strong: \"strong\",\n        ul: \"ul\",\n        li: \"li\",\n        pre: \"pre\",\n        code: \"code\",\n        h2: \"h2\",\n        h3: \"h3\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"build-umd-artifacts\">{\"Build umd artifacts\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#build-umd-artifacts\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.p>{\"The full name of umd is \"}<_components.strong>{\"Universal Module Definition\"}</_components.strong>{\", and JS files in this format can run in multiple runtime environments: the\"}</_components.p>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"Browser environment: module loading based on AMD specification\"}</_components.li>{\"\\n\"}<_components.li>{\"Node.js environment: module loading based on CommonJS\"}</_components.li>{\"\\n\"}<_components.li>{\"Other cases: mount the module on a global object.\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.p>{\"We can therefore specify the build artifacts of the project as an umd artifact in the following way:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export default defineConfig({\\n  buildConfig: {\\n    format: 'umd',\\n  },\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"third-party-dependency-handling-for-umd-artifacts\">{\"Third-party dependency handling for umd artifacts\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#third-party-dependency-handling-for-umd-artifacts\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"In the \"}<_components.a href=\"/en/guide/advance/external-dependency\">{'\"How to handle third-party dependencies\"'}</_components.a>{\" chapter, we know that we can control whether or not the project packages third-party dependencies via the \"}<_components.a href=\"/en/api/config/build-config#autoexternal\"><_components.code>{\"autoExternals\"}</_components.code></_components.a>{\" and \"}<_components.a href=\"/en/api/config/build-config#externals\"><_components.code>{\"externals\"}</_components.code></_components.a>{\" APIs.\\nSo when building umd artifacts, we can also use it like this:\"}</_components.p>{\"\\n\"}<_components.h3 id=\"example\">{\"Example\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#example\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"If the project depends on \"}<_components.code>{\"react\"}</_components.code>{\":\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-json\" meta='title=\"package.json\"'>{'{\\n  \"dependencies\": {\\n    \"react\": \"^17\"\\n  }\\n}\\n'}</_components.code></_components.pre>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li><_components.code>{\"modern.config.ts\"}</_components.code>{\":\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export default defineConfig({\\n  buildConfig: {\\n    format: 'umd',\\n    autoExternal: false,\\n    externals: ['react'],\\n  },\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"When a \"}<_components.code>{\"react\"}</_components.code>{\" dependency is used in the source code:\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-tsx\" meta='title=\"src/index.ts\"'>{\"import React from 'react';\\nconsole.info(React);\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"The \"}<_components.code>{\"react\"}</_components.code>{\" code is not bundled into the artifact at this point:\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-js\" meta='title=\"dist/index.js\"'>{\"(function (global, factory) {\\n  if (typeof module === 'object' && typeof module.exports === 'object')\\n    factory(exports, require('react'));\\n  else if (typeof define === 'function' && define.amd)\\n    define(['exports', 'react'], factory);\\n  else if (\\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self)\\n  )\\n    factory((global.index = {}), global.react);\\n})(this, function (exports, _react) {\\n  'use strict';\\n  Object.defineProperty(exports, '__esModule', {\\n    value: true,\\n  });\\n  _react = /*#__PURE__*/ _interopRequireDefault(_react);\\n  function _interopRequireDefault(obj) {\\n    return obj && obj.__esModule\\n      ? obj\\n      : {\\n          default: obj,\\n        };\\n  }\\n  console.info(_react.default);\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"We know from the above example that when using the \"}<_components.code>{\"autoExternal\"}</_components.code>{\" and \"}<_components.code>{\"externals\"}</_components.code>{\" APIs.\"}</_components.p>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"In a Node.js environment, you can get the react dependency with \"}<_components.code>{\"require('react')\"}</_components.code>{\".\"}</_components.li>{\"\\n\"}<_components.li>{\"In a browser environment, you can get the react dependency via \"}<_components.code>{\"global.react\"}</_components.code>{\".\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.h3 id=\"global-variable-names-of-third-party-dependencies\">{\"Global variable names of third-party dependencies\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#global-variable-names-of-third-party-dependencies\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"However, in the browser environment, when getting third-party dependencies, \"}<_components.strong>{\"global variable names are not necessarily identical to the dependency names\"}</_components.strong>{\", so you have to use the \"}<_components.a href=\"/en/api/config/build-config#umdglobals\"><_components.code>{\"buildConfig.umdGlobals\"}</_components.code></_components.a>{\" API.\"}</_components.p>{\"\\n\"}<_components.p>{\"Again using the previous example, when the \"}<_components.code>{\"react\"}</_components.code>{\" dependency exists in the browser environment as a \"}<_components.code>{\"windows.React\"}</_components.code>{\" or \"}<_components.code>{\"global.React\"}</_components.code>{\" global variable, then:\"}</_components.p>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li><_components.code>{\"modern.config.ts\"}</_components.code>{\" config file:\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export default defineConfig({\\n  buildConfig: {\\n    format: 'umd',\\n    umdGlobals: {\\n      react: 'React',\\n    },\\n  },\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"When a \"}<_components.code>{\"react\"}</_components.code>{\" dependency is used in the source code:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-tsx\" meta='title=\"src/index.ts\"'>{\"import React from 'react';\\nconsole.info(React);\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"At this point we will see the output code like this:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\" meta='title=\"dist/index.js\"'>{\"(function (global, factory) {\\n  if (typeof module === 'object' && typeof module.exports === 'object')\\n    factory();\\n  else if (typeof define === 'function' && define.amd) define([], factory);\\n  else if (\\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self)\\n  )\\n    factory();\\n})(this, function () {\\n  // ...\\n  // libuild:globals:react\\n  var require_react = __commonJS({\\n    'libuild:globals:react'(exports, module1) {\\n      module1.exports = Function('return this')()['React'];\\n    },\\n  });\\n  // src/index.ts\\n  var import_react = __toESM(require_react());\\n  console.info(import_react.default);\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"The project can then run in the browser and use the \"}<_components.code>{\"React\"}</_components.code>{\" variables that exist on the global object.\"}</_components.p>{\"\\n\"}<_components.h2 id=\"changing-the-name-of-a-global-variable-in-a-project\">{\"Changing the name of a global variable in a project\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#changing-the-name-of-a-global-variable-in-a-project\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"When we package the following code into an umd artifact and run it in the browser, we can use the module via \"}<_components.code>{\"window.index\"}</_components.code>{\".\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"./src/index.ts\"'>{\"export default () => {\\n  console.info('hello world');\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"** By default, the name of the source file is used as the name of the module's global variable in the browser. **For the above example, the artifact would read as follows:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\" meta='title=\"./dist/index.js\"'>{\"(function (global, factory) {\\n  if (typeof module === 'object' && typeof module.exports === 'object')\\n    factory(exports);\\n  else if (typeof define === 'function' && define.amd)\\n    define(['exports'], factory);\\n  else if (\\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self)\\n  )\\n    factory((global.index = {}));\\n})(this, function (exports) {\\n  //...\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"If you need to modify it, you need to use the \"}<_components.a href=\"/en/api/config/build-config#umdmodulename\"><_components.code>{\"buildConfig.umdModuleName\"}</_components.code></_components.a>{\" API.\"}</_components.p>{\"\\n\"}<_components.p>{\"When this API is used:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export default defineConfig({\\n  buildConfig: {\\n    format: 'umd',\\n    umdModuleName: 'myLib',\\n  },\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"The build artifact at this point are:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\" meta='title=\"./dist/index.js\"'>{\"(function (global, factory) {\\n  if (typeof module === 'object' && typeof module.exports === 'object')\\n    factory(exports);\\n  else if (typeof define === 'function' && define.amd)\\n    define(['exports'], factory);\\n  else if (\\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self)\\n  )\\n    factory((global.myLib = {}));\\n})(this, function (exports) {\\n  //...\\n});\\n\"}</_components.code></_components.pre></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","a","p","strong","ul","li","pre","code","h2","h3","components","id","className","href","meta","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_"],"mappings":"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"}