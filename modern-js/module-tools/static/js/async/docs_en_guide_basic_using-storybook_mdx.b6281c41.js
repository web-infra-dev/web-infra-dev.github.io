(self.webpackChunk_modern_js_module_tools_docs=self.webpackChunk_modern_js_module_tools_docs||[]).push([["docs_en_guide_basic_using-storybook_mdx"],{7369:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return l}});var r,t=o("15169"),i=o("43932"),s=o("9880"),c=o("23169");function d(e){var n=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",code:"code",h2:"h2",strong:"strong",h3:"h3",pre:"pre",blockquote:"blockquote",ol:"ol",div:"div"},(0,c.useMDXComponents)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"using-storybook",children:["Using Storybook",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#using-storybook",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"First of all, if you haven't read the following, take a few minutes to understand it first."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/en/guide/basic/use-micro-generator#storybook-debug",children:"use micro-generator to enable Storybook debugging"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/en/guide/basic/command-preview#modern-dev",children:(0,s.jsx)(n.code,{children:"modern dev"})})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://storybook.js.org/",target:"_blank",rel:"noopener noreferrer",children:"Storybook"})," is a tool dedicated to component debugging, providing around component development."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Develop UIs that are more durable"}),"\n",(0,s.jsx)(n.li,{children:"Test UIs with less effort and no flakes"}),"\n",(0,s.jsx)(n.li,{children:"Document UI for your team to reuse"}),"\n",(0,s.jsx)(n.li,{children:"Share how the UI actually works"}),"\n",(0,s.jsx)(n.li,{children:"Automate UI workflows"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"So Storybook is a complex and powerful tool."}),"\n",(0,s.jsx)(n.p,{children:"Module Tools is integrated with Storybook, so you can pretty much follow the official Storybook documentation. However, there are still a few things to keep in mind, which are explained below."}),"\n",(0,s.jsxs)(n.h2,{id:"debugging-code",children:["Debugging code",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#debugging-code",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"The project code needs to be introduced during the debugging process and can currently be introduced in two ways:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use of project products"}),"\n",(0,s.jsx)(n.li,{children:"Using the project source code"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:['We recommend using the first "',(0,s.jsx)(n.strong,{children:"referenced project product"}),'" approach. Because it is closer to the real usage scenario, not only can we debug the component functionality, but also verify the correctness of the build product. However, we can also refer to the source code when testing the project functionality and refer to the project package name when verifying the project product.']}),"\n",(0,s.jsx)(n.p,{children:"Next, we will talk about how to use each of these two methods."}),"\n",(0,s.jsxs)(n.h3,{id:"referencing-component-products",children:["Referencing component products",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#referencing-component-products",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["If the TypeScript project ",(0,s.jsx)(n.code,{children:"foo"})," exists. Make sure the ",(0,s.jsx)(n.code,{children:"main"})," and ",(0,s.jsx)(n.code,{children:"types"})," of ",(0,s.jsx)(n.code,{children:"package.json"})," values are real paths."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",meta:'title="package.json"',children:'{\n  "name": "foo",\n  "main": "./dist/index.js",\n  "types": "./dist/types/index.d.ts"\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The source code of the ",(0,s.jsx)(n.code,{children:"foo"})," project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="src/index.ts"',children:"export const content = 'hello world';\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Make sure that the ",(0,s.jsx)(n.code,{children:"paths"})," configuration pointing to the project root is set in ",(0,s.jsx)(n.code,{children:"stories/tsconfig.json"}),". The ",(0,s.jsx)(n.code,{children:"key"})," of ",(0,s.jsx)(n.code,{children:"paths"})," is the same as the project name."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",meta:'title="stories/tsconfig.json"',children:'{\n  "extends": "../tsconfig.json",\n  "include": ["./"],\n  "compilerOptions": {\n    "jsx": "preserve",\n    "baseUrl": ".",\n    "paths": {\n      "foo": ["../"]\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Referenced directly in Story code by the project name:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",meta:'title="stories/index.stories.tsx"',children:"import { content } from 'foo';\n\nconst Component = () => <div>this is a Story Component {content}</div>;\n\nexport const YourStory = () => <Component />;\n\nexport default {\n  title: 'Your Stories',\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:"Finally, when executing the command, first start the source build in listening mode and then start Storybook debugging."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",meta:'title="terminal-1"',children:"## Source Code Build\nmodern build --watch\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",meta:'title="terminal-2"',children:"## Storybook Debug\nmodern dev storybook\n"})}),"\n",(0,s.jsx)(n.p,{children:"If, during development, you encounter a situation where the type definition is not available in real time, at that point."}),"\n",(0,s.jsxs)(n.p,{children:["For ",(0,s.jsx)(n.code,{children:"pnpm"})," projects, ",(0,s.jsx)(n.code,{children:"package.json"})," can be modified as follows."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'{\n    "name": "foo",\n    "main": "./dist/index.js",\n    "types": "./src/index.ts",\n    "publishConfig": {\n      "types": "./dist/index.d.ts",\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["For the use of pnpm's ",(0,s.jsx)(n.code,{children:"publishConfig"}),", you can read the following ",(0,s.jsx)(n.a,{href:"https://pnpm.io/package_json#publishconfig",target:"_blank",rel:"noopener noreferrer",children:"link"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For npm and Yarn projects, the values of ",(0,s.jsx)(n.code,{children:"types"})," of ",(0,s.jsx)(n.code,{children:"package.json"})," can only be changed manually in ",(0,s.jsx)(n.strong,{children:"development phase"})," and ",(0,s.jsx)(n.strong,{children:"release phase"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"So why is it possible to reference the product directly?"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["execute ",(0,s.jsx)(n.code,{children:"modern build --watch"})," command before executing ",(0,s.jsx)(n.code,{children:"modern dev storybook"})," command to ensure the existence of project build products."]}),"\n",(0,s.jsxs)(n.li,{children:["Add processing logic inside Storybook to ensure that the project's product paths can be parsed ",(0,s.jsxs)(n.strong,{children:["according to ",(0,s.jsx)(n.code,{children:"package.json"}),", based on the ",(0,s.jsx)(n.code,{children:"compilerOptions.paths"})," configuration in the ",(0,s.jsx)(n.code,{children:"tsconfig.json"})," file or (in JS projects) directly with the project name as an alias"]}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"referencing-component-source-code",children:["Referencing component source code",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#referencing-component-source-code",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Referencing component source code can be done by means of relative paths to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",meta:'title="./stories/index.tsx"',children:"import { content } from '../src';\n\nconst Component = () => <div>this is a Story Component {content}</div>;\n\nexport const YourStory = () => <Component />;\n\nexport default {\n  title: 'Your Stories',\n};\n"})}),"\n",(0,s.jsxs)(n.div,{className:"modern-directive tip",children:[(0,s.jsx)(n.div,{className:"modern-directive-title",children:"Why is the source code approach not recommended"}),(0,s.jsxs)(n.div,{className:"modern-directive-content",children:[(0,s.jsxs)(n.p,{children:["Not only is it impossible to verify that the component product is correct using the component source code, ",(0,s.jsx)(n.strong,{children:"but also some of the configurations supported by the module project for building the product cannot be fully translated into Storybook internal configuration"}),". If some of the configurations cannot be converted to each other, there will be unintended results during Storybook debugging."]}),"\n",(0,s.jsx)(n.p,{children:"Module Tools is based on esbuild, while Storybook is based on Webpack, and esbuild's configuration is not fully compatible with Webpack.\n"})]})]}),"\n",(0,s.jsxs)(n.h2,{id:"configure-storybook",children:["Configure Storybook",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configure-storybook",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Storybook is officially configured for projects through a folder called ",(0,s.jsx)(n.code,{children:".storybook"}),", which contains various configuration files. ",(0,s.jsxs)(n.strong,{children:["In a module project scenario, Storybook configuration files can be added to the ",(0,s.jsx)(n.code,{children:"config/storybook"})," directory of the project."]})]}),"\n",(0,s.jsx)(n.p,{children:"For more information on how to use the various Storybook configuration files, see the following links:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://storybook.js.org/docs/react/configure/overview",target:"_blank",rel:"noopener noreferrer",children:"Configure Storybook"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"But there are some limitations to Storybooking in a module project"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["It is currently not possible to change the location of the Story file, i.e., you cannot change the ",(0,s.jsx)(n.code,{children:"stories"})," configuration in the ",(0,s.jsx)(n.code,{children:"main.js"})," file."]}),"\n",(0,s.jsxs)(n.li,{children:["Currently you cannot modify Webpack and Babel related configuration, i.e. you cannot modify ",(0,s.jsx)(n.code,{children:"webpackFinal"})," and ",(0,s.jsx)(n.code,{children:"babel"})," configuration in the ",(0,s.jsx)(n.code,{children:"main.js"})," file."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"In the future we will consider whether these configurations can be allowed to be modified, but for now we are limiting their use to reduce unpredictable issues."}),"\n",(0,s.jsxs)(n.h2,{id:"building-storybook-products",children:["Building Storybook Products",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#building-storybook-products",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"In addition to Storybook debugging of components or common modules, you can also perform Storybook build tasks with the following commands."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"modern build --platform storybook\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For the ",(0,s.jsx)(n.code,{children:"modern build --platform"})," command you can see."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/en/guide/basic/command-preview#modern-build",children:(0,s.jsx)(n.code,{children:"modern build"})})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["After the build is complete, you can see the build artifacts files in the ",(0,s.jsx)(n.code,{children:"dist/storybook-static"})," directory."]}),"\n",(0,s.jsxs)(n.h2,{id:"use-tailwind-css-with-storybook",children:["Use Tailwind CSS with Storybook",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#use-tailwind-css-with-storybook",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["If you need to use Tailwind CSS in the ",(0,s.jsx)(n.code,{children:"stories"})," directory, make sure that the Tailwind CSS configuration for your current project includes the ",(0,s.jsx)(n.code,{children:"stories"})," directory."]}),"\n",(0,s.jsxs)(n.p,{children:["Taking the ",(0,s.jsx)(n.code,{children:"tailwind.config.ts"})," file as an example, you need to configure the following content:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",meta:'title="tailwind.config.ts"',children:"export default {\n  content: [\n    './src/**/*.{js,jsx,ts,tsx}',\n+   './stories/**/*.{js,jsx,ts,tsx}',\n  ],\n};\n"})})]})}(r=globalThis).__RSPRESS_PAGE_META||(r.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fguide%2Fbasic%2Fusing-storybook.mdx"]={toc:[{text:"Debugging code",id:"debugging-code",depth:2},{text:"Referencing component products",id:"referencing-component-products",depth:3},{text:"Referencing component source code",id:"referencing-component-source-code",depth:3},{text:"Configure Storybook",id:"configure-storybook",depth:2},{text:"Building Storybook Products",id:"building-storybook-products",depth:2},{text:"Use Tailwind CSS with Storybook",id:"use-tailwind-css-with-storybook",depth:2}],title:"Using Storybook",frontmatter:{sidebar_position:5}};var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,c.useMDXComponents)(),e.components).wrapper;return n?(0,s.jsx)(n,(0,i._)((0,t._)({},e),{children:(0,s.jsx)(d,(0,t._)({},e))})):d(e)}}}]);