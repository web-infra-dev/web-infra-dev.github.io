(self.webpackChunk_modern_js_module_tools_docs=self.webpackChunk_modern_js_module_tools_docs||[]).push([["9486"],{7249:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return c}});var r=s("15169"),d=s("43932"),i=s("9880"),l=s("23169");function t(e){return(0,i.jsx)(i.Fragment,{})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,i.jsx)(n,(0,d._)((0,r._)({},e),{children:(0,i.jsx)(t,(0,r._)({},e))})):t(e)}var c=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["zh%2Fcomponents%2Ffaq-build-exception.mdx"]={toc:[],title:""}},99193:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return c}});var r=s("15169"),d=s("43932"),i=s("9880"),l=s("23169");function t(e){return(0,i.jsx)(i.Fragment,{})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,i.jsx)(n,(0,d._)((0,r._)({},e),{children:(0,i.jsx)(t,(0,r._)({},e))})):t(e)}var c=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["zh%2Fcomponents%2Ffaq-build-other.mdx"]={toc:[],title:""}},89884:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return c}});var r=s("15169"),d=s("43932"),i=s("9880"),l=s("23169");function t(e){return(0,i.jsx)(i.Fragment,{})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,i.jsx)(n,(0,d._)((0,r._)({},e),{children:(0,i.jsx)(t,(0,r._)({},e))})):t(e)}var c=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["zh%2Fcomponents%2Ffaq-build-product.mdx"]={toc:[],title:""}},57540:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return c}});var r=s("15169"),d=s("43932"),i=s("9880"),l=s("23169");function t(e){var n=Object.assign({pre:"pre",code:"code",p:"p"},(0,l.useMDXComponents)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",meta:'title="modern.config.ts"',children:"import { myEsbuildPlugin } from './myEsbuildPlugin';\n\nexport default defineConfig({\n  buildConfig: {\n    esbuildOptions: options => {\n      options.plugins = [myEsbuildPlugin, ...options.plugins];\n      return options;\n    },\n  },\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u589E\u52A0 esbuild \u63D2\u4EF6\u65F6\uFF0C\u8BF7\u6CE8\u610F\u4F60\u9700\u8981\u5C06\u63D2\u4EF6\u52A0\u5728 plugins \u6570\u7EC4\u7684\u5934\u90E8\uFF0C\u56E0\u4E3A Modern.js Module \u5185\u90E8\u4E5F\u662F\u901A\u8FC7\u4E00\u4E2A esbuild \u63D2\u4EF6\u4ECB\u5165\u5230\u6574\u4E2A\u6784\u5EFA\u6D41\u7A0B\u4E2D\u53BB\u7684\uFF0C\u56E0\u6B64\u9700\u8981\u5C06\u81EA\u5B9A\u4E49\u63D2\u4EF6\u4F18\u5148\u6CE8\u518C\u3002"})]})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,i.jsx)(n,(0,d._)((0,r._)({},e),{children:(0,i.jsx)(t,(0,r._)({},e))})):t(e)}var c=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["zh%2Fcomponents%2Fregister-esbuild-plugin.mdx"]={toc:[],title:""}},79655:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return p}});var r=s("15169"),d=s("43932"),i=s("9880"),l=s("23169"),t=s("89884"),o=s("7249"),c=s("99193"),a=s("57540");function h(e){var n=Object.assign({h1:"h1",a:"a",h2:"h2",h3:"h3",p:"p",code:"code",pre:"pre",strong:"strong",ul:"ul",li:"li",ol:"ol",h4:"h4",img:"img"},(0,l.useMDXComponents)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"\u6784\u5EFA\u76F8\u5173\u95EE\u9898",children:["\u6784\u5EFA\u76F8\u5173\u95EE\u9898",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6784\u5EFA\u76F8\u5173\u95EE\u9898",children:"#"})]}),"\n",(0,i.jsxs)(n.h2,{id:"\u4EA7\u7269\u95EE\u9898",children:["\u4EA7\u7269\u95EE\u9898",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4EA7\u7269\u95EE\u9898",children:"#"})]}),"\n","\n",(0,i.jsx)(t.default,{}),"\n",(0,i.jsxs)(n.h3,{id:"class-fields-\u7684\u521D\u59CB\u5316\u5904\u7406",children:["Class Fields \u7684\u521D\u59CB\u5316\u5904\u7406",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#class-fields-\u7684\u521D\u59CB\u5316\u5904\u7406",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["TypeSript \u63D0\u4F9B\u4E86 ",(0,i.jsx)(n.code,{children:"useDefineForClassFields"})," \u914D\u7F6E\u7528\u4E8E\u63A7\u5236\u5BF9\u4E8E ",(0,i.jsx)(n.code,{children:"public class fields"})," \u7684\u8F6C\u6362\u5904\u7406\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679C\u6709\u4E00\u6BB5\u4EE3\u7801\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"class C {\n  foo = 100;\n  bar: string;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5F53 ",(0,i.jsx)(n.code,{children:"useDefineForClassFields"})," \u4E3A ",(0,i.jsx)(n.code,{children:"false"})," \u7684\u65F6\u5019\uFF0C\u5219\u7F16\u8BD1\u540E\u7684\u4EE3\u7801\u4F1A\u53D8\u4E3A\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"class C {\n  constructor() {\n    this.foo = 100;\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5F53 ",(0,i.jsx)(n.code,{children:"useDefineForClassFields"})," \u4E3A ",(0,i.jsx)(n.code,{children:"true"})," \u7684\u65F6\u5019\uFF0C\u5219\u7F16\u8BD1\u540E\u7684\u4EE3\u7801\u4F1A\u53D8\u4E3A\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"class C {\n  constructor() {\n    Object.defineProperty(this, 'foo', {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 100,\n    });\n    Object.defineProperty(this, 'bar', {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0,\n    });\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u540C\u65F6\u8BE5\u914D\u7F6E\u7684\u9ED8\u8BA4\u503C\u4F1A\u6839\u636E tsconfig.json \u7684 ",(0,i.jsx)(n.a,{href:"https://www.typescriptlang.org/tsconfig#target",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(n.code,{children:"target"})})," \u914D\u7F6E\u800C\u53D8\u5316\uFF1A",(0,i.jsxs)(n.strong,{children:["\u5F53 ",(0,i.jsx)(n.code,{children:"target"})," \u662F ES2022 \u6216\u8005\u66F4\u9AD8\u7684\u65F6\u5019\uFF0C\u5219 ",(0,i.jsx)(n.code,{children:"useDefineForClassFields"})," \u9ED8\u8BA4\u914D\u7F6E\u4E3A ",(0,i.jsx)(n.code,{children:"true"}),"\uFF0C\u5426\u5219\u5C31\u662F\u9ED8\u8BA4\u4E3A ",(0,i.jsx)(n.code,{children:"false"})]}),"\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5173\u4E8E TypeScript \u8FD9\u4E2A\u914D\u7F6E\u7684\u66F4\u591A\u4FE1\u606F\uFF0C\u53EF\u4EE5\u53C2\u8003\u4E0B\u9762\u7684\u94FE\u63A5\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#the-usedefineforclassfields-flag-and-the-declare-property-modifier",target:"_blank",rel:"noopener noreferrer",children:"The useDefineForClassFields Flag and The declare Property Modifier"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Modern.js Module \u76EE\u524D\u4F1A\u6839\u636E\u4E0B\u9762\u7684\u903B\u8F91\u8FDB\u884C\u5904\u7406\uFF1A"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u9996\u5148\u6839\u636E\u5F53\u524D\u9879\u76EE\u7684 tsconfig.json \u7684 ",(0,i.jsx)(n.code,{children:"useDefineForClassFields"})," \u914D\u7F6E\u786E\u5B9A\u5728 Modern.js Module \u5185\u90E8\u5982\u4F55\u5904\u7406\u3002\u76EE\u524D\u53EA\u4F1A\u8BFB\u53D6\u5F53\u524D\u9879\u76EE\u8DEF\u5F84\u4E0B\u7684 tsconfig.json \u6587\u4EF6\u7684\u5185\u5BB9\uFF0C\u6682\u65F6\u4E0D\u652F\u6301\u6839\u636E ",(0,i.jsx)(n.a,{href:"https://www.typescriptlang.org/tsconfig#extends",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(n.code,{children:"extends"})})," \u914D\u7F6E\u6765\u83B7\u53D6\u6700\u7EC8\u7684 tsconfig \u914D\u7F6E\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5982\u679C\u6CA1\u6709\u68C0\u6D4B tsconfig.json \u7684 ",(0,i.jsx)(n.code,{children:"useDefineForClassFields"})," \u914D\u7F6E\uFF0C\u5219\u4F1A\u6839\u636E tsconfig.json \u7684 ",(0,i.jsx)(n.code,{children:"target"})," \u914D\u7F6E\u6765\u786E\u5B9A\u9ED8\u8BA4\u503C\u3002\u5982\u679C ",(0,i.jsx)(n.code,{children:"target"})," \u5927\u4E8E ",(0,i.jsx)(n.code,{children:"ES2022"}),"\uFF08\u5305\u542B ",(0,i.jsx)(n.code,{children:"EsNext"}),"\uFF09\uFF0C\u5219",(0,i.jsx)(n.code,{children:"useDefineForClassFields"}),"\u9ED8\u8BA4\u4E3A ",(0,i.jsx)(n.code,{children:"true"}),"\uFF0C\u5426\u5219\u4E3A ",(0,i.jsx)(n.code,{children:"false"}),"\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5982\u679C\u6CA1\u6709\u68C0\u6D4B\u5230 tsconfig.json \u7684 ",(0,i.jsx)(n.code,{children:"target"}),"\uFF0C\u5219\u6309\u7167 ",(0,i.jsx)(n.code,{children:"useDefineForClassFields"}),"\u7684\u503C \u4E3A ",(0,i.jsx)(n.code,{children:"true"})," \u8FDB\u884C\u5904\u7406\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"babel-plugin-lodash-\u5C06\u5F15\u5165\u7684-lodash-\u5904\u7406\u6210-undefined",children:["babel-plugin-lodash \u5C06\u5F15\u5165\u7684 lodash \u5904\u7406\u6210 ",(0,i.jsx)(n.code,{children:"undefined"}),(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#babel-plugin-lodash-\u5C06\u5F15\u5165\u7684-lodash-\u5904\u7406\u6210-undefined",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"\u5F53\u4F7F\u7528\u7C7B\u4F3C\u4E0B\u9762\u7684\u65B9\u5F0F\u7684\u65F6\u5019\uFF0C\u4F1A\u51FA\u73B0\u8FD9\u4E2A\u95EE\u9898\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import * as Lodash from 'lodash';\n\nexport const libs = {\n  _: Lodash,\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u76EE\u524D\u5728 ",(0,i.jsx)(n.code,{children:"babel-plugin-lodash"})," Github \u4E0A\u7684\u76F8\u5173 Issue\uFF1A"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/lodash/babel-plugin-lodash/issues/235",target:"_blank",rel:"noopener noreferrer",children:"#235"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8FD9\u4E2A\u95EE\u9898\u7684\u89E3\u51B3\u529E\u6CD5\u662F\u79FB\u9664 ",(0,i.jsx)(n.code,{children:"babel-plugin-lodash"}),"\uFF0C\u56E0\u4E3A\u6B64\u65F6\u4E0D\u9700\u8981\u8BE5\u63D2\u4EF6\u8FDB\u884C\u6309\u9700\u5F15\u7528\uFF0C\u4F7F\u7528\u8BE5\u63D2\u4EF6\u4F1A\u4EA7\u751F\u526F\u4F5C\u7528\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u7C7B\u4F3C\u7684\u60C5\u51B5\u5728 ",(0,i.jsx)(n.code,{children:"babel-plugin-import"})," \u4E0A\u4E5F\u53EF\u80FD\u4F1A\u51FA\u73B0\u3002\u6BD4\u5982\u6709\u7C7B\u4F3C\u5982\u4E0B\u7684\u4EE3\u7801\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import * as Comps from 'components';\n\nexport const libs = {\n  comps: Comps,\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6B64\u65F6 ",(0,i.jsx)(n.code,{children:"babel-plugin-import"})," \u4E5F\u53EF\u80FD\u4F1A\u5BFC\u81F4 ",(0,i.jsx)(n.code,{children:"Comps"})," \u53D8\u4E3A ",(0,i.jsx)(n.code,{children:"undefined"}),"\u3002\u56E0\u6B64\u4E5F\u9700\u8981\u79FB\u9664\u5BF9\u5E94\u7684 ",(0,i.jsx)(n.code,{children:"babel-plugin-import"}),"\u3002"]}),"\n",(0,i.jsxs)(n.h2,{id:"\u5F02\u5E38\u7C7B\u95EE\u9898",children:["\u5F02\u5E38\u7C7B\u95EE\u9898",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5F02\u5E38\u7C7B\u95EE\u9898",children:"#"})]}),"\n","\n",(0,i.jsx)(o.default,{}),"\n",(0,i.jsxs)(n.h3,{id:"dynamic-require-of-react-is-not-supported",children:['Dynamic require of "react" is not supported',(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dynamic-require-of-react-is-not-supported",children:"#"})]}),"\n",(0,i.jsxs)(n.h4,{id:"\u95EE\u9898\u63CF\u8FF0",children:["\u95EE\u9898\u63CF\u8FF0",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u95EE\u9898\u63CF\u8FF0",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"\u5F53\u6784\u5EFA\u7684\u4EA7\u7269\u914D\u7F6E\u4E2D\u4EA7\u7269\u683C\u5F0F\u4E3A ES modules \u7684\u65F6\u5019\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"export default defineConfig({\n  buildConfig: {\n    format: 'esm',\n  },\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679C\u5BFC\u5165\u4E86\u7684\u7B2C\u4E09\u65B9 npm \u5305\u7684 cjs \u4EA7\u7269\uFF0C\u90A3\u4E48\u751F\u6210\u7684\u4EA7\u7269\u53EF\u80FD\u4F1A\u5728 webpack \u4E0B\u6709\u53EF\u80FD\u65E0\u6CD5\u6B63\u5E38\u8FD0\u884C\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/shylnyhaeh7uldvivhn/1280X1280.png",alt:""})}),"\n",(0,i.jsxs)(n.h4,{id:"\u89E3\u51B3\u529E\u6CD5",children:["\u89E3\u51B3\u529E\u6CD5",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u89E3\u51B3\u529E\u6CD5",children:"#"})]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u9996\u5148\u9700\u8981\u627E\u5230\u662F\u54EA\u4E2A\u7B2C\u4E09\u65B9\u5305\u5F15\u8D77\u7684\u95EE\u9898"}),"\u3002\u4F8B\u5982\u62A5\u9519\u4FE1\u606F\u4E2D\u6307\u5411\u4E86 ",(0,i.jsx)(n.code,{children:"react"})," \u8FD9\u4E2A\u5305\uFF0C\u90A3\u4E48\u5C31\u8981\u5BFB\u627E\u5728\u54EA\u4E2A\u7B2C\u4E09\u65B9\u5305\u91CC\u5B58\u5728 ",(0,i.jsx)(n.code,{children:"require('react')"})," \u8FD9\u6837\u7684\u4EE3\u7801\u3002\u6BD4\u5982 ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/react-draggable",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(n.code,{children:"react-draggable"})})," \uFF0C\u8FD9\u4E2A\u5305\u4EC5\u5305\u542B ",(0,i.jsx)(n.code,{children:"cjs"})," \u4EA7\u7269\uFF0C\u90A3\u4E48\u95EE\u9898\u5B9A\u4F4D\u5230 ",(0,i.jsx)(n.code,{children:"react-draggable"})," \u8FD9\u4E2A\u5305\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u7136\u540E\u6211\u4EEC\u9700\u8981\u5C06\u8FD9\u4E2A\u5305\u901A\u8FC7\u4E0B\u9762\u7684\u914D\u7F6E\u8FDB\u884C\u6392\u9664\uFF0C\u5373",(0,i.jsx)(n.strong,{children:"\u4E0D\u6253\u5305\u5B58\u5728\u95EE\u9898\u7684\u7B2C\u4E09\u65B9\u5305"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"export default defineConfig({\n  buildConfig: {\n    externals: ['react-draggable'],\n  },\n});\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"\u53C2\u8003\u94FE\u63A5",children:["\u53C2\u8003\u94FE\u63A5",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u8003\u94FE\u63A5",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://stackoverflow.com/questions/68423950/when-using-esbuild-with-external-react-i-get-dynamic-require-of-react-is-not-s",target:"_blank",rel:"noopener noreferrer",children:'When using esbuild with external react I get Dynamic require of "react" is not supported'})}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"\u7F16\u8BD1\u8FC7\u7A0B\u4E2D\u56E0\u4E3A\u67D0\u4E2A\u7EC4\u4EF6\u5E93\u7684-less-\u6587\u4EF6\u62A5\u9519operation-on-an-invalid-type",children:["\u7F16\u8BD1\u8FC7\u7A0B\u4E2D\uFF0C\u56E0\u4E3A\u67D0\u4E2A\u7EC4\u4EF6\u5E93\u7684 less \u6587\u4EF6\u62A5\u9519\uFF1A",(0,i.jsx)(n.code,{children:"'Operation on an invalid type'"}),(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u7F16\u8BD1\u8FC7\u7A0B\u4E2D\u56E0\u4E3A\u67D0\u4E2A\u7EC4\u4EF6\u5E93\u7684-less-\u6587\u4EF6\u62A5\u9519operation-on-an-invalid-type",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u53EF\u80FD\u662F\u56E0\u4E3A\u8BE5\u7EC4\u4EF6\u5E93\u4F9D\u8D56\u7684 Less \u7248\u672C\u662F v3\uFF0C\u800C Modern.js Module \u9ED8\u8BA4\u662F v4\u3002v3 \u4E0E v4 \u5728 ",(0,i.jsx)(n.code,{children:"math"})," \u914D\u7F6E\u4E0A\u5B58\u5728\u6709 Break Change\uFF0C\u53EF\u4EE5\u67E5\u770B\u8FD9\u4E2A",(0,i.jsx)(n.a,{href:"https://stackoverflow.com/questions/73298187/less-error-operation-on-an-invalid-type-in-antd-dependency",target:"_blank",rel:"noopener noreferrer",children:"\u94FE\u63A5"})," \u4E86\u89E3\u8BE6\u60C5\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u56E0\u6B64\uFF0C\u5982\u679C\u662F\u5728\u6E90\u7801\u4E2D\u4F7F\u7528\u4E86\u7C7B\u4F3C\u8FD9\u6837\u7684\u7EC4\u4EF6\u5E93\uFF1A"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u6784\u5EFA\u914D\u7F6E\u4E2D\u4F7F\u7528\u4E86 ",(0,i.jsx)(n.code,{children:"buildPreset"})," \u7684\u60C5\u51B5\u4E0B\uFF0C\u6309\u7167\u4E0B\u9762\u8FDB\u884C\u4FEE\u6539\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"module.exports = {\n  buildPreset({ extendPreset }) {\n    return extendPreset('your-build-preset', {\n      style: {\n        less: {\n          lessOptions: {\n            math: 'always',\n          },\n        },\n      },\n    });\n  },\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6216\u8005\u4F7F\u7528\u4E86\u81EA\u5B9A\u4E49\u7684 ",(0,i.jsx)(n.code,{children:"buildConfig"})," \u7684\u60C5\u51B5\u4E0B\uFF0C\u6309\u7167\u4E0B\u9762\u8FDB\u884C\u4FEE\u6539\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"module.exports = {\n  buildConfig: {\n    style: {\n      less: {\n        lessOptions: {\n          math: 'always',\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679C\u662F\u5728 Storybook \u4E2D\u4F7F\u7528\u4E86\u7C7B\u4F3C\u8FD9\u6837\u7684\u7EC4\u4EF6\uFF0C\u5219\u9700\u8981\u4FEE\u6539 Storybook \u7684\u8C03\u8BD5\u914D\u7F6E\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"module.exports = {\n  dev: {\n    storybook: {\n      webpackChain(chain, { CHAIN_ID }) {\n        chain.module\n          .rule(CHAIN_ID.RULE.LESS)\n          .use(CHAIN_ID.USE.LESS)\n          .tap(options => {\n            options.lessOptions = {\n              ...options.lessOptions,\n              math: 'always',\n            };\n            return options;\n          });\n      },\n    },\n  },\n};\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"bundle-dts-failed",children:["Bundle DTS failed",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#bundle-dts-failed",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u6B63\u5E38\u60C5\u51B5\u4E0B\uFF0C\u4F7F\u7528 ",(0,i.jsx)(n.code,{children:"tsc"})," Modern.js Module \u4E0D\u4EC5\u652F\u6301\u8F93\u51FA\u677E\u6563\u7684\u7C7B\u578B\u6587\u4EF6\u4EA7\u7269\uFF0C\u540C\u65F6\u4E5F\u652F\u6301\u6253\u5305\u7C7B\u578B\u6587\u4EF6\uFF0C\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u677E\u6563\u7684\u7C7B\u578B\u6587\u4EF6\u4EE5\u53CA\u7B2C\u4E09\u65B9\u4F9D\u8D56\u7684\u7C7B\u578B\u6587\u4EF6\u6253\u5305\u6210\u4E00\u4E2A\u6587\u4EF6\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u4E0D\u8FC7\uFF0C\u6253\u5305\u7B2C\u4E09\u65B9\u4F9D\u8D56\u7684\u7C7B\u578B\u6587\u4EF6\u662F\u5B58\u5728\u98CE\u9669\u7684\uFF0C",(0,i.jsx)(n.strong,{children:"\u56E0\u4E3A\u5B58\u5728\u7B2C\u4E09\u65B9\u4F9D\u8D56\u7684\u7C7B\u578B\u6587\u4EF6\u65E0\u6CD5\u6253\u5305\u7684\u60C5\u51B5"}),"\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u56E0\u6B64\u5F53\u9047\u5230 Modern.js Module \u6784\u5EFA\u8FC7\u7A0B\u4E2D\u51FA\u73B0 ",(0,i.jsx)(n.code,{children:"Bundle DTS failed"})," \u7684\u9519\u8BEF\u4FE1\u606F\u6807\u9898\u7684\u65F6\u5019\uFF0C\u53EF\u4EE5\u89C2\u5BDF\u62A5\u9519\u4FE1\u606F\u662F\u6765\u81EA\u67D0\u4E2A\u7B2C\u4E09\u65B9\u4F9D\u8D56\u3002\u5C1D\u8BD5\u8BBE\u7F6E ",(0,i.jsx)(n.a,{href:"/api/config/build-config#dtsrespectexternal",children:(0,i.jsx)(n.code,{children:"dts.respectExternal"})})," \u4E3A ",(0,i.jsx)(n.code,{children:"false"})," \u6765\u5173\u95ED\u6253\u5305\u7B2C\u4E09\u65B9\u4F9D\u8D56\u7684\u7C7B\u578B\u6587\u4EF6\u7684\u884C\u4E3A\u3002"]}),"\n",(0,i.jsxs)(n.h3,{id:"defineconfig-\u51FD\u6570\u7C7B\u578B\u62A5\u9519\u5982\u679C\u6CA1\u6709\u5F15\u7528-\u5219\u65E0\u6CD5\u547D\u540D-default-\u7684\u63A8\u65AD\u7C7B\u578B",children:[(0,i.jsx)(n.code,{children:"defineConfig"})," \u51FD\u6570\u7C7B\u578B\u62A5\u9519\uFF1A",(0,i.jsx)(n.code,{children:'\u5982\u679C\u6CA1\u6709\u5F15\u7528 "..."\uFF0C\u5219\u65E0\u6CD5\u547D\u540D "default" \u7684\u63A8\u65AD\u7C7B\u578B'}),(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#defineconfig-\u51FD\u6570\u7C7B\u578B\u62A5\u9519\u5982\u679C\u6CA1\u6709\u5F15\u7528-\u5219\u65E0\u6CD5\u547D\u540D-default-\u7684\u63A8\u65AD\u7C7B\u578B",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u68C0\u67E5\u9879\u76EE\u7684 tsconfig.json \u6587\u4EF6\u4E2D\u662F\u5426\u5B58\u5728 ",(0,i.jsx)(n.a,{href:"https://www.typescriptlang.org/tsconfig#include",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(n.code,{children:"include"})})," \u914D\u7F6E\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u5219\u5C1D\u8BD5\u589E\u52A0\u4E0B\u9762\u7684\u5185\u5BB9\uFF1A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "include": ["src"]\n}\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"\u5176\u4ED6",children:["\u5176\u4ED6",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5176\u4ED6",children:"#"})]}),"\n","\n",(0,i.jsx)(c.default,{}),"\n",(0,i.jsxs)(n.h3,{id:"\u589E\u52A0\u989D\u5916\u7684\u7F16\u8BD1\u80FD\u529B",children:["\u589E\u52A0\u989D\u5916\u7684\u7F16\u8BD1\u80FD\u529B",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u589E\u52A0\u989D\u5916\u7684\u7F16\u8BD1\u80FD\u529B",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"Modern.js Module \u57FA\u4E8E esbuild \u5B9E\u73B0\uFF0C\u56E0\u6B64\u5982\u679C\u6709\u7279\u6B8A\u9700\u6C42\u6216\u8005\u60F3\u8981\u589E\u52A0\u989D\u5916\u7684\u7F16\u8BD1\u80FD\u529B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5B9E\u73B0 esbuild \u63D2\u4EF6\u6765\u89E3\u51B3\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["Modern.js Module \u63D0\u4F9B\u4E86 ",(0,i.jsx)(n.a,{href:"/api/config/build-config#esbuildoptions",children:(0,i.jsx)(n.code,{children:"esbuildOptions"})})," \u914D\u7F6E\u5141\u8BB8\u4FEE\u6539 Modern.js Module \u5185\u90E8\u7684 esbuild \u914D\u7F6E\uFF0C\u56E0\u6B64\u53EF\u4EE5\u901A\u8FC7\u8BE5\u914D\u7F6E\u6765\u589E\u52A0\u81EA\u5B9A\u4E49\u7684 esbuild \u63D2\u4EF6\uFF1A"]}),"\n","\n",(0,i.jsx)(a.default,{}),"\n",(0,i.jsxs)(n.h3,{id:"\u652F\u6301\u751F\u6210-css-modules-\u7684-typescript-\u58F0\u660E\u6587\u4EF6",children:["\u652F\u6301\u751F\u6210 CSS Modules \u7684 TypeScript \u58F0\u660E\u6587\u4EF6",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u652F\u6301\u751F\u6210-css-modules-\u7684-typescript-\u58F0\u660E\u6587\u4EF6",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u65B9\u6848\u4E00\uFF1A",(0,i.jsx)(n.a,{href:"https://github.com/Quramy/typed-css-modules",target:"_blank",rel:"noopener noreferrer",children:"typed-css-modules"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u65B9\u6848\u4E8C\uFF1A",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@guanghechen/postcss-modules-dts",target:"_blank",rel:"noopener noreferrer",children:"postcss-modules-dts"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:'title="modern.config.ts"',children:"import { defineConfig } from '@modern-js/module-tools';\n\nexport default defineConfig(async () => {\n  const { dts } =  await import(\"@guanghechen/postcss-modules-dts\");\n  return {\n    buildConfig: {\n      style: {\n        modules: { ...dts },\n      },\n    },\n    // \u4F60\u7684\u81EA\u5B9A\u4E49\u914D\u7F6E\n  }\n});\n"})})]})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,i.jsx)(n,(0,d._)((0,r._)({},e),{children:(0,i.jsx)(h,(0,r._)({},e))})):h(e)}var p=u;u.__RSPRESS_PAGE_META={},u.__RSPRESS_PAGE_META["zh%2Fguide%2Ffaq%2Fbuild.mdx"]={toc:[{text:"\u4EA7\u7269\u95EE\u9898",id:"\u4EA7\u7269\u95EE\u9898",depth:2},{text:"Class Fields \u7684\u521D\u59CB\u5316\u5904\u7406",id:"class-fields-\u7684\u521D\u59CB\u5316\u5904\u7406",depth:3},{text:"babel-plugin-lodash \u5C06\u5F15\u5165\u7684 lodash \u5904\u7406\u6210 undefined",id:"babel-plugin-lodash-\u5C06\u5F15\u5165\u7684-lodash-\u5904\u7406\u6210-undefined",depth:3},{text:"\u5F02\u5E38\u7C7B\u95EE\u9898",id:"\u5F02\u5E38\u7C7B\u95EE\u9898",depth:2},{text:'Dynamic require of \\"react\\" is not supported',id:"dynamic-require-of-react-is-not-supported",depth:3},{text:"\u95EE\u9898\u63CF\u8FF0",id:"\u95EE\u9898\u63CF\u8FF0",depth:4},{text:"\u89E3\u51B3\u529E\u6CD5",id:"\u89E3\u51B3\u529E\u6CD5",depth:4},{text:"\u53C2\u8003\u94FE\u63A5",id:"\u53C2\u8003\u94FE\u63A5",depth:4},{text:"\u7F16\u8BD1\u8FC7\u7A0B\u4E2D\uFF0C\u56E0\u4E3A\u67D0\u4E2A\u7EC4\u4EF6\u5E93\u7684 less \u6587\u4EF6\u62A5\u9519\uFF1A\\'Operation on an invalid type\\'",id:"\u7F16\u8BD1\u8FC7\u7A0B\u4E2D\u56E0\u4E3A\u67D0\u4E2A\u7EC4\u4EF6\u5E93\u7684-less-\u6587\u4EF6\u62A5\u9519operation-on-an-invalid-type",depth:3},{text:"Bundle DTS failed",id:"bundle-dts-failed",depth:3},{text:'defineConfig \u51FD\u6570\u7C7B\u578B\u62A5\u9519\uFF1A\u5982\u679C\u6CA1\u6709\u5F15\u7528 \\"...\\"\uFF0C\u5219\u65E0\u6CD5\u547D\u540D \\"default\\" \u7684\u63A8\u65AD\u7C7B\u578B',id:"defineconfig-\u51FD\u6570\u7C7B\u578B\u62A5\u9519\u5982\u679C\u6CA1\u6709\u5F15\u7528-\u5219\u65E0\u6CD5\u547D\u540D-default-\u7684\u63A8\u65AD\u7C7B\u578B",depth:3},{text:"\u5176\u4ED6",id:"\u5176\u4ED6",depth:2},{text:"\u589E\u52A0\u989D\u5916\u7684\u7F16\u8BD1\u80FD\u529B",id:"\u589E\u52A0\u989D\u5916\u7684\u7F16\u8BD1\u80FD\u529B",depth:3},{text:"\u652F\u6301\u751F\u6210 CSS Modules \u7684 TypeScript \u58F0\u660E\u6587\u4EF6",id:"\u652F\u6301\u751F\u6210-css-modules-\u7684-typescript-\u58F0\u660E\u6587\u4EF6",depth:3}],title:"\u6784\u5EFA\u76F8\u5173\u95EE\u9898"}}}]);