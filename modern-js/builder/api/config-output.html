<!doctype html><html  lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title data-rh="true">Output Config - Modern.js Builder</title><meta data-rh="true" name="description" content="基于 Rspack 的 Web 构建工具"/>
<script id="check-dark-light">
;(() => {
  const saved = localStorage.getItem('rspress-theme-appearance')
  const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
  if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
    document.documentElement.classList.add('dark')
  }
})()
</script>
<link rel="icon" href="https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/logo-1x-0104.png"><script defer="defer">!function(){var s,t,a,c,n,e,i,j,r,l,o,f,d,y,b={},u={};function p(s){var t=u[s];if(void 0!==t)return t.exports;var a=u[s]={id:s,loaded:!1,exports:{}};return b[s](a,a.exports,p),a.loaded=!0,a.exports}p.m=b,p.es=function(s,t){return Object.keys(s).forEach((function(a){"default"!==a&&!Object.prototype.hasOwnProperty.call(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:function(){return s[a]}})})),s},s={10919:["9533"],10966:["3352"],11318:["1304"],12418:["7994"],12432:["3586"],12590:["9187"],14986:["lib-lodash","lib-polyfill","1521","337"],1503:["3880"],15883:["6345"],17293:["5850"],18264:["6818"],20111:["4867"],20288:["7076"],21363:["885"],21438:["6478"],21470:["8825"],22187:["lib-lodash","lib-polyfill","1521","9691"],2316:["8504"],23254:["4522"],24342:["5116"],2482:["lib-lodash","lib-polyfill","1521","5306"],25063:["5972"],25167:["7649"],26112:["8935"],26232:["283"],26282:["6598"],29516:["5172"],30062:["2676"],30661:["9741"],30776:["lib-lodash","lib-polyfill","1521","4072"],31125:["8938"],32354:["1230"],33217:["5698"],35546:["lib-lodash","lib-polyfill","1521","646"],35867:["1351"],36267:["9573"],36509:["6772"],37254:["6004","2105"],37522:["lib-lodash","lib-polyfill","1521","1609"],38694:["6291"],38809:["5293"],39521:["4925"],39660:["1928"],3980:["4726"],40282:["8019"],41915:["567"],41949:["8101"],41988:["4309"],42385:["7643"],43249:["2637"],43356:["1835"],44864:["3186"],45842:["8921","8110"],46220:["8577"],46278:["5924"],46869:["8995"],4687:["5104"],486:["lib-lodash","lib-polyfill","1521","4153"],49192:["422"],49208:["5229"],49383:["2137"],49529:["lib-lodash","lib-polyfill","1521","2091"],4995:["5358"],51266:["3854"],53113:["9195"],53200:["lib-lodash","lib-polyfill","1521","6511"],54386:["lib-lodash","lib-polyfill","1521","5025"],54475:["lib-lodash","lib-polyfill","1521","7969"],57365:["1746"],58373:["990"],60701:["7189"],60735:["4040"],63027:["2466"],63058:["8815"],63069:["4041"],63110:["8966"],63111:["5654"],63209:["6589"],64044:["6372"],64960:["7897"],6550:["8927"],66674:["1309"],67845:["lib-lodash","lib-polyfill","1521","8798"],67904:["lib-lodash","lib-polyfill","1521","3834"],68112:["7838"],68114:["lib-lodash","lib-polyfill","1521","1333"],72168:["5242"],72203:["3507"],72445:["9639"],72541:["4533"],74258:["8587"],77345:["8921","959"],77441:["9134"],77610:["9116"],78396:["2856"],78444:["2011"],79034:["lib-lodash","lib-polyfill","1521","3820"],79269:["4249"],79790:["9451"],80452:["lib-lodash","lib-polyfill","1521","9311"],80464:["232"],80942:["7287"],81709:["2688"],83242:["4742"],85569:["503"],85711:["3661"],8595:["7942"],87706:["7585"],89514:["9333"],90275:["5597"],90615:["lib-lodash","lib-polyfill","1521","5219"],91421:["6004","5070"],91777:["4246"],92450:["6551"],92637:["5955"],93653:["2744"],94423:["9920"],94506:["117"],95182:["1933"],96529:["5843"],97536:["lib-lodash","lib-polyfill","1521","281"],97990:["1422"],99042:["4894"],99532:["7360"]},p.el=function(t){var a=s[t];return void 0===a?Promise.resolve():a.length>1?Promise.all(a.map(p.e)):p.e(a[0])},p.f={},p.e=function(s){return Promise.all(Object.keys(p.f).reduce((function(t,a){return p.f[a](s,t),t}),[]))},p.p="/builder/",p.u=function(s){return{117:"static/js/async/117.64d57bab.js",1230:"static/js/async/1230.0168d13c.js",1304:"static/js/async/1304.9b3f59c0.js",1309:"static/js/async/1309.06d7e3ed.js",1333:"static/js/async/1333.bacf341c.js",1351:"static/js/async/1351.28636e67.js",1422:"static/js/async/1422.6a7be158.js",1609:"static/js/async/1609.79fe5288.js",1746:"static/js/async/1746.cd10fb3f.js",1835:"static/js/async/1835.d276f63c.js",1928:"static/js/async/1928.aa7792ff.js",1933:"static/js/async/1933.1450d944.js",2011:"static/js/async/2011.7839fa5c.js",2091:"static/js/async/2091.19821b2c.js",2105:"static/js/async/2105.a7a54dd9.js",2137:"static/js/async/2137.c8c507fc.js",232:"static/js/async/232.73f7c0ee.js",2466:"static/js/async/2466.5cb35f19.js",2637:"static/js/async/2637.514bce0a.js",2676:"static/js/async/2676.5a0bfaa2.js",2688:"static/js/async/2688.2eae2983.js",2744:"static/js/async/2744.86df2f40.js",281:"static/js/async/281.4e910e35.js",283:"static/js/async/283.6243d6bd.js",2856:"static/js/async/2856.239c7c07.js",3186:"static/js/async/3186.38c33fd4.js",3352:"static/js/async/3352.31ab370d.js",337:"static/js/async/337.24bdcd6a.js",3507:"static/js/async/3507.6d4b0bf1.js",3586:"static/js/async/3586.ddb21b9a.js",3661:"static/js/async/3661.6983709c.js",3820:"static/js/async/3820.24cf6541.js",3834:"static/js/async/3834.c4a629a9.js",3854:"static/js/async/3854.a91d9587.js",3880:"static/js/async/3880.59725cf5.js",4040:"static/js/async/4040.fa44c73e.js",4041:"static/js/async/4041.13ac067c.js",4072:"static/js/async/4072.120d152e.js",4153:"static/js/async/4153.2ef89d7b.js",422:"static/js/async/422.98891117.js",4246:"static/js/async/4246.2aae3291.js",4249:"static/js/async/4249.53994ec2.js",4309:"static/js/async/4309.fd466366.js",4522:"static/js/async/4522.d412b6d1.js",4533:"static/js/async/4533.c03edec6.js",4726:"static/js/async/4726.72a103ce.js",4742:"static/js/async/4742.238e0074.js",4867:"static/js/async/4867.c4b8dffd.js",4894:"static/js/async/4894.94f99e88.js",4925:"static/js/async/4925.0d0df33c.js",5025:"static/js/async/5025.d77090c1.js",503:"static/js/async/503.6ff0c069.js",5070:"static/js/async/5070.2e693ac2.js",5104:"static/js/async/5104.30350901.js",5116:"static/js/async/5116.5ec9c3e9.js",5172:"static/js/async/5172.5553f238.js",5219:"static/js/async/5219.b4182437.js",5229:"static/js/async/5229.81cfb6b8.js",5242:"static/js/async/5242.fa33e16e.js",5293:"static/js/async/5293.227ae035.js",5306:"static/js/async/5306.037753c2.js",5358:"static/js/async/5358.b4a0a01b.js",5597:"static/js/async/5597.e4756dbf.js",5654:"static/js/async/5654.9705c6dc.js",567:"static/js/async/567.07c6d2ad.js",5698:"static/js/async/5698.8c4f722f.js",5843:"static/js/async/5843.435d4417.js",5850:"static/js/async/5850.0369691f.js",5924:"static/js/async/5924.10844f3c.js",5955:"static/js/async/5955.f172abd2.js",5972:"static/js/async/5972.d94be69d.js",6004:"static/js/async/6004.d3f8ac81.js",6291:"static/js/async/6291.531e5498.js",6345:"static/js/async/6345.41af4310.js",6372:"static/js/async/6372.eea7abca.js",646:"static/js/async/646.e15f85ed.js",6478:"static/js/async/6478.4db5d846.js",6511:"static/js/async/6511.cd97b80d.js",6551:"static/js/async/6551.f2dbe610.js",6589:"static/js/async/6589.1efba53d.js",6598:"static/js/async/6598.ec30fbfd.js",6772:"static/js/async/6772.c3157528.js",6818:"static/js/async/6818.4249be93.js",7076:"static/js/async/7076.230c9548.js",7189:"static/js/async/7189.f4be08a5.js",7287:"static/js/async/7287.c7b04ecc.js",7360:"static/js/async/7360.a6cdf6ab.js",7585:"static/js/async/7585.2a60dd0c.js",7643:"static/js/async/7643.4d453bfd.js",7649:"static/js/async/7649.52d1523b.js",7838:"static/js/async/7838.47c484fd.js",7897:"static/js/async/7897.3b0ac629.js",7942:"static/js/async/7942.6221d441.js",7969:"static/js/async/7969.72bee5a8.js",7994:"static/js/async/7994.79b35fe0.js",8019:"static/js/async/8019.f821f3a4.js",8101:"static/js/async/8101.b9c31326.js",8110:"static/js/async/8110.3941f2de.js",8504:"static/js/async/8504.80a2972a.js",8577:"static/js/async/8577.1e10538e.js",8587:"static/js/async/8587.a3358bf3.js",8798:"static/js/async/8798.50c8367b.js",8815:"static/js/async/8815.000f38da.js",8825:"static/js/async/8825.361bd723.js",885:"static/js/async/885.e9ba99eb.js",8921:"static/js/async/8921.65da0719.js",8927:"static/js/async/8927.7dff6b4e.js",8935:"static/js/async/8935.a9aace2c.js",8938:"static/js/async/8938.94964a07.js",8966:"static/js/async/8966.1f73ebba.js",8995:"static/js/async/8995.00e7156b.js",9116:"static/js/async/9116.1c0f7186.js",9134:"static/js/async/9134.24685b5c.js",9187:"static/js/async/9187.bbb4bddb.js",9195:"static/js/async/9195.37ece192.js",9311:"static/js/async/9311.02a1e63a.js",9333:"static/js/async/9333.b75a8fdd.js",9451:"static/js/async/9451.1a2cf9ec.js",9533:"static/js/async/9533.637c339e.js",9573:"static/js/async/9573.b2cafba3.js",959:"static/js/async/959.b0394e29.js",9639:"static/js/async/9639.ba9cb047.js",9691:"static/js/async/9691.eb347faa.js",9741:"static/js/async/9741.e6eac7e5.js",990:"static/js/async/990.56c8f45b.js",9920:"static/js/async/9920.adcb8043.js"}[s]},p.k=function(s){return{117:"static/css/async/117.d9706519.css",281:"static/css/async/281.d9706519.css",4153:"static/css/async/4153.d9706519.css",7360:"static/css/async/7360.d9706519.css"}[s]},t={},p.l=function(s,a,c,n){if(t[s])t[s].push(a);else{if(void 0!==c)for(var e,i,j=document.getElementsByTagName("script"),r=0;r<j.length;r++){var l=j[r];if(l.getAttribute("src")==s){e=l;break}}!e&&(i=!0,(e=document.createElement("script")).charset="utf-8",e.timeout=120,e.src=s),t[s]=[a];var o=function(a,c){e.onerror=e.onload=null,clearTimeout(f);var n=t[s];if(delete t[s],e.parentNode&&e.parentNode.removeChild(e),n&&n.forEach((function(s){return s(c)})),a)return a(c)},f=setTimeout(o.bind(null,void 0,{type:"timeout",target:e}),12e4);e.onerror=o.bind(null,e.onerror),e.onload=o.bind(null,e.onload),i&&document.head.appendChild(e)}},p.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},a=[],p.O=function(s,t,c,n){if(!t){var e=1/0;for(l=0;l<a.length;l++){t=a[l][0],c=a[l][1],n=a[l][2];for(var i=!0,j=0;j<t.length;j++)e>=n&&Object.keys(p.O).every((function(s){return p.O[s](t[j])}))?t.splice(j--,1):(i=!1,n<e&&(e=n));if(i){a.splice(l--,1);var r=c()}}return r}n=n||0;for(var l=a.length;l>0&&a[l-1][2]>n;l--)a[l]=a[l-1];a[l]=[t,c,n]},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(s){if("object"==typeof window)return window}}(),p.d=function(s,t){for(var a in t)p.o(t,a)&&!p.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:t[a]})},p.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},p.n=function(s){return s&&s.__esModule?s.default:s},n=Object.getPrototypeOf?function(s){return Object.getPrototypeOf(s)}:function(s){return s.__proto__},p.t=function(s,t){if(1&t&&(s=this(s)),8&t||"object"==typeof s&&s&&(4&t&&s.__esModule||16&t&&"function"==typeof s.then))return s;var a=Object.create(null);p.r(a);var e={};c=c||[null,n({}),n([]),n(n)];for(var i=2&t&&s;"object"==typeof i&&!~c.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((function(t){e[t]=function(){return s[t]}}));return e.default=function(){return s},p.d(a,e),a},p.nmd=function(s){return s.paths=[],!s.children&&(s.children=[]),s},e={"bundler-runtime":0,"lib-lodash":0,"lib-polyfill":0,"lib-react":0,"lib-router":0,main:0},i="webpack",j="data-webpack-loading",r=function(s,t,a,c){var n,e,r="chunk-"+s;if(!c){for(var l=document.getElementsByTagName("link"),o=0;o<l.length;o++){var f=l[o],d=f.getAttribute("href")||f.href;if(d&&!d.startsWith(p.p)&&(d=p.p+(d.startsWith("/")?d.slice(1):d)),"stylesheet"==f.rel&&(d&&d.startsWith(t)||f.getAttribute("data-webpack")==i+":"+r)){n=f;break}}if(!a)return n}!n&&(e=!0,(n=document.createElement("link")).setAttribute("data-webpack",i+":"+r),n.setAttribute(j,1),n.rel="stylesheet",n.href=t);var y=function(s,t){if(n.onerror=n.onload=null,n.removeAttribute(j),clearTimeout(b),t&&"load"!=t.type&&n.parentNode.removeChild(n),a(t),s)return s(t)};if(n.getAttribute(j)){var b=setTimeout(y.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=y.bind(null,n.onerror),n.onload=y.bind(null,n.onload)}else y(void 0,{type:"load",target:n});return c?c.parentNode.insertBefore(n,c):e&&document.head.appendChild(n),n},p.f.css=function(s,t){var a=p.o(e,s)?e[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["117","1521","281","2996","4153","7360"].indexOf(s)>-1){var c=new Promise((function(t,c){a=e[s]=[t,c]}));t.push(a[2]=c);var n=p.p+p.k(s),i=Error();r(s,n,(function(t){if(p.o(e,s)&&(0!==(a=e[s])&&(e[s]=void 0),a))if("load"!==t.type){var c=t&&t.type,n=t&&t.target&&t.target.src;i.message="Loading css chunk "+s+" failed.\n("+c+": "+n+")",i.name="ChunkLoadError",i.type=c,i.request=n,a[1](i)}else a[0]()}))}else e[s]=0},l=function(s,t){var a=t[0];s&&s(t);for(var c=0;c<a.length;c++)void 0===e[a[c]]&&(e[a[c]]=0)},(o=self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o)),f={"bundler-runtime":0},p.f.j=function(s,t){var a=p.o(f,s)?f[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["117","1230","1304","1309","1333","1351","1422","1521","1609","1746","1835","1928","1933","2011","2091","2105","2137","232","2466","2637","2676","2688","2744","281","283","2856","2996","3186","3352","337","3507","3586","3661","3820","3834","3854","3880","4040","4041","4072","4153","422","4246","4249","4309","4522","4533","4726","4742","4867","4894","4925","5025","503","5070","5104","5116","5172","5219","5229","5242","5293","5306","5358","5597","5654","567","5698","5843","5850","5924","5955","5972","6004","6291","6345","6372","646","6478","6511","6551","6589","6598","6772","6818","7076","7189","7287","7360","7585","7643","7649","7838","7897","7942","7969","7994","8019","8101","8110","8504","8577","8587","8798","8815","8825","885","8921","8927","8935","8938","8966","8995","9116","9134","9187","9195","9311","9333","9451","9533","9573","959","9639","9691","9741","990","9920","lib-lodash","lib-polyfill","lib-react","lib-router","main"].indexOf(s)>-1){var c=new Promise((function(t,c){a=f[s]=[t,c]}));t.push(a[2]=c);var n=p.p+p.u(s),e=Error();p.l(n,(function(t){if(p.o(f,s)&&(0!==(a=f[s])&&(f[s]=void 0),a)){var c=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;e.message="Loading chunk "+s+" failed.\n("+c+": "+n+")",e.name="ChunkLoadError",e.type=c,e.request=n,a[1](e)}}),"chunk-"+s,s)}else f[s]=0},p.O.j=function(s){return 0===f[s]},d=function(s,t){var a,c,n=t[0],e=t[1],i=t[2],j=0;if(n.some((function(s){return 0!==f[s]}))){for(a in e)p.o(e,a)&&(p.m[a]=e[a]);if(i)var r=i(p)}for(s&&s(t);j<n.length;j++)c=n[j],p.o(f,c)&&f[c]&&f[c][0](),f[c]=0;return p.O(r)},(y=self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).forEach(d.bind(null,0)),y.push=d.bind(null,y.push.bind(y))}()</script><script defer="defer" src="/builder/static/js/lib-lodash.1cfbf39a.js"></script><script defer="defer" src="/builder/static/js/lib-polyfill.0b169293.js"></script><script defer="defer" src="/builder/static/js/lib-react.3c70bbbb.js"></script><script defer="defer" src="/builder/static/js/lib-router.ff55a2fa.js"></script><script defer="defer" src="/builder/static/js/1521.0698c4f5.js"></script><script defer="defer" src="/builder/static/js/2996.d61a8c20.js"></script><script defer="defer" src="/builder/static/js/main.c869f99d.js"></script><link href="/builder/static/css/1521.be92e883.css" rel="stylesheet"><link href="/builder/static/css/2996.c025b643.css" rel="stylesheet"></head><body ><div id="root"><div><div class="navContainer_f6cde sticky rspress-nav px-6 "><div class="container_f6cde flex justify-between items-center h-full"><div class="undefined"><a href="/builder/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>Modern.js Builder</span></a></div><div class="undefined flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="navSearchButton_6e282"><button><svg width="18" height="24" viewBox="0 0 32 32" hight="18"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">指南</div></a><a class="link_03735  cursor-pointer" target="" href="/builder/api/index.html"><div class="singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a><a class="link_03735  cursor-pointer" target="" href="/builder/plugins/introduction.html"><div class="singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">插件</div></a></div><div class="flex-center flex-row"><div class="translation menu-item_f6cde flex text-sm font-bold items-center px-3 py-2"><div><div class="relative flex-center h-14"><button class="nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><span class="text-sm font-medium flex" style="margin-right:2px"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div class="nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:2rem;background:var(--rp-c-bg)"><div><div class="rounded-2xl my-1 flex" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><span class="text-brand">简体中文</span></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/builder/en/api/config-output.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>English</span></div></div></a></div></div></div></div></div></div></div><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg></div></div></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">指南</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/builder/api/index.html"><div class="singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/builder/plugins/introduction.html"><div class="singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">插件</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div><div class="undefined flex text-sm font-bold justify-center"><div class="mx-1.5 my-1"><div class=" navScreenMenuGroup_457e8 relative"><button class="button_457e8"><span class="buttonSpan_457e8"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" down_457e8 "><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div><div class="items_457e8"><div><div class="p-1 text-center"><span class="text-brand">简体中文</span></div></div><div><div class="py-1 font-medium"><a class="link_03735  cursor-pointer" target="" href="/builder/en/api/config-output.html"><div><div class="flex justify-center"><span>English</span></div></div></a></div></div></div></div></div></div></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div></div><button class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="rspress-sidebar-menu"><button class="flex-center"><div class="text-md mr-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span class="text-sm">Menu</span></button></div><aside class="sidebar_71eca rspress-sidebar "><div class="navTitleMask_71eca"><div class="undefined"><a href="/builder/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>Modern.js Builder</span></a></div></div><div class="mt-1 sidebarContent_71eca"><div class="rspress-scrollbar" style="max-height:calc(100vh - var(--rp-nav-height) - 8px);overflow:scroll"><nav class="pb-2"><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/index.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:14px;margin-left:0;border-radius:0 1rem 1rem 0;color:var(--rp-c-text-1);padding-left:24px;font-weight:bold">API 总览</div></a><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_71eca" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">配置</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/config-source.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Source Config</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/config-html.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Html Config</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/config-security.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Security Config</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/config-dev.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Dev Config</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/config-output.html"><div class="menuItemActive_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0;color:var(--rp-c-brand)">Output Config</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/config-tools.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Tools Config</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/config-performance.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Performance Config</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/config-experiments.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Experiments Config</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_71eca" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">Node API</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/builder-core.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Builder Core</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/builder-instance.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Builder Instance</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/builder-types.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Builder Types</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_71eca" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">Plugin API</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/plugin-core.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Plugin Core</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/api/plugin-hooks.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Plugin Hooks</div></a></div></div></div></section></nav></div></div></aside><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full"><div><div class="rspress-doc"><!--$--><h1 id="output-config" class="text-3xl mb-10 leading-10 tracking-tight title_3b154">Output Config<a class="link_3b154 header-anchor" aria-hidden="true" href="#output-config">#</a></h1>
<p class="my-4 leading-7">本章节描述了 Builder 中与构建产物有关的配置。</p>
<h2 id="outputassetprefix" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.assetPrefix<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputassetprefix">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>string</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>&#x27;/&#x27;</code></li>
</ul>
<p class="my-4 leading-7">在生产环境使用 CDN 部署时，可使用该选项设置静态资源的 URL 前缀。</p>
<p class="my-4 leading-7"><code>assetPrefix</code> 会影响构建产物中绝大部分静态资源的 URL，包括 JavaScript 文件、CSS 文件、图片、视频等。如果指定了一个错误的值，则在加载这些资源时可能会出现 404 错误。</p>
<p class="my-4 leading-7">该配置项仅用于生产环境。在开发环境下，请使用 <code>dev.assetPrefix</code> 配置项进行设置。</p>
<p class="my-4 leading-7">设置后，项目的 JavaScript、CSS、图片等静态资源的 URL 都会加上 <code>output.assetPrefix</code> 作为前缀：</p>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetPrefix</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;https://cdn.example.com/assets/&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">构建之后，可以看到 JS 文件从以下地址加载：</p>
<div class="language-html"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-html" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">script</span><span class="token" style="color:var(--code-token-function)">
</span></span><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-function)">  </span><span class="token" style="color:var(--code-token-symbol)">defer</span><span class="token" style="color:var(--code-token-function)">
</span></span><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-function)">  </span><span class="token" style="color:var(--code-token-symbol)">src</span><span class="token attr-equals" style="color:var(--code-token-punctuation)">=</span><span class="token" style="color:var(--code-token-punctuation)">&quot;</span><span class="token" style="color:var(--code-token-string-expression)">https://cdn.example.com/assets/static/js/main.ebc4ff4f.js</span><span class="token" style="color:var(--code-token-punctuation)">&quot;</span><span class="token" style="color:var(--code-token-function)">
</span></span><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-function)"></span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span class="token" style="color:var(--code-token-punctuation)">&lt;/</span><span class="token" style="color:var(--code-token-function)">script</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="与原生配置的区别" class="mt-10 mb-2 leading-7 text-xl title_3b154">与原生配置的区别<a class="link_3b154 header-anchor" aria-hidden="true" href="#与原生配置的区别">#</a></h3>
<p class="my-4 leading-7"><code>output.assetPrefix</code> 对应以下原生配置：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">webpack 的 <a href="https://webpack.js.org/guides/public-path/" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">output.publicPath</a> 配置。</li>
<li class="[&amp;:not(:first-child)]:mt-2">Rspack 的 <a href="https://www.rspack.dev/zh/config/output.html#outputpublicpath" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">output.publicPath</a> 配置。</li>
</ul>
<p class="my-4 leading-7">它与原生配置的区别在于：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>output.assetPrefix</code> 仅在生产环境下生效。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>output.assetPrefix</code> 默认会自动补全尾部的 <code>/</code>。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>output.assetPrefix</code> 的值会写入 <code>process.env.ASSET_PREFIX</code> 环境变量。</li>
</ul>
<h2 id="outputassetsretry" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.assetsRetry<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputassetsretry">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>Object</code></li>
</ul>
<p class="my-4 leading-7"><code>output.assetsRetry</code> 用于配置资源加载失败时的重试逻辑。配置类型如下:</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">AssetsRetryHookContext</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  times</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">number</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  domain</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  url</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  tagName</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">AssetsRetryOptions</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  type</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  domain</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  max</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">number</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  test</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span> </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>url</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  crossOrigin</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span> </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;anonymous&#x27;</span><span> </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;use-credentials&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  inlineScript</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  onRetry</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>options</span><span class="token operator">:</span><span> AssetsRetryHookContext</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-keyword)">void</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  onSuccess</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>options</span><span class="token operator">:</span><span> AssetsRetryHookContext</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-keyword)">void</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  onFail</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>options</span><span class="token operator">:</span><span> AssetsRetryHookContext</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-keyword)">void</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">由于该能力会往 HTML 中注入额外的一些运行时代码，因此我们默认关闭了该能力，如果需要开启该能力，你可以添加以下配置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">当你开启该能力后，<code>assetsRetry</code> 的默认配置如下：</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> defaultAssetsRetryOptions</span><span class="token operator">:</span><span> AssetsRetryOptions </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  type</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;script&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;link&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;img&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  domain</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  max</span><span class="token operator">:</span><span> </span><span class="token number">3</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  test</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  crossOrigin</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token function-variable" style="color:var(--code-token-function)">onRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token function-variable" style="color:var(--code-token-function)">onSuccess</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token function-variable" style="color:var(--code-token-function)">onFail</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">同时你也可以使用以下的配置项，来定制你的重试逻辑。</p>
<h3 id="assetsretrydomain" class="mt-10 mb-2 leading-7 text-xl title_3b154">assetsRetry.domain<a class="link_3b154 header-anchor" aria-hidden="true" href="#assetsretrydomain">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>string[]</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>[]</code></li>
</ul>
<p class="my-4 leading-7">指定资源加载失败时的重试域名列表。在 <code>domain</code> 数组中，第一项是当前使用的域名，后面几项为备用域名。当某个域名的资源请求失败时，Builder 会在数组中找到该域名，并替换为数组的下一个域名。</p>
<p class="my-4 leading-7">比如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">domain</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;https://cdn1.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;https://cdn2.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;https://cdn3.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">添加以上配置后，当 <code>cdn1.com</code> 域名的资源加载失败时，请求域名会自动降级到 <code>cdn2.com</code>。</p>
<p class="my-4 leading-7">如果 <code>cdn2.com</code> 的资源也请求失败，则会继续请求 <code>cdn3.com</code>。</p>
<h3 id="assetsretrytype" class="mt-10 mb-2 leading-7 text-xl title_3b154">assetsRetry.type<a class="link_3b154 header-anchor" aria-hidden="true" href="#assetsretrytype">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>string[]</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>[&#x27;script&#x27;, &#x27;link&#x27;, &#x27;img&#x27;]</code></li>
</ul>
<p class="my-4 leading-7">用于指定需要进行重试的 HTML 标签类型。默认会处理 script 标签、link 标签和 img 标签，对应 JS 代码、CSS 代码和图片。</p>
<p class="my-4 leading-7">比如只对 script 标签和 link 标签进行处理：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">type</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;script&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;link&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="assetsretrymax" class="mt-10 mb-2 leading-7 text-xl title_3b154">assetsRetry.max<a class="link_3b154 header-anchor" aria-hidden="true" href="#assetsretrymax">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>number</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>3</code></li>
</ul>
<p class="my-4 leading-7">单个资源的最大重试次数。比如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">max</span><span class="token operator">:</span><span> </span><span class="token number">5</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="assetsretrytest" class="mt-10 mb-2 leading-7 text-xl title_3b154">assetsRetry.test<a class="link_3b154 header-anchor" aria-hidden="true" href="#assetsretrytest">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>string | ((url: string) =&gt; boolean) | undefined</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>undefined</code></li>
</ul>
<p class="my-4 leading-7">匹配资源 URL 的正则表达式或函数，默认匹配所有资源。比如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">test</span><span class="token operator">:</span><span> </span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token regex-source language-regex" style="color:var(--code-token-keyword)">cdn\.example\.com</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="assetsretrycrossorigin" class="mt-10 mb-2 leading-7 text-xl title_3b154">assetsRetry.crossOrigin<a class="link_3b154 header-anchor" aria-hidden="true" href="#assetsretrycrossorigin">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>undefined | boolean | &#x27;anonymous&#x27; | &#x27;use-credentials&#x27;</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>与 html.crossorigin 一致</code></li>
</ul>
<p class="my-4 leading-7">在发起资源重新请求时，Builder 会重新创建 <code>&lt;script&gt;</code> 标签，此选项可以设置这些标签的 <code>crossorigin</code> 属性。</p>
<p class="my-4 leading-7">默认情况下，<code>assetsRetry.crossOrigin</code> 的值会与 <code>html.crossorigin</code> 配置项保持一致，无须额外配置。如果你需要对重新创建的标签进行单独配置，可以使用该选项，比如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">crossOrigin</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="assetsretryonretry" class="mt-10 mb-2 leading-7 text-xl title_3b154">assetsRetry.onRetry<a class="link_3b154 header-anchor" aria-hidden="true" href="#assetsretryonretry">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>undefined | (options: AssetsRetryHookContext) =&gt; void</code></li>
</ul>
<p class="my-4 leading-7">资源重试时的回调函数。比如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token function-variable" style="color:var(--code-token-function)">onRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter" style="color:var(--code-token-punctuation)">{</span><span class="token parameter"> times</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> domain</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> url</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> tagName </span><span class="token parameter" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          </span><span class="token template-string template-punctuation" style="color:var(--code-token-string)">`</span><span class="token template-string" style="color:var(--code-token-string)">Retry </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">times</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)"> times, domain: </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">domain</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)">, url: </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">url</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)">, tagName: </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">tagName</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string template-punctuation" style="color:var(--code-token-string)">`</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="assetsretryonsuccess" class="mt-10 mb-2 leading-7 text-xl title_3b154">assetsRetry.onSuccess<a class="link_3b154 header-anchor" aria-hidden="true" href="#assetsretryonsuccess">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>undefined | (options: AssetsRetryHookContext) =&gt; void</code></li>
</ul>
<p class="my-4 leading-7">资源重试成功时的回调函数。比如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token function-variable" style="color:var(--code-token-function)">onSuccess</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter" style="color:var(--code-token-punctuation)">{</span><span class="token parameter"> times</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> domain</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> url</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> tagName </span><span class="token parameter" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          </span><span class="token template-string template-punctuation" style="color:var(--code-token-string)">`</span><span class="token template-string" style="color:var(--code-token-string)">Retry </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">times</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)"> times, domain: </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">domain</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)">, url: </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">url</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)">, tagName: </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">tagName</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string template-punctuation" style="color:var(--code-token-string)">`</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="assetsretryonfail" class="mt-10 mb-2 leading-7 text-xl title_3b154">assetsRetry.onFail<a class="link_3b154 header-anchor" aria-hidden="true" href="#assetsretryonfail">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>undefined | (options: AssetsRetryHookContext) =&gt; void</code></li>
</ul>
<p class="my-4 leading-7">资源重试超过最大重试次数时的回调函数。比如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token function-variable" style="color:var(--code-token-function)">onFail</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter" style="color:var(--code-token-punctuation)">{</span><span class="token parameter"> times</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> domain</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> url</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> tagName </span><span class="token parameter" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          </span><span class="token template-string template-punctuation" style="color:var(--code-token-string)">`</span><span class="token template-string" style="color:var(--code-token-string)">Retry </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">times</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)"> times, domain: </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">domain</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)">, url: </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">url</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string" style="color:var(--code-token-string)">, tagName: </span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">${</span><span class="token template-string interpolation">tagName</span><span class="token template-string interpolation interpolation-punctuation" style="color:var(--code-token-punctuation)">}</span><span class="token template-string template-punctuation" style="color:var(--code-token-string)">`</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="assetsretryinlinescript" class="mt-10 mb-2 leading-7 text-xl title_3b154">assetsRetry.inlineScript<a class="link_3b154 header-anchor" aria-hidden="true" href="#assetsretryinlinescript">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>true</code></li>
</ul>
<p class="my-4 leading-7">是否将 <code>assetsRetry</code> 的运行时 JavaScript 代码内联到 HTML 文件中。</p>
<p class="my-4 leading-7">如果你不希望在 HTML 文件中插入相关代码，可以将 <code>assetsRetry.inlineScript</code> 设置为 <code>false</code>：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">inlineScript</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">添加以上配置后，<code>assetsRetry</code> 的运行时代码会被抽取为一个独立的 <code>assets-retry.[version].js</code> 文件，并输出到产物目录下。</p>
<p class="my-4 leading-7">这种方式的弊端在于，<code>assets-retry.[version].js</code> 自身有加载失败的可能性。如果出现这种情况，静态资源重试的逻辑就无法生效。因此，我们更推荐将运行时代码内联到 HTML 文件中。</p>
<h3 id="注意事项" class="mt-10 mb-2 leading-7 text-xl title_3b154">注意事项<a class="link_3b154 header-anchor" aria-hidden="true" href="#注意事项">#</a></h3>
<p class="my-4 leading-7">当你使用 <code>assetsRetry</code> 时，Builder 会向 HTML 中注入一段运行时代码，并将 <code>assetsRetry</code> 配置的内容序列化，插入到这段代码中，因此你需要注意：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">避免在 <code>assetsRetry</code> 中配置敏感信息，比如内部使用的 token。</li>
<li class="[&amp;:not(:first-child)]:mt-2">避免在 <code>onRetry</code>，<code>onSuccess</code>，<code>onFail</code> 中引用函数外部的变量或方法。</li>
<li class="[&amp;:not(:first-child)]:mt-2">避免在 <code>onRetry</code>，<code>onSuccess</code>，<code>onFail</code> 中使用有兼容性问题的语法，因为这些函数会被直接内联到 HTML 中。</li>
</ul>
<p class="my-4 leading-7">以下是一个错误示例：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> someMethod </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;utils&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">assetsRetry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-function)">onRetry</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-comment)">// 错误用法，包含了敏感信息</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> privateToken </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;a-private-token&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-comment)">// 错误用法，使用了外部的方法</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-function)">someMethod</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>privateToken</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="使用限制" class="mt-10 mb-2 leading-7 text-xl title_3b154">使用限制<a class="link_3b154 header-anchor" aria-hidden="true" href="#使用限制">#</a></h3>
<p class="my-4 leading-7">以下场景 <code>assetsRetry</code> 可能无法生效：</p>
<h4 id="微前端应用" class="mt-8 leading-6 text-base title_3b154">微前端应用<a class="link_3b154 header-anchor" aria-hidden="true" href="#微前端应用">#</a></h4>
<p class="my-4 leading-7">如果你的工程是微前端应用（比如 Garfish 子应用），那么 <code>assetsRetry</code> 可能无法生效，因为微前端子应用通常不是基于 <code>&lt;script&gt;</code> 标签直接加载的。</p>
<p class="my-4 leading-7">如果你需要对微前端场景的资源加载进行重试，请联系微前端框架的开发者，以寻找相应的解决方案。</p>
<h4 id="动态-import-资源" class="mt-8 leading-6 text-base title_3b154">动态 import 资源<a class="link_3b154 header-anchor" aria-hidden="true" href="#动态-import-资源">#</a></h4>
<p class="my-4 leading-7">目前 <code>assetsRetry</code> 无法对动态 import 资源生效，该功能正在支持中。</p>
<h4 id="自定义模版中的资源" class="mt-8 leading-6 text-base title_3b154">自定义模版中的资源<a class="link_3b154 header-anchor" aria-hidden="true" href="#自定义模版中的资源">#</a></h4>
<p class="my-4 leading-7"><code>assetsRetry</code> 通过监听页面 error 事件来获悉当前资源是否加载失败需要重试。因此，如果自定义模版中的资源执行早于 <code>assetsRetry</code>，那 <code>assetsRetry</code> 无法监听到该资源加载失败的事件，故无法 retry。</p>
<p class="my-4 leading-7">如果想要 <code>assetsRetry</code> 对自定义模版中的资源生效，可参考 <a href="https://github.com/jantimon/html-webpack-plugin/tree/main/examples/custom-insertion-position" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">自定义插入示例</a> 来修改 <a href="https://modernjs.dev/builder/api/config-html.html#htmlinject" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">html.inject</a> 配置和自定义模版。</p>
<div class="language-diff"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-diff" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token deleted-arrow prefix" style="color:#b31d28">&lt;</span><span class="token deleted-arrow line" style="color:#b31d28">!DOCTYPE html&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token deleted-arrow line" style="color:#b31d28"></span><span class="token deleted-arrow prefix" style="color:#b31d28">&lt;</span><span class="token deleted-arrow line" style="color:#b31d28">html&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token deleted-arrow line" style="color:#b31d28"></span><span class="token unchanged prefix"> </span><span class="token unchanged line"> &lt;head&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token unchanged line"></span><span class="token unchanged prefix"> </span><span class="token unchanged line">   &lt;meta charset=&quot;utf-8&quot;&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token unchanged line"></span><span class="token unchanged prefix"> </span><span class="token unchanged line">   &lt;title&gt;custom template&lt;/title&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token unchanged line"></span><span class="token inserted-sign prefix" style="color:#22863a">+</span><span class="token inserted-sign line" style="color:#22863a">   &lt;%= htmlWebpackPlugin.tags.headTags %&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token inserted-sign line" style="color:#22863a"></span><span class="token unchanged prefix"> </span><span class="token unchanged line">   &lt;script src=&quot;//example.com/assets/a.js&quot;&gt;&lt;/script&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token unchanged line"></span><span class="token unchanged prefix"> </span><span class="token unchanged line"> &lt;/head&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token unchanged line"></span><span class="token unchanged prefix"> </span><span class="token unchanged line"> &lt;body&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token unchanged line"></span><span class="token unchanged prefix"> </span><span class="token unchanged line">   &lt;div id=&quot;root&quot; /&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token unchanged line"></span><span class="token inserted-sign prefix" style="color:#22863a">+</span><span class="token inserted-sign line" style="color:#22863a">    &lt;%= htmlWebpackPlugin.tags.bodyTags %&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token inserted-sign line" style="color:#22863a"></span><span class="token unchanged prefix"> </span><span class="token unchanged line"> &lt;/body&gt;
</span></span><span style="display:block;padding:0 1.25rem"><span class="token unchanged line"></span><span class="token deleted-arrow prefix" style="color:#b31d28">&lt;</span><span class="token deleted-arrow line" style="color:#b31d28">/html&gt;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputcharset" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.charset<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputcharset">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>&#x27;ascii&#x27; | &#x27;utf8&#x27;</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>&#x27;ascii&#x27;</code></li>
</ul>
<p class="my-4 leading-7">默认情况下，Builder 的产物内容是纯 ASCII 的，并且会转义所有非 ASCII 字符。</p>
<p class="my-4 leading-7">如果不希望进行转义，而是输出所有原始字符，可以将 <code>output.charset</code> 设置为 <code>utf8</code>。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">charset</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;utf8&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">当 <code>output.charset</code> 为 <code>utf8</code> 时，Builder 会自动将 <code>&lt;meta charset=&quot;utf-8&quot;&gt;</code> 添加到生成的 HTML 文件中。</p>
<h2 id="outputcleandistpath" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.cleanDistPath<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputcleandistpath">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>true</code></li>
</ul>
<p class="my-4 leading-7">是否在构建开始前清理 dist 目录下的所有文件。</p>
<p class="my-4 leading-7">默认情况下，Builder 会自动清理 dist 目录下的文件，你可以把 <code>cleanDistPath</code> 设置为 <code>false</code> 来禁用该行为。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">cleanDistPath</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputconverttorem" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.convertToRem<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputconverttorem">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean | object</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">通过设置 <code>output.convertToRem</code>，Builder 可进行如下处理：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">将 CSS 中的 px 转成 rem</li>
<li class="[&amp;:not(:first-child)]:mt-2">在 HTML 模版中插入运行时代码，对根元素 fontSize 进行设置</li>
</ul>
<h3 id="boolean-类型" class="mt-10 mb-2 leading-7 text-xl title_3b154">Boolean 类型<a class="link_3b154 header-anchor" aria-hidden="true" href="#boolean-类型">#</a></h3>
<p class="my-4 leading-7">当设置 <code>output.convertToRem</code> 为 <code>true</code>，将开启 rem 处理能力。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">convertToRem</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">此时，rem 配置默认如下：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">enableRuntime</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">rootFontSize</span><span class="token operator">:</span><span> </span><span class="token number">50</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">screenWidth</span><span class="token operator">:</span><span> </span><span class="token number">375</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">rootFontSize</span><span class="token operator">:</span><span> </span><span class="token number">50</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">maxRootFontSize</span><span class="token operator">:</span><span> </span><span class="token number">64</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">widthQueryKey</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">excludeEntries</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">supportLandscape</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">useRootFontSizeBeyondMax</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">pxtorem</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">rootValue</span><span class="token operator">:</span><span> </span><span class="token number">50</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">unitPrecision</span><span class="token operator">:</span><span> </span><span class="token number">5</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">propList</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;*&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="object-类型" class="mt-10 mb-2 leading-7 text-xl title_3b154">Object 类型<a class="link_3b154 header-anchor" aria-hidden="true" href="#object-类型">#</a></h3>
<p class="my-4 leading-7">当 <code>output.convertToRem</code> 的值为 <code>object</code> 类型时，Builder 会根据当前配置进行 rem 处理。</p>
<p class="my-4 leading-7">选项：</p>
<table class="table border-collapse text-base my-5 overflow-x-auto leading-7 border-gray-light-2">
<thead>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<th class="border border-solid px-4 py-2 text-text-1 text-base font-semibold border-gray-light-2">名称</th>
<th class="border border-solid px-4 py-2 text-text-1 text-base font-semibold border-gray-light-2">类型</th>
<th class="border border-solid px-4 py-2 text-text-1 text-base font-semibold border-gray-light-2">默认值</th>
<th class="border border-solid px-4 py-2 text-text-1 text-base font-semibold border-gray-light-2">描述</th>
</tr>
</thead>
<tbody>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">enableRuntime</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>boolean</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>true</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">是否自动生成 runtime 代码来动态计算根元素字体大小</td>
</tr>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">inlineRuntime</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>boolean</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>true</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">是否将 runtime 代码内联到 HTML 文件中。如果设置为 <code>false</code>，运行时代码会被抽取为一个独立的 <code>convert-rem.[version].js</code> 文件，并输出到产物目录下</td>
</tr>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">rootFontSize</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>number</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>50</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">根元素字体值</td>
</tr>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">maxRootFontSize</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>number</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>64</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">最大根元素字体值</td>
</tr>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">widthQueryKey</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>string</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>&#x27;&#x27; </code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">根据 widthQueryKey 的值去 url query 中取 client width</td>
</tr>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">screenWidth</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>number</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>375</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">UI 设计图宽度</td>
</tr>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">excludeEntries</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>string[]</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>[]</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">设置不注入 runtime 代码的页面入口，通常需要配合 <code>pxtorem.exclude</code> 使用</td>
</tr>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">supportLandscape</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>boolean</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>false</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">横屏时使用 height 计算 rem</td>
</tr>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">useRootFontSizeBeyondMax</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>boolean</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>false</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">超过 maxRootFontSize 时，是否使用 rootFontSize</td>
</tr>
<tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-2">
<td class="border border-solid  px-4 py-2 border-gray-light-2">pxtorem</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><code>object</code></td>
<td class="border border-solid  px-4 py-2 border-gray-light-2">rootValue。默认与 rootFontSize 相同 <!-- -->unitPrecision: 5。精确位数 <!-- -->propList: [&#x27;*&#x27;]。支持转换的 CSS 属性</td>
<td class="border border-solid  px-4 py-2 border-gray-light-2"><a href="https://github.com/cuth/postcss-pxtorem#options" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">postcss-pxtorem</a> 插件属性</td>
</tr>
</tbody>
</table>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">convertToRem</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">rootFontSize</span><span class="token operator">:</span><span> </span><span class="token number">30</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">excludeEntries</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;404&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;page2&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">pxtorem</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token literal-property" style="color:var(--code-token-parameter)">propList</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;font-size&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputcopy" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.copy<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputcopy">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>CopyPluginOptions | CopyPluginOptions[&#x27;patterns&#x27;]</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>undefined</code></li>
</ul>
<p class="my-4 leading-7">将指定的文件或目录拷贝到构建输出目录中。</p>
<p class="my-4 leading-7">例如，将 <code>src/assets</code> 下的文件直接拷贝到 dist 目录：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">copy</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token literal-property" style="color:var(--code-token-parameter)">from</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./src/assets&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token literal-property" style="color:var(--code-token-parameter)">to</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;&#x27;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">更详细的配置项请参考：<a href="https://github.com/webpack-contrib/copy-webpack-plugin" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">copy-webpack-plugin</a> 文档。</p>
<h2 id="outputcssmodules" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.cssModules<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputcssmodules">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">CssModuleLocalsConvention</span><span> </span><span class="token operator">=</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;asIs&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;camelCase&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;camelCaseOnly&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;dashes&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;dashesOnly&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">CssModules</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  auto</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span> </span><span class="token operator">|</span><span> RegExp </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>resourcePath</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  exportLocalsConvention</span><span class="token operator">?</span><span class="token operator">:</span><span> CssModuleLocalsConvention</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> defaultCssModules </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  exportLocalsConvention</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;camelCase&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">自定义 CSS 模块配置。</p>
<h3 id="cssmodulesauto" class="mt-10 mb-2 leading-7 text-xl title_3b154">cssModules.auto<a class="link_3b154 header-anchor" aria-hidden="true" href="#cssmodulesauto">#</a></h3>
<p class="my-4 leading-7">auto 配置项允许基于文件名自动启用 CSS 模块。</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><strong class="font-semibold">类型：</strong> <code>boolean | RegExp | ((resourcePath: string) =&gt; boolean)</code></p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><strong class="font-semibold">默认值：</strong> <code>undefined</code></p>
</li>
</ul>
<p class="my-4 leading-7">类型说明：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>undefined</code>: 根据 <a href="https://modernjs.dev/builder/api/config-output.html#outputdisablecssmoduleextension" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">output.disableCssModuleExtension</a> 配置项决定为哪些样式文件启用 CSS 模块。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>true</code>: 为所有匹配 <code>/\.module\.\w+$/i.test(filename)</code> 正则表达式的文件启用 CSS 模块。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>false</code>: 禁用 CSS 模块。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>RegExp</code>: 为所有匹配 <code>/RegExp/i.test(filename)</code> 正则表达式的文件禁用 CSS 模块。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>function</code>: 为所有通过基于文件名的过滤函数校验的文件启用 CSS 模块。</li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    cssModules</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token function-variable" style="color:var(--code-token-function)">auto</span><span class="token operator">:</span><span> resource </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> resource</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">includes</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;.module.&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">||</span><span> resource</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">includes</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;shared/&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="cssmodulesexportlocalsconvention" class="mt-10 mb-2 leading-7 text-xl title_3b154">cssModules.exportLocalsConvention<a class="link_3b154 header-anchor" aria-hidden="true" href="#cssmodulesexportlocalsconvention">#</a></h3>
<p class="my-4 leading-7">导出的类名称的样式。</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><strong class="font-semibold">类型：</strong> <code>&#x27;asIs&#x27; | &#x27;camelCase&#x27; | &#x27;camelCaseOnly&#x27; | &#x27;dashes&#x27; | &#x27;dashesOnly&#x27;</code></p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><strong class="font-semibold">默认值：</strong> <code>&#x27;camelCase&#x27;</code></p>
</li>
</ul>
<p class="my-4 leading-7">类型说明：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>asIs</code> 类名将按原样导出。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>camelCase</code> 类名将被驼峰化，原始类名仍然可用。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>camelCaseOnly</code> 类名将被驼峰化，原始类名不可用。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>dashes</code> 只有类名中的破折号会被驼峰化，原始类名仍然可用。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>dashesOnly</code> 只有类名中的破折号会被驼峰化，原始类名不可用。</li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    cssModules</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      exportLocalsConvention</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;camelCaseOnly&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputcssmodulelocalidentname" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.cssModuleLocalIdentName<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputcssmodulelocalidentname">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>string</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">// isProd 表示生产环境构建</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> localIdentName </span><span class="token operator">=</span><span> isProd
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">?</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[local]-[hash:base64:6]&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[path][name]__[local]-[hash:base64:6]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">设置 CSS Modules 编译后生成的 className 格式。</p>
<h3 id="默认值" class="mt-10 mb-2 leading-7 text-xl title_3b154">默认值<a class="link_3b154 header-anchor" aria-hidden="true" href="#默认值">#</a></h3>
<p class="my-4 leading-7"><code>cssModuleLocalIdentName</code> 在开发环境和生产环境有不同的默认值。</p>
<p class="my-4 leading-7">在生产环境，Builder 会生成更简短的类名，从而减少构建产物的体积。</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> styles </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./index.module.scss&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// 在开发环境下，值为 `.src-index-module__header--xxxxx`</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// 在生产环境下，值为 `.xxxxx`</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-symbol)">console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>styles</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>header</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="模板字符串" class="mt-10 mb-2 leading-7 text-xl title_3b154">模板字符串<a class="link_3b154 header-anchor" aria-hidden="true" href="#模板字符串">#</a></h3>
<p class="my-4 leading-7">在 <code>cssModuleLocalIdentName</code> 中，你可以使用以下模板字符串：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>[name]</code> - 源文件名称。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>[local]</code> - 原始类名。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>[hash]</code> - 字符串的哈希值。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>[folder]</code> - 文件夹的相对路径。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>[path]</code> - 源文件的相对路径。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>[file]</code> - 文件名和路径。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>[ext]</code> - 文件后缀名，包含点号。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>[hash:&lt;hashDigest&gt;:&lt;hashDigestLength&gt;]</code> - 带有哈希设置的哈希。</li>
</ul>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">在使用 Rspack 作为打包工具时, 暂不支持配置 <code>&lt;hashDigest&gt;</code>。
</p></div></div>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">将 <code>cssModuleLocalIdentName</code> 设置为其他值：</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    cssModuleLocalIdentName</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[hash:base64:4]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputdataurilimit" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.dataUriLimit<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdataurilimit">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">DataUriLimitConfig</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  svg</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">number</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  font</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">number</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  image</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">number</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  media</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">number</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong></li>
</ul>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> defaultDatUriLimit </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">svg</span><span class="token operator">:</span><span> </span><span class="token number">10000</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">font</span><span class="token operator">:</span><span> </span><span class="token number">10000</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">image</span><span class="token operator">:</span><span> </span><span class="token number">10000</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">media</span><span class="token operator">:</span><span> </span><span class="token number">10000</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">设置图片、字体、媒体等静态资源被自动内联为 base64 的体积阈值。</p>
<p class="my-4 leading-7">默认情况下，体积小于 10KB 的图片、字体、媒体等文件，会自动经过 Base64 编码，内联到页面中，不再会发送独立的 HTTP 请求。</p>
<p class="my-4 leading-7">你可以通过修改 <code>dataUriLimit</code> 参数来调整这个阈值。</p>
<p class="my-4 leading-7">其中：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>svg</code>：表示 SVG 图片的体积阈值。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>font</code>：表示字体文件的体积阈值。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>image</code>：表示非 SVG 图片的体积阈值。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>media</code>：表示视频等媒体资源的体积阈值。</li>
</ul>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">修改图片资源的阈值为 5000 Bytes，设置视频资源不内联：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">dataUriLimit</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">image</span><span class="token operator">:</span><span> </span><span class="token number">5000</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">media</span><span class="token operator">:</span><span> </span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputdisablecssextract" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.disableCssExtract<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdisablecssextract">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">是否禁用 CSS 提取逻辑，并将 CSS 文件内联到 JS 文件中。</p>
<p class="my-4 leading-7">默认情况下，Builder 会把 CSS 提取为独立的 <code>.css</code> 文件，并输出到构建产物目录。设置该选项为 <code>true</code> 后，CSS 文件会被内联到 JS 文件中，并在运行时通过 <code>&lt;style&gt;</code> 标签插入到页面上。</p>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    disableCssExtract</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputdisablecssmoduleextension" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.disableCssModuleExtension<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdisablecssmoduleextension">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">是否将源码目录下的所有样式文件当做 CSS Modules 模块进行处理。</p>
<p class="my-4 leading-7">在默认情况下，只有 <code>*.module.css</code> 结尾的文件才被视为 CSS Modules 模块。开启该配置项之后，会将源码目录下的所有 <code>*.css</code> 样式文件当做 CSS Modules 模块。</p>
<p class="my-4 leading-7"><code>.sass</code>、<code>.scss</code> 和 <code>.less</code> 文件的处理规则与 <code>.css</code> 文件一致，也会受到 <code>disableCssModuleExtension</code> 的影响。</p>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">我们不推荐开启此配置项，因为开启 <code>disableCssModuleExtension</code> 后，CSS Modules 文件和普通 CSS 文件无法得到明确的区分，不利于长期维护。
</p></div></div>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableCssModuleExtension</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="规则" class="mt-10 mb-2 leading-7 text-xl title_3b154">规则<a class="link_3b154 header-anchor" aria-hidden="true" href="#规则">#</a></h3>
<p class="my-4 leading-7">以下是对 CSS Modules 判断规则的详细解释：</p>
<h4 id="未开启-disablecssmoduleextension默认" class="mt-8 leading-6 text-base title_3b154">未开启 disableCssModuleExtension（默认）<a class="link_3b154 header-anchor" aria-hidden="true" href="#未开启-disablecssmoduleextension默认">#</a></h4>
<p class="my-4 leading-7">以下文件会视为 CSS Modules：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">所有 <code>*.module.css</code> 文件</li>
</ul>
<p class="my-4 leading-7">以下文件会视为普通 CSS：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">所有 <code>*.css</code> 文件（不含 <code>.module</code>）</li>
<li class="[&amp;:not(:first-child)]:mt-2">所有 <code>*.global.css</code> 文件</li>
</ul>
<h4 id="开启-disablecssmoduleextension" class="mt-8 leading-6 text-base title_3b154">开启 disableCssModuleExtension<a class="link_3b154 header-anchor" aria-hidden="true" href="#开启-disablecssmoduleextension">#</a></h4>
<p class="my-4 leading-7">以下文件会视为 CSS Modules：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">源码目录下的 <code>*.css</code> 和 <code>*.module.css</code> 文件</li>
<li class="[&amp;:not(:first-child)]:mt-2">node_modules 下的 <code>*.module.css</code> 文件</li>
</ul>
<p class="my-4 leading-7">以下文件会视为普通 CSS：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">所有 <code>*.global.css</code> 文件</li>
<li class="[&amp;:not(:first-child)]:mt-2">node_modules 下的 <code>*.css</code> 文件（不含 <code>.module</code>）</li>
</ul>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">对于 node_modules 中的 CSS Modules 文件，请始终使用 <code>*.module.css</code> 后缀。
</p></div></div>
<h2 id="outputdistpath" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.distPath<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdistpath">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">DistPathConfig</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  root</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  html</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  js</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  css</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  svg</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  font</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  wasm</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  image</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  media</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  server</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  worker</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong></li>
</ul>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> defaultDistPath </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">root</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;dist&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">html</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;html&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">js</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;static/js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">css</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;static/css&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">svg</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;static/svg&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">font</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;static/font&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">wasm</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;static/wasm&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">image</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;static/image&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">media</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;static/media&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">server</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;bundles&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">worker</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;worker&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">设置构建产物的输出目录，Builder 会根据产物的类型输出到对应的子目录下。</p>
<p class="my-4 leading-7">其中：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>root</code>: 表示所有构建产物输出的根目录。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>html</code>：表示 HTML 文件的输出目录。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>js</code>：表示 JavaScript 文件的输出目录。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>css</code>：表示 CSS 样式文件的输出目录。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>svg</code>：表示 SVG 图片的输出目录。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>font</code>：表示字体文件的输出目录。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>wasm</code>：表示 WebAssembly 文件的输出目录。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>image</code>：表示非 SVG 图片的输出目录。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>media</code>：表示视频等媒体资源的输出目录。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>server</code>: 表示服务端产物的输出目录，仅在 target 为 <code>node</code> 时有效。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>worker</code>: 表示 worker 产物的输出目录，仅在 target 为 <code>service-worker</code> 时有效。</li>
</ul>
<h3 id="根目录" class="mt-10 mb-2 leading-7 text-xl title_3b154">根目录<a class="link_3b154 header-anchor" aria-hidden="true" href="#根目录">#</a></h3>
<p class="my-4 leading-7"><code>root</code> 是构建产物的根目录，可以为相对路径或绝对路径。如果 <code>root</code> 的值为相对路径，则会基于当前项目的根目录拼接为绝对路径。</p>
<p class="my-4 leading-7">其他目录只能为相对路径，并且会相对于 <code>root</code> 进行输出。</p>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">以 JavaScript 文件为例，会输出到 <code>distPath.root</code> + <code>distPath.js</code> 目录，即为 <code>dist/static/js</code>。</p>
<p class="my-4 leading-7">如果需要将 JavaScript 文件输出到 <code>build/resource/js</code> 目录，可以这样设置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">distPath</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">root</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;build&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">js</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;resource/js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputdisableminimize" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.disableMinimize<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdisableminimize">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">是否禁用生产环境下的代码压缩。</p>
<p class="my-4 leading-7">默认情况下，JS 代码和 CSS 代码会在生产环境构建时被自动压缩，从而提升页面性能。如果你不希望执行代码压缩，可以将 <code>disableMinimize</code> 设置为 <code>true</code>。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableMinimize</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">该配置项通常用于代码调试和问题排查，不建议在生产环境禁用代码压缩，否则会导致页面性能显著下降。</p></div></div>
<h2 id="outputdisablesourcemap" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.disableSourceMap<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdisablesourcemap">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">DisableSourceMap</span><span> </span><span class="token operator">=</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      js</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      css</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> defaultDisableSourceMap </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  js</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  css</span><span class="token operator">:</span><span> process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;production&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">是否禁用 Source Map 生成。</p>
<div class="rspress-directive tip"><div class="rspress-directive-title">什么是 Source Map</div><div class="rspress-directive-content"><p class="my-4 leading-7">Source Map 是保存源代码映射关系的信息文件，它记录了编译后的代码的每一个位置，以及所对应的编译前的位置。通过 Source Map，可以在调试编译后的代码时，直接查看对应的源代码。</p></div></div>
<p class="my-4 leading-7">默认情况下，Builder 的 Source Map 生成规则如下：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">在开发环境构建时，会生成 JS 文件和 CSS 文件的 SourceMap，便于进行开发调试。</li>
<li class="[&amp;:not(:first-child)]:mt-2">在生产环境构建时，会生成 JS 文件的 Source Map，用于调试和排查线上问题；不会生成 CSS 文件的 Source Map。</li>
</ul>
<p class="my-4 leading-7">如果项目不需要 Source Map，可以关闭该功能，从而提升构建的速度。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableSourceMap</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">如果需要开启开发环境的 Source Map，并在生产环境禁用，可以设置为：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableSourceMap</span><span class="token operator">:</span><span> process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;production&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">如果需要单独控制 JS 文件或 CSS 文件的 Source Map，可以参考下方设置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableSourceMap</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">js</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">css</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputdisablesvgr" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.disableSvgr<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdisablesvgr">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">是否调用 SVGR 将 SVG 转化为 React 组件。如果设置为 true，将把所有的.svg 文件视为资源处理。</p>
<p class="my-4 leading-7">默认情况下，在 JS 文件中引用 SVG 资源时，Builder 会调用 SVGR，将 SVG 图片转换为一个 React 组件。
如果你确定项目内的所有 SVG 资源都没有当成 React 组件使用时，可以通过将 <code>disableSvgr</code> 设置为 true 来关闭此项转换，以提升构建性能。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableSvgr</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputdisabletschecker" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.disableTsChecker<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdisabletschecker">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">是否禁用编译过程中的 TypeScript 类型检查。</p>
<p class="my-4 leading-7">默认情况下，Builder 执行构建的过程中，会在一个独立的进程里运行 TypeScript 类型检查工具，它的检查逻辑与 TypeScript 原生的 <code>tsc</code> 命令一致，你可以通过 <code>tsconfig.json</code> 或是 Builder 的 <code>tools.tsChecker</code> 配置项来自定义检查行为。</p>
<h3 id="阻塞编译" class="mt-10 mb-2 leading-7 text-xl title_3b154">阻塞编译<a class="link_3b154 header-anchor" aria-hidden="true" href="#阻塞编译">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">在开发环境构建时，类型错误不会阻塞编译流程。</li>
<li class="[&amp;:not(:first-child)]:mt-2">在生产环境构建时，类型错误会导致构建失败，以保证生产环境代码的稳定性。</li>
</ul>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">禁用 TypeScript 类型检查：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableTsChecker</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">禁用开发环境构建时的类型检查：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableTsChecker</span><span class="token operator">:</span><span> process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;development&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">禁用生产环境构建时的类型检查：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableTsChecker</span><span class="token operator">:</span><span> process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;production&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">不建议在生产环境构建时禁用类型检查，这会导致线上代码的稳定性下降，请谨慎使用。</p></div></div>
<h2 id="outputdisablefilenamehash" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.disableFilenameHash<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdisablefilenamehash">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">移除生产环境的构建产物名称中的 hash 值。</p>
<p class="my-4 leading-7">在生产环境构建后，会自动在文件名中间添加 hash 值，如果不需要添加，可以通过 <code>output.disableFilenameHash</code> 配置来禁用该行为。</p>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">默认情况下，构建后的产物名称为：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>File                                     Size         Gzipped
</span></span><span style="display:block;padding:0 1.25rem">dist/static/css/187.7879e19d.css         126.99 KB    9.17 KB
</span><span style="display:block;padding:0 1.25rem">dist/static/js/main.18a568e5.js          2.24 KB      922 B</span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">添加 <code>output.disableFilenameHash</code> 配置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableFilenameHash</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">重新构建，产物的名称变为：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>File                            Size         Gzipped
</span></span><span style="display:block;padding:0 1.25rem">dist/static/css/187.css         126.99 KB    9.17 KB
</span><span style="display:block;padding:0 1.25rem">dist/static/js/main.js          2.24 KB      922 B</span></code></pre><button class="copy"></button></div></div>
<h2 id="outputdisableinlineruntimechunk" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.disableInlineRuntimeChunk<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputdisableinlineruntimechunk">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">用于控制是否将打包工具的 runtime 代码内联到 HTML 中。</p>
<div class="rspress-directive tip"><div class="rspress-directive-title">什么是 runtimeChunk</div><div class="rspress-directive-content"><p class="my-4 leading-7">当 Builder 构建完成后，会在 dist 目录生成 <code>builder-runtime.js</code> 文件，该文件为 webpack 或 Rspack 的 runtime 代码，即 runtimeChunk。</p>
<p class="my-4 leading-7">runtimeChunk 是一段运行时代码，它由 webpack 或 Rspack 提供，包含必要的模块处理逻辑，比如模块加载、模块解析等，具体可参考 <a href="https://webpack.js.org/concepts/manifest/#runtime" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">Runtime</a>。</p>
</div></div>
<p class="my-4 leading-7">在生产环境下，Builder 默认会将 runtimeChunk 文件内联到 HTML 文件中，而不是写到产物目录中，这样做是为了减少文件请求的数量。</p>
<h3 id="禁用内联" class="mt-10 mb-2 leading-7 text-xl title_3b154">禁用内联<a class="link_3b154 header-anchor" aria-hidden="true" href="#禁用内联">#</a></h3>
<p class="my-4 leading-7">如果你不希望 runtimeChunk 文件被内联到 HTML 文件里，可以把 <code>disableInlineRuntimeChunk</code> 设置为 <code>true</code>，此时会生成一个独立的 <code>builder-runtime.js</code> 文件。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">disableInlineRuntimeChunk</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="合并到页面文件中" class="mt-10 mb-2 leading-7 text-xl title_3b154">合并到页面文件中<a class="link_3b154 header-anchor" aria-hidden="true" href="#合并到页面文件中">#</a></h3>
<p class="my-4 leading-7">如果你不希望生成独立的 runtimeChunk 文件，而是想让 runtimeChunk 代码被打包到页面的 JS 文件里，可以这样设置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">tools</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-function)">bundlerChain</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">chain</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      chain</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>optimization</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">runtimeChunk</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputenableassetmanifest" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.enableAssetManifest<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputenableassetmanifest">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">是否生成 manifest 文件，该文件包含所有构建产物的信息。</p>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">添加以下配置来开启：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">enableAssetManifest</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">开启后，当编译完成时，会自动生成 <code>dist/manifest.json</code> 文件：</p>
<div class="language-json"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-json" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;files&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;main.css&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;/static/css/main.45b01211.css&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;main.js&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;/static/js/main.52fd298f.js&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-parameter)">&quot;html/main/index.html&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;/html/main/index.html&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-parameter)">&quot;entrypoints&quot;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&quot;static/css/main.45b01211.css&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;static/js/main.52fd298f.js&quot;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputenableassetfallback" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.enableAssetFallback<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputenableassetfallback">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">开启该选项后，当编译过程中遇到无法识别的文件类型时，会直接将该文件直接输出到产物目录；否则会抛出一个异常。</p>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">开启配置项：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">enableAssetFallback</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">在代码中引用一个未知类型的模块：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./foo.xxx&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">编译后，<code>foo.xxx</code> 会被自动输出到 <code>dist/static/media</code> 目录下。</p>
<p class="my-4 leading-7">你可以通过 <code>output.distPath.media</code> 和 <code>output.filename.media</code> 配置项来控制 fallback 后的输出路径和文件名称。</p>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">开启该配置会导致 webpack 配置中的 rules 结构变化，增加一层额外的 <code>oneOf</code> 嵌套结构。大多数情况下，我们不推荐你使用此配置。
</p></div></div>
<h2 id="outputenablelatestdecorators" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.enableLatestDecorators<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputenablelatestdecorators">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">是否要使用 <a href="https://github.com/tc39/proposal-decorators/tree/7fa580b40f2c19c561511ea2c978e307ae689a1b" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">新版 decorator 提案</a> 进行编译。</p>
<p class="my-4 leading-7">默认情况下，Builder 在编译装饰器时采用 <a href="https://github.com/wycats/javascript-decorators/blob/e1bf8d41bfa2591d949dd3bbf013514c8904b913/README.md" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">旧版 decorator 提案</a>。</p>
<p class="my-4 leading-7">将 <code>output.enableLatestDecorators</code> 设置为 <code>true</code> 时，Builder 会采用新版 decorator 提案 (2018-09 版本) 进行编译。</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    enableLatestDecorators</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputenablecssmoduletsdeclaration" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.enableCssModuleTSDeclaration<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputenablecssmoduletsdeclaration">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>boolean</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">是否生成 CSS Modules 的 TypeScript 声明文件。</p>
<h3 id="example" class="mt-10 mb-2 leading-7 text-xl title_3b154">Example<a class="link_3b154 header-anchor" aria-hidden="true" href="#example">#</a></h3>
<p class="my-4 leading-7">启用 CSS Module TypeScript 声明，比如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">enableCssModuleTSDeclaration</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">项目构建完成后，每个 CSS Module 文件都会生成一个 <code>.d.ts</code> 文件。例如：</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">interface</span><span> </span><span class="token class-name">CssExports</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  title</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> cssExports</span><span class="token operator">:</span><span> CssExports</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> cssExports</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputenableinlinescripts" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.enableInlineScripts<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputenableinlinescripts">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">EnableInlineScripts</span><span> </span><span class="token operator">=</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> RegExp
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>params</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> size</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">number</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">打包工具：</strong> <code>仅支持 webpack</code></li>
</ul>
<p class="my-4 leading-7">用来控制生产环境中是否用 <code>&lt;script&gt;</code> 标签将产物中的 script 文件（.js 文件）inline 到 HTML 中。</p>
<p class="my-4 leading-7">注意，如果开启了这个选项，那么 script 文件将不会被写入产物目录中，而只会以 inline 脚本的形式存在于 HTML 文件中。</p>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">当使用约定式路由时，如果开启了这个选项，需要将 <a href="https://modernjs.dev/configure/app/output/splitRouteChunks.html" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">output.splitRouteChunks</a> 设置为 false。
</p></div></div>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">默认情况下，我们有这样的产物文件：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>dist/html/main/index.html
</span></span><span style="display:block;padding:0 1.25rem">dist/static/css/style.css
</span><span style="display:block;padding:0 1.25rem">dist/static/js/main.js</span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">开启 <code>output.enableInlineScripts</code> 选项后：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">enableInlineScripts</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">产物文件将变成：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>dist/html/main/index.html
</span></span><span style="display:block;padding:0 1.25rem">dist/static/css/style.css</span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">同时，<code>dist/static/js/main.js</code> 文件将被 inline 到 <code>index.html</code> 中：</p>
<div class="language-html"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-html" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">html</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">body</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">script</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span class="token script language-javascript">
</span></span><span style="display:block;padding:0 1.25rem"><span class="token script language-javascript">      </span><span class="token script language-javascript" style="color:var(--code-token-comment)">// content of dist/static/js/main.js</span><span class="token script language-javascript">
</span></span><span style="display:block;padding:0 1.25rem"><span class="token script language-javascript">    </span><span class="token" style="color:var(--code-token-punctuation)">&lt;/</span><span class="token" style="color:var(--code-token-function)">script</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">&lt;/</span><span class="token" style="color:var(--code-token-function)">body</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">&lt;/</span><span class="token" style="color:var(--code-token-function)">html</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="通过正则匹配" class="mt-10 mb-2 leading-7 text-xl title_3b154">通过正则匹配<a class="link_3b154 header-anchor" aria-hidden="true" href="#通过正则匹配">#</a></h3>
<p class="my-4 leading-7">当你需要内联产物中的一部分 JS 文件时，你可以将 <code>enableInlineScripts</code> 设置为一个正则表达式，匹配需要内联的 JS 文件的 URL。</p>
<p class="my-4 leading-7">比如，将产物中的 <code>main.js</code> 内联到 HTML 中，你可以添加如下配置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">enableInlineScripts</span><span class="token operator">:</span><span> </span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token regex-source language-regex" style="color:var(--code-token-keyword)">\/main\.\w+\.js$</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">生产环境的文件名中默认包含了一个 hash 值，比如 <code>static/js/main.18a568e5.js</code>。因此，在正则表达式中需要通过 <code>\w+</code> 来匹配 hash。
</p></div></div>
<h3 id="通过函数匹配" class="mt-10 mb-2 leading-7 text-xl title_3b154">通过函数匹配<a class="link_3b154 header-anchor" aria-hidden="true" href="#通过函数匹配">#</a></h3>
<p class="my-4 leading-7">你也可以将 <code>output.enableInlineScripts</code> 设置为一个函数，函数接收以下参数：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>name</code>：文件名，比如 <code>static/js/main.18a568e5.js</code>。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>size</code>：文件大小，单位为 byte。</li>
</ul>
<p class="my-4 leading-7">比如，我们希望内联小于 10KB 的资源，可以添加如下配置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-function)">enableInlineScripts</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter" style="color:var(--code-token-punctuation)">{</span><span class="token parameter"> size </span><span class="token parameter" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> size </span><span class="token operator">&lt;</span><span> </span><span class="token number">10</span><span> </span><span class="token operator">*</span><span> </span><span class="token number">1000</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputenableinlinestyles" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.enableInlineStyles<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputenableinlinestyles">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">EnableInlineStyles</span><span> </span><span class="token operator">=</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> RegExp
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>params</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> size</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">number</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>false</code></li>
</ul>
<p class="my-4 leading-7">用来控制生产环境中是否用 <code>&lt;style&gt;</code> 标签将产物中的 style 文件（.css 文件）inline 到 HTML 中。</p>
<p class="my-4 leading-7">注意，如果开启了这个选项，那么 style 文件将不会被写入产物目录中，而只会以 inline 样式的形式存在于 HTML 文件中。</p>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">当使用约定式路由时，如果开启了这个选项，需要将 <a href="https://modernjs.dev/configure/app/output/splitRouteChunks.html" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">output.splitRouteChunks</a> 设置为 false。
</p></div></div>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">默认情况下，我们有这样的产物文件：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>dist/html/main/index.html
</span></span><span style="display:block;padding:0 1.25rem">dist/static/css/style.css
</span><span style="display:block;padding:0 1.25rem">dist/static/js/main.js</span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">开启 <code>output.enableInlineStyles</code> 选项后：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">enableInlineStyles</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">产物文件将变成：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>dist/html/main/index.html
</span></span><span style="display:block;padding:0 1.25rem">dist/static/js/main.js</span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">同时，<code>dist/static/css/style.css</code> 文件将被 inline 到 <code>index.html</code> 中：</p>
<div class="language-html"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-html" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">html</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">head</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">style</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span class="token style language-css">
</span></span><span style="display:block;padding:0 1.25rem"><span class="token style language-css">      </span><span class="token style language-css" style="color:var(--code-token-comment)">/* content of dist/static/css/style.css */</span><span class="token style language-css">
</span></span><span style="display:block;padding:0 1.25rem"><span class="token style language-css">    </span><span class="token" style="color:var(--code-token-punctuation)">&lt;/</span><span class="token" style="color:var(--code-token-function)">style</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">&lt;/</span><span class="token" style="color:var(--code-token-function)">head</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">body</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span class="token" style="color:var(--code-token-punctuation)">&lt;/</span><span class="token" style="color:var(--code-token-function)">body</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">&lt;/</span><span class="token" style="color:var(--code-token-function)">html</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="通过正则匹配" class="mt-10 mb-2 leading-7 text-xl title_3b154">通过正则匹配<a class="link_3b154 header-anchor" aria-hidden="true" href="#通过正则匹配">#</a></h3>
<p class="my-4 leading-7">当你需要内联产物中的一部分 CSS 文件时，你可以将 <code>enableInlineStyles</code> 设置为一个正则表达式，匹配需要内联的 CSS 文件的 URL。</p>
<p class="my-4 leading-7">比如，将产物中的 <code>main.css</code> 内联到 HTML 中，你可以添加如下配置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">enableInlineStyles</span><span class="token operator">:</span><span> </span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token regex-source language-regex" style="color:var(--code-token-keyword)">\/main\.\w+\.css$</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">生产环境的文件名中默认包含了一个 hash 值，比如 <code>static/css/main.18a568e5.css</code>。因此，在正则表达式中需要通过 <code>\w+</code> 来匹配 hash。
</p></div></div>
<h3 id="通过函数匹配" class="mt-10 mb-2 leading-7 text-xl title_3b154">通过函数匹配<a class="link_3b154 header-anchor" aria-hidden="true" href="#通过函数匹配">#</a></h3>
<p class="my-4 leading-7">你也可以将 <code>output.enableInlineStyles</code> 设置为一个函数，函数接收以下参数：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>name</code>：文件名，比如 <code>static/css/main.18a568e5.css</code>。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>size</code>：文件大小，单位为 byte。</li>
</ul>
<p class="my-4 leading-7">比如，我们希望内联小于 10KB 的资源，可以添加如下配置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-function)">enableInlineStyles</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter" style="color:var(--code-token-punctuation)">{</span><span class="token parameter"> size </span><span class="token parameter" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> size </span><span class="token operator">&lt;</span><span> </span><span class="token number">10</span><span> </span><span class="token operator">*</span><span> </span><span class="token number">1000</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputexternals" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.externals<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputexternals">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>string | object | function | RegExp</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>undefined</code></li>
</ul>
<p class="my-4 leading-7">在构建时，防止将代码中某些 <code>import</code> 的依赖包打包到 bundle 中，而是在运行时再去从外部获取这些依赖。</p>
<p class="my-4 leading-7">详情请见: <a href="https://webpack.docschina.org/configuration/externals/" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">webpack 外部扩展 (Externals)</a></p>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">将 <code>react-dom</code> 依赖从构建产物中剔除。为了在运行时获取这个模块, <code>react-dom</code> 的值将全局检索 <code>ReactDOM</code> 变量。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">externals</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;react-dom&#x27;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;ReactDOM&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">当构建 Web Worker 产物时，externals 将不会生效。这是因为 Worker 环境不支持通过访问全局变量。</p></div></div>
<h2 id="outputfilename" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.filename<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputfilename">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong></li>
</ul>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">FilenameConfig</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  js</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  css</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  svg</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  font</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  image</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  media</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong></li>
</ul>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">// 开发环境</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> devDefaultFilename </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">js</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">css</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].css&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">svg</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8].svg&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">font</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8][ext]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">image</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8][ext]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">media</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8][ext]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// 生产环境</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> prodDefaultFilename </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">js</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8].js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">css</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8].css&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">svg</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8].svg&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">font</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8][ext]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">image</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8][ext]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">media</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name].[contenthash:8][ext]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">设置构建产物的名称。</p>
<p class="my-4 leading-7">在生产环境构建后，会自动在文件名中间添加 hash 值，如果不需要添加，可以通过 <code>output.disableFilenameHash</code> 配置来禁用该行为。</p>
<p class="my-4 leading-7">下面是各个文件类型的说明：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>js</code>：表示 JavaScript 文件的名称。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>css</code>：表示 CSS 样式文件的名称。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>svg</code>：表示 SVG 图片的名称。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>font</code>：表示字体文件的名称。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>image</code>：表示非 SVG 图片的名称。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>media</code>：表示视频等媒体资源的名称。</li>
</ul>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">修改 JavaScript 文件的名称为 <code>[name]_script.js</code>：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">filename</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">js</span><span class="token operator">:</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;production&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          </span><span class="token operator">?</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name]_script.[contenthash:8].js&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          </span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[name]_script.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<div class="rspress-directive tip"><div class="rspress-directive-title">文件名中的 hash 值</div><div class="rspress-directive-content"><p class="my-4 leading-7">通常来说，我们只会在生产环境下设置文件名的 hash 值（即 <code>process.env.NODE_ENV === &#x27;production&#x27;</code> 时）。</p>
<p class="my-4 leading-7">如果你在开发环境下设置了文件名的 hash，那么可能会导致热更新不生效（尤其是 CSS 文件）。这是因为每次文件内容变化时，都会引起 hash 变化，导致 <a href="https://www.npmjs.com/package/mini-css-extract-plugin" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">mini-css-extract-plugin</a> 等工具无法读取到最新的文件内容。
</p></div></div>
<h3 id="异步模块的文件名" class="mt-10 mb-2 leading-7 text-xl title_3b154">异步模块的文件名<a class="link_3b154 header-anchor" aria-hidden="true" href="#异步模块的文件名">#</a></h3>
<p class="my-4 leading-7">当你在代码中通过 dynamic import 的方式引入模块时，该模块会被单独打包成一个文件，它默认的命名规则如下：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">在开发环境下会基于模块路径生成名称，比如 <code>dist/static/js/async/src_add_ts.js</code>。</li>
<li class="[&amp;:not(:first-child)]:mt-2">在生产环境下会是一个随机的数字 id，比如 <code>dist/static/js/async/798.27e3083e.js</code>，这是为了避免在生产环境中泄露源代码的路径，同时字符数也更少。</li>
</ul>
<div class="language-js"><div class="rspress-code-title">src/index.ts</div><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> add </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">await</span><span> </span><span class="token" style="color:var(--code-token-keyword)">import</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;./add.ts&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">如果你希望为异步模块指定一个固定的名称，可以通过打包工具提供的 <a href="https://webpack.js.org/api/module-methods/#magic-comments" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">magic comments</a> 来实现，通过 <code>webpackChunkName</code> 指定模块名称：</p>
<div class="language-js"><div class="rspress-code-title">src/index.ts</div><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> add </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">await</span><span> </span><span class="token" style="color:var(--code-token-keyword)">import</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-comment)">/* webpackChunkName: &quot;my-chunk-name&quot; */</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./add.ts&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">通过以上写法指定模块名称后，生成的文件会是 <code>dist/static/js/async/my-chunk-name.js</code>。</p>
<h2 id="outputlegalcomments" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.legalComments<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputlegalcomments">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>&#x27;linked&#x27; | &#x27;inline&#x27; | &#x27;none&#x27;</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>&#x27;linked&#x27;</code></li>
</ul>
<p class="my-4 leading-7">配置 legal comment 的处理方式。</p>
<p class="my-4 leading-7">legal comment 是 JS 或 CSS 文件中的一些特殊注释，这些注释包含 <code>@license</code> 或 <code>@preserve</code>，或是以 <code>//!</code> 开头。默认情况下，这些注释保留在输出文件中，因为这遵循了代码原作者的意图。</p>
<p class="my-4 leading-7">你可以通过 <code>legalComments</code> 来配置相关行为：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>linked</code>：将所有 legal comments 移至 .LEGAL.txt 文件并通过注释链接到它们。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>inline</code>：保留所有 legal comments。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>none</code>：移除所有 legal comments。</li>
</ul>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">移除所有 legal comments。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">legalComments</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;none&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputoverridebrowserslist" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.overrideBrowserslist<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputoverridebrowserslist">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>string[] | Record&lt;BuilderTarget, string[]&gt;</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>undefined</code></li>
</ul>
<p class="my-4 leading-7">指定项目兼容的目标浏览器范围。该值会被 <a href="https://babeljs.io/docs/en/babel-preset-env" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">@babel/preset-env</a> 和 <a href="https://github.com/postcss/autoprefixer" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">autoprefixer</a> 用来确定需要转换的 JavaScript 语法特性和需要添加的 CSS 浏览器前缀。</p>
<h4 id="优先级" class="mt-8 leading-6 text-base title_3b154">优先级<a class="link_3b154 header-anchor" aria-hidden="true" href="#优先级">#</a></h4>
<p class="my-4 leading-7"><code>overrideBrowserslist</code> 配置的优先级高于项目中的 <code>.browserslistrc</code> 配置文件和 package.json 中的 <code>browserslist</code> 字段。</p>
<p class="my-4 leading-7">大多数场景下，推荐优先使用 <code>.browserslistrc</code> 文件，而不是使用 <code>overrideBrowserslist</code> 配置。因为 <code>.browserslistrc</code> 文件是官方定义的配置文件，通用性更强，可以被社区中的其他库识别。</p>
<h4 id="默认值" class="mt-8 leading-6 text-base title_3b154">默认值<a class="link_3b154 header-anchor" aria-hidden="true" href="#默认值">#</a></h4>
<p class="my-4 leading-7">如果项目中没有定义任何 <code>browserslist</code> 相关的配置，也没有定义 <code>overrideBrowserslist</code>，那么 Builder 会设置默认值为：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;&gt; 0.01%&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;not dead&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;not op_mini all&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="示例" class="mt-10 mb-2 leading-7 text-xl title_3b154">示例<a class="link_3b154 header-anchor" aria-hidden="true" href="#示例">#</a></h3>
<p class="my-4 leading-7">下面是兼容移动端 H5 场景的示例：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">overrideBrowserslist</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-string)">&#x27;iOS &gt;= 9&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-string)">&#x27;Android &gt;= 4.4&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-string)">&#x27;last 2 versions&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-string)">&#x27;&gt; 0.2%&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-string)">&#x27;not dead&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">可以查看 <a href="https://github.com/browserslist/browserslist" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">browserslist 文档</a> 来了解如何自定义浏览器范围。</p>
<h4 id="根据产物类型设置" class="mt-8 leading-6 text-base title_3b154">根据产物类型设置<a class="link_3b154 header-anchor" aria-hidden="true" href="#根据产物类型设置">#</a></h4>
<p class="my-4 leading-7">当你同时构建多种类型的产物时，你可以为不同的产物类型设置不同的目标浏览器范围。此时，你需要把 <code>overrideBrowserslist</code> 设置为一个对象，对象的 key 为对应的产物类型。</p>
<p class="my-4 leading-7">比如为 <code>web</code> 和 <code>node</code> 设置不同的范围：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">overrideBrowserslist</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">web</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&#x27;iOS &gt;= 9&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&#x27;Android &gt;= 4.4&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&#x27;last 2 versions&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&#x27;&gt; 0.2%&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&#x27;not dead&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token literal-property" style="color:var(--code-token-parameter)">node</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-string)">&#x27;node &gt;= 14&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="outputpolyfill" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.polyfill<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputpolyfill">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>&#x27;entry&#x27; | &#x27;usage&#x27; | &#x27;ua&#x27; | &#x27;off&#x27;</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>&#x27;entry&#x27;</code></li>
</ul>
<p class="my-4 leading-7">通过 <code>output.polyfill</code> 你可以配置 Polyfill 的注入方式。</p>
<h3 id="配置项" class="mt-10 mb-2 leading-7 text-xl title_3b154">配置项<a class="link_3b154 header-anchor" aria-hidden="true" href="#配置项">#</a></h3>
<h4 id="entry" class="mt-8 leading-6 text-base title_3b154">entry<a class="link_3b154 header-anchor" aria-hidden="true" href="#entry">#</a></h4>
<p class="my-4 leading-7">当 <code>output.polyfill</code> 配置为 <code>&#x27;entry&#x27;</code> 时，会在每个入口文件中注入 Polyfill。</p>
<p class="my-4 leading-7">等价于 <code>@babel/preset-env</code> 的 <code>useBuiltIns: &#x27;entry&#x27;</code> 配置。</p>
<h4 id="usage" class="mt-8 leading-6 text-base title_3b154">usage<a class="link_3b154 header-anchor" aria-hidden="true" href="#usage">#</a></h4>
<p class="my-4 leading-7">当 <code>output.polyfill</code> 配置为 <code>&#x27;usage&#x27;</code> 时，会在每个文件中根据代码中使用的 API 注入 Polyfill。</p>
<p class="my-4 leading-7">等价于 <code>@babel/preset-env</code> 的 <code>useBuiltIns: &#x27;usage&#x27;</code> 配置。</p>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">在使用 Rspack 作为打包工具时，暂不支持 <code>usage</code> 配置项。
</p></div></div>
<h4 id="ua" class="mt-8 leading-6 text-base title_3b154">ua<a class="link_3b154 header-anchor" aria-hidden="true" href="#ua">#</a></h4>
<p class="my-4 leading-7">根据当前请求的 UA 信息，动态下发 Polyfill 代码。</p>
<p class="my-4 leading-7">动态下发能力需要与上层框架结合使用，详情可参考 <a href="https://modernjs.dev/guides/advanced-features/compatibility.html#%E8%BF%90%E8%A1%8C%E6%97%B6%E6%8C%89%E9%9C%80-polyfill" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">Modern.js - 运行时按需 Polyfill</a>。</p>
<h4 id="off" class="mt-8 leading-6 text-base title_3b154">off<a class="link_3b154 header-anchor" aria-hidden="true" href="#off">#</a></h4>
<p class="my-4 leading-7">不注入 Polyfill。使用此选项时，需要自行保证代码的兼容性。</p>
<h2 id="outputsvgdefaultexport" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">output.svgDefaultExport<a class="link_3b154 header-anchor" aria-hidden="true" href="#outputsvgdefaultexport">#</a></h2>
<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">类型：</strong> <code>&#x27;url&#x27; | &#x27;component&#x27;</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">默认值：</strong> <code>&#x27;url&#x27;</code></li>
</ul>
<p class="my-4 leading-7"><code>output.svgDefaultExport</code> 可以用来配置 SVG 文件的默认导出。</p>
<p class="my-4 leading-7">当 <code>output.svgDefaultExport</code> 配置为 <code>url</code> 时，SVG 文件的默认导出是文件的 URL。例如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> logo </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./logo.svg&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>logo</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> </span><span class="token" style="color:var(--code-token-comment)">// =&gt; 资源 url</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">当 <code>output.svgDefaultExport</code> 配置为 <code>component</code> 时，SVG 文件的默认导出是文件的 React 组件。例如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> Logo </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./logo.svg&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>Logo</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> </span><span class="token" style="color:var(--code-token-comment)">// =&gt; React 组件</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">此时，你也可以通过指定 <code>?url</code> 的 query 来导入 url，比如：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> logo </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./logo.svg?url&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>logo</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> </span><span class="token" style="color:var(--code-token-comment)">// =&gt; 资源 url</span></span></code></pre><button class="copy"></button></div></div><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/document/builder-doc/docs/zh/api/config-output.mdx" target="_blank" class="editLink_2a169">Edit this page on GitHub</a></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"><a class="link_03735 pager-link_e7091 cursor-pointer" target="" href="/builder/api/config-dev.html"><span class="desc_e7091">上一页</span><span class="title_e7091">Dev Config</span></a></div><div class="next_e7091 flex flex-col"><a class="link_03735 pager-link_e7091 next_e7091 cursor-pointer" target="" href="/builder/api/config-tools.html"><span class="desc_e7091">下一页</span><span class="title_e7091">Tools Config</span></a></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">目录</div><nav class="mt-1"><ul class="relative"><li><a href="#outputassetprefix" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.assetPrefix</span></a></li><li><a href="#示例" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#与原生配置的区别" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">与原生配置的区别</span></a></li><li><a href="#outputassetsretry" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.assetsRetry</span></a></li><li><a href="#assetsretrydomain" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">assetsRetry.domain</span></a></li><li><a href="#assetsretrytype" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">assetsRetry.type</span></a></li><li><a href="#assetsretrymax" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">assetsRetry.max</span></a></li><li><a href="#assetsretrytest" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">assetsRetry.test</span></a></li><li><a href="#assetsretrycrossorigin" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">assetsRetry.crossOrigin</span></a></li><li><a href="#assetsretryonretry" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">assetsRetry.onRetry</span></a></li><li><a href="#assetsretryonsuccess" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">assetsRetry.onSuccess</span></a></li><li><a href="#assetsretryonfail" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">assetsRetry.onFail</span></a></li><li><a href="#assetsretryinlinescript" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">assetsRetry.inlineScript</span></a></li><li><a href="#注意事项" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">注意事项</span></a></li><li><a href="#使用限制" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">使用限制</span></a></li><li><a href="#微前端应用" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">微前端应用</span></a></li><li><a href="#动态-import-资源" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">动态 import 资源</span></a></li><li><a href="#自定义模版中的资源" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">自定义模版中的资源</span></a></li><li><a href="#outputcharset" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.charset</span></a></li><li><a href="#outputcleandistpath" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.cleanDistPath</span></a></li><li><a href="#outputconverttorem" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.convertToRem</span></a></li><li><a href="#boolean-类型" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">Boolean 类型</span></a></li><li><a href="#object-类型" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">Object 类型</span></a></li><li><a href="#示例-1" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputcopy" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.copy</span></a></li><li><a href="#outputcssmodules" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.cssModules</span></a></li><li><a href="#cssmodulesauto" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">cssModules.auto</span></a></li><li><a href="#cssmodulesexportlocalsconvention" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">cssModules.exportLocalsConvention</span></a></li><li><a href="#outputcssmodulelocalidentname" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.cssModuleLocalIdentName</span></a></li><li><a href="#默认值" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">默认值</span></a></li><li><a href="#模板字符串" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">模板字符串</span></a></li><li><a href="#示例-2" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputdataurilimit" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.dataUriLimit</span></a></li><li><a href="#示例-3" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputdisablecssextract" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.disableCssExtract</span></a></li><li><a href="#示例-4" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputdisablecssmoduleextension" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.disableCssModuleExtension</span></a></li><li><a href="#示例-5" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#规则" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">规则</span></a></li><li><a href="#未开启-disablecssmoduleextension默认" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">未开启 disableCssModuleExtension（默认）</span></a></li><li><a href="#开启-disablecssmoduleextension" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">开启 disableCssModuleExtension</span></a></li><li><a href="#outputdistpath" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.distPath</span></a></li><li><a href="#根目录" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">根目录</span></a></li><li><a href="#示例-6" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputdisableminimize" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.disableMinimize</span></a></li><li><a href="#outputdisablesourcemap" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.disableSourceMap</span></a></li><li><a href="#outputdisablesvgr" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.disableSvgr</span></a></li><li><a href="#outputdisabletschecker" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.disableTsChecker</span></a></li><li><a href="#阻塞编译" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">阻塞编译</span></a></li><li><a href="#示例-7" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputdisablefilenamehash" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.disableFilenameHash</span></a></li><li><a href="#示例-8" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputdisableinlineruntimechunk" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.disableInlineRuntimeChunk</span></a></li><li><a href="#禁用内联" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">禁用内联</span></a></li><li><a href="#合并到页面文件中" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">合并到页面文件中</span></a></li><li><a href="#outputenableassetmanifest" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.enableAssetManifest</span></a></li><li><a href="#示例-9" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputenableassetfallback" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.enableAssetFallback</span></a></li><li><a href="#示例-10" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputenablelatestdecorators" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.enableLatestDecorators</span></a></li><li><a href="#outputenablecssmoduletsdeclaration" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.enableCssModuleTSDeclaration</span></a></li><li><a href="#example" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">Example</span></a></li><li><a href="#outputenableinlinescripts" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.enableInlineScripts</span></a></li><li><a href="#示例-11" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#通过正则匹配" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">通过正则匹配</span></a></li><li><a href="#通过函数匹配" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">通过函数匹配</span></a></li><li><a href="#outputenableinlinestyles" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.enableInlineStyles</span></a></li><li><a href="#示例-12" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#通过正则匹配-1" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">通过正则匹配</span></a></li><li><a href="#通过函数匹配-1" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">通过函数匹配</span></a></li><li><a href="#outputexternals" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.externals</span></a></li><li><a href="#示例-13" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputfilename" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.filename</span></a></li><li><a href="#示例-14" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#异步模块的文件名" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">异步模块的文件名</span></a></li><li><a href="#outputlegalcomments" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.legalComments</span></a></li><li><a href="#示例-15" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#outputoverridebrowserslist" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.overrideBrowserslist</span></a></li><li><a href="#优先级" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">优先级</span></a></li><li><a href="#默认值-1" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">默认值</span></a></li><li><a href="#示例-16" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">示例</span></a></li><li><a href="#根据产物类型设置" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">根据产物类型设置</span></a></li><li><a href="#outputpolyfill" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.polyfill</span></a></li><li><a href="#配置项" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">配置项</span></a></li><li><a href="#entry" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">entry</span></a></li><li><a href="#usage" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">usage</span></a></li><li><a href="#ua" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">ua</span></a></li><li><a href="#off" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">off</span></a></li><li><a href="#outputsvgdefaultexport" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">output.svgDefaultExport</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div><div id="search-container"></div></body></html>