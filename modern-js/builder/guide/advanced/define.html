<!doctype html><html  lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title data-rh="true">环境变量 - Modern.js Builder</title><meta data-rh="true" name="description" content="基于 Rspack 的 Web 构建工具"/>
<script id="check-dark-light">
;(() => {
  const saved = localStorage.getItem('rspress-theme-appearance')
  const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
  if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
    document.documentElement.classList.add('dark')
  }
})()
</script>
<link rel="icon" href="https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/logo-1x-0104.png"><script defer="defer">!function(){var s,t,a,c,e,n,i,j,r,l,o,f,d,y,b={},u={};function p(s){var t=u[s];if(void 0!==t)return t.exports;var a=u[s]={id:s,loaded:!1,exports:{}};return b[s](a,a.exports,p),a.loaded=!0,a.exports}p.m=b,p.es=function(s,t){return Object.keys(s).forEach((function(a){"default"!==a&&!Object.prototype.hasOwnProperty.call(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:function(){return s[a]}})})),s},s={10034:["2099"],11562:["9734"],13020:["8144"],15240:["263"],17761:["lib-lodash","lib-polyfill","5322","792"],18053:["1401"],18248:["6147"],19304:["6952"],19634:["723"],19651:["8404"],1979:["213"],19820:["1912"],20079:["9930"],20413:["483"],20735:["6477"],22014:["407"],24777:["6628"],25076:["2854"],25607:["7458"],26489:["9603"],26840:["2892"],27168:["4095"],27973:["lib-lodash","lib-polyfill","5322","9947"],28713:["lib-lodash","lib-polyfill","5322","5596"],29664:["lib-lodash","lib-polyfill","5322","9844"],29699:["2422"],30534:["8674"],31035:["9018"],31291:["4276"],32024:["5471"],32958:["4326"],33034:["7486"],33146:["lib-lodash","lib-polyfill","5322","9073"],33654:["3891"],33819:["2560"],34757:["5560"],35193:["3131"],36838:["7135"],38046:["1547"],38970:["7329"],39519:["7112"],39546:["6300"],39601:["4079"],39711:["3414"],39912:["4259"],39985:["lib-lodash","lib-polyfill","5322","6480"],40619:["1171"],40814:["5599"],41003:["543"],424:["7703"],43642:["5930"],43713:["2511"],4450:["6045"],4482:["1096"],45094:["5314"],45289:["5182"],46344:["lib-lodash","lib-polyfill","5322","6301"],47439:["4505"],47531:["3636"],47900:["7045"],4910:["lib-lodash","lib-polyfill","5322","8169"],49748:["141"],50366:["2338"],50573:["8400"],51473:["lib-lodash","lib-polyfill","5322","8483"],52167:["5260"],52518:["lib-lodash","lib-polyfill","5322","3336"],54171:["190"],55351:["8452"],55573:["4416"],55733:["2486"],55954:["3941"],56308:["lib-lodash","lib-polyfill","5322","4927"],57592:["lib-lodash","lib-polyfill","5322","8251"],58041:["6511"],59726:["4323"],60237:["9968"],62030:["2771"],62140:["7368"],62319:["597"],64830:["4207"],66909:["363"],68868:["3594"],69967:["2152"],70236:["6535"],72533:["745"],72782:["3741"],73691:["lib-lodash","lib-polyfill","5322","150"],73812:["5978"],7480:["3160"],75018:["296"],75906:["lib-lodash","lib-polyfill","5322","2767"],78310:["3779"],78609:["4405"],80608:["5605"],8076:["lib-lodash","lib-polyfill","5322","4444"],80782:["3404"],81128:["7234"],8178:["328"],82308:["3090"],83681:["7022"],84161:["2414"],85149:["4989"],85421:["6507"],86717:["4299"],87064:["4350"],87392:["7833"],87611:["8959"],87617:["2332"],88454:["6396"],9051:["2120"],90612:["4359"],91198:["6409"],92137:["lib-lodash","lib-polyfill","5322","9047"],93920:["1861"],93926:["lib-lodash","lib-polyfill","5322","2480"],96885:["8914"],97033:["8265"],97498:["912"],98608:["lib-lodash","lib-polyfill","5322","9643"],99006:["3348"],99012:["4747"],99439:["3350"],995:["4735"]},p.el=function(t){var a=s[t];return void 0===a?Promise.resolve():a.length>1?Promise.all(a.map(p.e)):p.e(a[0])},p.f={},p.e=function(s){return Promise.all(Object.keys(p.f).reduce((function(t,a){return p.f[a](s,t),t}),[]))},p.p="/builder/",p.u=function(s){return{1096:"static/js/async/1096.e510e2de.js",1171:"static/js/async/1171.bb9186ec.js",1401:"static/js/async/1401.cba6e5a9.js",141:"static/js/async/141.7551219b.js",150:"static/js/async/150.f0209e5d.js",1547:"static/js/async/1547.74fea91c.js",1861:"static/js/async/1861.ecb0f0e8.js",190:"static/js/async/190.6b79bfb9.js",1912:"static/js/async/1912.4b8d863e.js",2099:"static/js/async/2099.7fc8b2fb.js",2120:"static/js/async/2120.7ace3d1c.js",213:"static/js/async/213.b17ece8d.js",2152:"static/js/async/2152.8c142344.js",2332:"static/js/async/2332.c730cae6.js",2338:"static/js/async/2338.91ca1cfd.js",2414:"static/js/async/2414.2b88b0f4.js",2422:"static/js/async/2422.d1f11f95.js",2480:"static/js/async/2480.17e82564.js",2486:"static/js/async/2486.55a6b016.js",2511:"static/js/async/2511.ef7b2fe0.js",2560:"static/js/async/2560.6f4681ed.js",263:"static/js/async/263.1cb81b97.js",2767:"static/js/async/2767.db5d00e1.js",2771:"static/js/async/2771.eee099db.js",2854:"static/js/async/2854.c728c328.js",2892:"static/js/async/2892.04f24542.js",296:"static/js/async/296.bd9223a6.js",3090:"static/js/async/3090.72009b7a.js",3131:"static/js/async/3131.6904a5da.js",3160:"static/js/async/3160.254d3b61.js",328:"static/js/async/328.1576c282.js",3336:"static/js/async/3336.5bb400b0.js",3348:"static/js/async/3348.f1d29105.js",3350:"static/js/async/3350.c8157e52.js",3404:"static/js/async/3404.645fdf6e.js",3414:"static/js/async/3414.c2e5e5bc.js",3594:"static/js/async/3594.18f102af.js",363:"static/js/async/363.17dc871d.js",3636:"static/js/async/3636.58f3b9d9.js",3741:"static/js/async/3741.d253d6a5.js",3779:"static/js/async/3779.3543e6fa.js",3891:"static/js/async/3891.c2ba4923.js",3941:"static/js/async/3941.d76dd7db.js",407:"static/js/async/407.3b770a1c.js",4079:"static/js/async/4079.6f51a7d1.js",4095:"static/js/async/4095.dfd0f6b5.js",4207:"static/js/async/4207.990db237.js",4259:"static/js/async/4259.7d06c3a3.js",4276:"static/js/async/4276.1e82c277.js",4299:"static/js/async/4299.7e41df70.js",4323:"static/js/async/4323.5e2764f8.js",4326:"static/js/async/4326.a364d297.js",4350:"static/js/async/4350.71eb7c7d.js",4359:"static/js/async/4359.c42e80a7.js",4405:"static/js/async/4405.79319710.js",4416:"static/js/async/4416.56464119.js",4444:"static/js/async/4444.c5d42ff7.js",4505:"static/js/async/4505.bd37309a.js",4735:"static/js/async/4735.019d3d27.js",4747:"static/js/async/4747.8d91a417.js",483:"static/js/async/483.ffae568a.js",4927:"static/js/async/4927.87224b27.js",4989:"static/js/async/4989.7b24754d.js",5182:"static/js/async/5182.6389de1e.js",5260:"static/js/async/5260.4ddf2b53.js",5314:"static/js/async/5314.4aed903d.js",543:"static/js/async/543.4ff1fe2e.js",5471:"static/js/async/5471.987db1a7.js",5560:"static/js/async/5560.2cb373c8.js",5596:"static/js/async/5596.a8607c74.js",5599:"static/js/async/5599.8e319f5a.js",5605:"static/js/async/5605.804fa46d.js",5930:"static/js/async/5930.490a3890.js",597:"static/js/async/597.72c541fe.js",5978:"static/js/async/5978.fbcce0d8.js",6045:"static/js/async/6045.ae8f78a5.js",6147:"static/js/async/6147.468b3648.js",6300:"static/js/async/6300.92e01e7b.js",6301:"static/js/async/6301.8fddf2ff.js",6396:"static/js/async/6396.bab9e0d8.js",6409:"static/js/async/6409.cfff19ab.js",6477:"static/js/async/6477.235777c5.js",6480:"static/js/async/6480.59b20c1b.js",6507:"static/js/async/6507.c0769f73.js",6511:"static/js/async/6511.4605c6e5.js",6535:"static/js/async/6535.be59c991.js",6628:"static/js/async/6628.5cef3e5a.js",6952:"static/js/async/6952.f4313b17.js",7022:"static/js/async/7022.93e1ba93.js",7045:"static/js/async/7045.b6390284.js",7112:"static/js/async/7112.24e092c4.js",7135:"static/js/async/7135.2b733b2c.js",723:"static/js/async/723.8b088e50.js",7234:"static/js/async/7234.7e1d8572.js",7329:"static/js/async/7329.525bbd9c.js",7368:"static/js/async/7368.5d2fdbf6.js",745:"static/js/async/745.eff5e009.js",7458:"static/js/async/7458.d37244da.js",7486:"static/js/async/7486.98daed6f.js",7703:"static/js/async/7703.79259240.js",7833:"static/js/async/7833.daeece82.js",792:"static/js/async/792.1904546b.js",8144:"static/js/async/8144.7178e072.js",8169:"static/js/async/8169.d312adde.js",8251:"static/js/async/8251.c58840e2.js",8265:"static/js/async/8265.9ac7f260.js",8400:"static/js/async/8400.f9f6bb88.js",8404:"static/js/async/8404.0ef24b5d.js",8452:"static/js/async/8452.677eda1f.js",8483:"static/js/async/8483.1ea1999c.js",8674:"static/js/async/8674.c51d0322.js",8914:"static/js/async/8914.bc9a2f60.js",8959:"static/js/async/8959.deea28b0.js",9018:"static/js/async/9018.60fe892f.js",9047:"static/js/async/9047.48c933fd.js",9073:"static/js/async/9073.a7600d59.js",912:"static/js/async/912.92b22521.js",9603:"static/js/async/9603.a27d1d6c.js",9643:"static/js/async/9643.5da27565.js",9734:"static/js/async/9734.f0d23553.js",9844:"static/js/async/9844.6acd8817.js",9930:"static/js/async/9930.025eaa1a.js",9947:"static/js/async/9947.22aed312.js",9968:"static/js/async/9968.a092c4cd.js"}[s]},p.k=function(s){return{3941:"static/css/async/3941.fcb10d1e.css",4989:"static/css/async/4989.fcb10d1e.css",6301:"static/css/async/6301.fcb10d1e.css",9047:"static/css/async/9047.fcb10d1e.css"}[s]},t={},p.l=function(s,a,c,e){if(t[s])t[s].push(a);else{if(void 0!==c)for(var n,i,j=document.getElementsByTagName("script"),r=0;r<j.length;r++){var l=j[r];if(l.getAttribute("src")==s){n=l;break}}!n&&(i=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,n.src=s),t[s]=[a];var o=function(a,c){n.onerror=n.onload=null,clearTimeout(f);var e=t[s];if(delete t[s],n.parentNode&&n.parentNode.removeChild(n),e&&e.forEach((function(s){return s(c)})),a)return a(c)},f=setTimeout(o.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=o.bind(null,n.onerror),n.onload=o.bind(null,n.onload),i&&document.head.appendChild(n)}},p.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},a=[],p.O=function(s,t,c,e){if(!t){var n=1/0;for(l=0;l<a.length;l++){t=a[l][0],c=a[l][1],e=a[l][2];for(var i=!0,j=0;j<t.length;j++)n>=e&&Object.keys(p.O).every((function(s){return p.O[s](t[j])}))?t.splice(j--,1):(i=!1,e<n&&(n=e));if(i){a.splice(l--,1);var r=c()}}return r}e=e||0;for(var l=a.length;l>0&&a[l-1][2]>e;l--)a[l]=a[l-1];a[l]=[t,c,e]},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(s){if("object"==typeof window)return window}}(),p.d=function(s,t){for(var a in t)p.o(t,a)&&!p.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:t[a]})},p.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},p.n=function(s){return s&&s.__esModule?s.default:s},e=Object.getPrototypeOf?function(s){return Object.getPrototypeOf(s)}:function(s){return s.__proto__},p.t=function(s,t){if(1&t&&(s=this(s)),8&t||"object"==typeof s&&s&&(4&t&&s.__esModule||16&t&&"function"==typeof s.then))return s;var a=Object.create(null);p.r(a);var n={};c=c||[null,e({}),e([]),e(e)];for(var i=2&t&&s;"object"==typeof i&&!~c.indexOf(i);i=e(i))Object.getOwnPropertyNames(i).forEach((function(t){n[t]=function(){return s[t]}}));return n.default=function(){return s},p.d(a,n),a},p.nmd=function(s){return s.paths=[],!s.children&&(s.children=[]),s},n={"builder-runtime":0,"lib-lodash":0,"lib-polyfill":0,"lib-react":0,"lib-router":0,main:0},i="webpack",j="data-webpack-loading",r=function(s,t,a,c){var e,n,r="chunk-"+s;if(!c){for(var l=document.getElementsByTagName("link"),o=0;o<l.length;o++){var f=l[o],d=f.getAttribute("href")||f.href;if(d&&!d.startsWith(p.p)&&(d=p.p+(d.startsWith("/")?d.slice(1):d)),"stylesheet"==f.rel&&(d&&d.startsWith(t)||f.getAttribute("data-webpack")==i+":"+r)){e=f;break}}if(!a)return e}!e&&(n=!0,(e=document.createElement("link")).setAttribute("data-webpack",i+":"+r),e.setAttribute(j,1),e.rel="stylesheet",e.href=t);var y=function(s,t){if(e.onerror=e.onload=null,e.removeAttribute(j),clearTimeout(b),t&&"load"!=t.type&&e.parentNode.removeChild(e),a(t),s)return s(t)};if(e.getAttribute(j)){var b=setTimeout(y.bind(null,void 0,{type:"timeout",target:e}),12e4);e.onerror=y.bind(null,e.onerror),e.onload=y.bind(null,e.onload)}else y(void 0,{type:"load",target:e});return c?c.parentNode.insertBefore(e,c):n&&document.head.appendChild(e),e},p.f.css=function(s,t){var a=p.o(n,s)?n[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["3941","4989","5322","6301","7685","9047"].indexOf(s)>-1){var c=new Promise((function(t,c){a=n[s]=[t,c]}));t.push(a[2]=c);var e=p.p+p.k(s),i=Error();r(s,e,(function(t){if(p.o(n,s)&&(0!==(a=n[s])&&(n[s]=void 0),a))if("load"!==t.type){var c=t&&t.type,e=t&&t.target&&t.target.src;i.message="Loading css chunk "+s+" failed.\n("+c+": "+e+")",i.name="ChunkLoadError",i.type=c,i.request=e,a[1](i)}else a[0]()}))}else n[s]=0},l=function(s,t){var a=t[0];s&&s(t);for(var c=0;c<a.length;c++)void 0===n[a[c]]&&(n[a[c]]=0)},(o=self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o)),f={"builder-runtime":0},p.f.j=function(s,t){var a=p.o(f,s)?f[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["1096","1171","1401","141","150","1547","1861","190","1912","2099","2120","213","2152","2332","2338","2414","2422","2480","2486","2511","2560","263","2767","2771","2854","2892","296","3090","3131","3160","328","3336","3348","3350","3404","3414","3594","363","3636","3741","3779","3891","3941","407","4079","4095","4207","4259","4276","4299","4323","4326","4350","4359","4405","4416","4444","4505","4735","4747","483","4927","4989","5182","5260","5314","5322","543","5471","5560","5596","5599","5605","5930","597","5978","6045","6147","6300","6301","6396","6409","6477","6480","6507","6511","6535","6628","6952","7022","7045","7112","7135","723","7234","7329","7368","745","7458","7486","7685","7703","7833","792","8144","8169","8251","8265","8400","8404","8452","8483","8674","8914","8959","9018","9047","9073","912","9603","9643","9734","9844","9930","9947","9968","lib-lodash","lib-polyfill","lib-react","lib-router","main"].indexOf(s)>-1){var c=new Promise((function(t,c){a=f[s]=[t,c]}));t.push(a[2]=c);var e=p.p+p.u(s),n=Error();p.l(e,(function(t){if(p.o(f,s)&&(0!==(a=f[s])&&(f[s]=void 0),a)){var c=t&&("load"===t.type?"missing":t.type),e=t&&t.target&&t.target.src;n.message="Loading chunk "+s+" failed.\n("+c+": "+e+")",n.name="ChunkLoadError",n.type=c,n.request=e,a[1](n)}}),"chunk-"+s,s)}else f[s]=0},p.O.j=function(s){return 0===f[s]},d=function(s,t){var a,c,e=t[0],n=t[1],i=t[2],j=0;if(e.some((function(s){return 0!==f[s]}))){for(a in n)p.o(n,a)&&(p.m[a]=n[a]);if(i)var r=i(p)}for(s&&s(t);j<e.length;j++)c=e[j],p.o(f,c)&&f[c]&&f[c][0](),f[c]=0;return p.O(r)},(y=self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).forEach(d.bind(null,0)),y.push=d.bind(null,y.push.bind(y))}()</script><script defer="defer" src="/builder/static/js/lib-lodash.d03cdd43.js"></script><script defer="defer" src="/builder/static/js/lib-polyfill.e26d665d.js"></script><script defer="defer" src="/builder/static/js/lib-react.638a6f8b.js"></script><script defer="defer" src="/builder/static/js/lib-router.24b565c8.js"></script><script defer="defer" src="/builder/static/js/5322.37c943c5.js"></script><script defer="defer" src="/builder/static/js/7685.939b7ef7.js"></script><script defer="defer" src="/builder/static/js/main.6df576de.js"></script><link href="/builder/static/css/5322.fa88e239.css" rel="stylesheet"><link href="/builder/static/css/7685.b15d2265.css" rel="stylesheet"></head><body ><div id="root"><div><div class="navContainer_1719c sticky rspress-nav px-6 "><div class="container_1719c flex justify-between items-center h-full"><div class="undefined"><a href="/builder/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>Modern.js Builder</span></a></div><div class="undefined flex flex-1 justify-end items-center"><div class="rightNav_1719c"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="navSearchButton_b68d7"><button><svg width="18" height="24" viewBox="0 0 32 32" hight="18"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_b68d7">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_b68d7"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_2625c  cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="singleItem_1719c activeItem_1719c text-sm font-medium mx-1.5 px-3 py-2 flex items-center">指南</div></a><a class="link_2625c  cursor-pointer" target="" href="/builder/api/index.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a><a class="link_2625c  cursor-pointer" target="" href="/builder/plugins/introduction.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">插件</div></a></div><div class="flex-center flex-row"><div class="translation menu-item_1719c flex text-sm font-bold items-center px-3 py-2"><div><div class="relative flex-center h-14"><button class="nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><span class="text-sm font-medium flex" style="margin-right:2px"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div class="nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:2rem;background:var(--rp-c-bg)"><div><div class="rounded-2xl my-1 flex" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><span class="text-brand">简体中文</span></div></div><div><div class="font-medium my-1"><a class="link_2625c  cursor-pointer" target="" href="/builder/en/guide/advanced/define.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>English</span></div></div></a></div></div></div></div></div></div></div><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg></div></div></div><div class="social-links menu-item_c942e flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_c942e"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div><div class="mobileNavMenu_1719c"><div class="navScreen_798af " id="navScreen"><div class="container_798af"><div class="navMenu_798af"><div class="navMenuItem_798af w-full"><a class="link_2625c  cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="singleItem_1719c activeItem_1719c text-sm font-medium mx-1.5 px-3 py-2 flex items-center">指南</div></a></div><div class="navMenuItem_798af w-full"><a class="link_2625c  cursor-pointer" target="" href="/builder/api/index.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a></div><div class="navMenuItem_798af w-full"><a class="link_2625c  cursor-pointer" target="" href="/builder/plugins/introduction.html"><div class="singleItem_1719c  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">插件</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_798af flex justify-center"></div><div class="undefined flex text-sm font-bold justify-center"><div class="mx-1.5 my-1"><div class=" navScreenMenuGroup_798af relative"><button class="button_798af"><span class="buttonSpan_798af"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" down_798af "><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div><div class="items_798af"><div><div class="p-1 text-center"><span class="text-brand">简体中文</span></div></div><div><div class="py-1 font-medium"><a class="link_2625c  cursor-pointer" target="" href="/builder/en/guide/advanced/define.html"><div><div class="flex justify-center"><span>English</span></div></div></a></div></div></div></div></div></div></div><div class="social-links menu-item_c942e flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_c942e"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div></div><button class=" navHamburger_19e92 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_c7b5e pt-0"><div class="rspress-sidebar-menu"><button class="flex-center"><div class="text-md mr-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span class="text-sm">Menu</span></button></div><aside class="sidebar_82695 rspress-sidebar "><div class="navTitleMask_82695"><div class="undefined"><a href="/builder/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>Modern.js Builder</span></a></div></div><div class="mt-1 sidebarContent_82695"><div class="rspress-scrollbar" style="max-height:calc(100vh - var(--rp-nav-height) - 8px);overflow:scroll"><nav class="pb-2"><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_82695" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">开始</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">介绍</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/quick-start.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">快速上手</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/glossary.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">名词解释</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/features.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">功能导航</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_82695" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">基础</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/builder-config.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Builder 配置项</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/build-target.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">构建产物类型</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/output-files.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">构建产物目录</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/css-usage.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用样式资源</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/static-assets.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用静态资源</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/svg-assets.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用 SVG 资源</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/json-files.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用 JSON 文件</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/wasm-assets.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用 Wasm 资源</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/html-template.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">配置 HTML 模板</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/css-modules.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 CSS Modules</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/typescript.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 TypeScript</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/basic/builder-cli.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 Builder CLI</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_82695" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">进阶</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/rspack-start.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 Rspack</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/alias.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">路径别名</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/define.html"><div class="menuItemActive_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0;color:var(--rp-c-brand)">环境变量</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/hmr.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">模块热更新</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/rem.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">开启 REM 适配</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/browserslist.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">设置浏览器范围</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/browser-compatibility.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">浏览器兼容性</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/custom-webpack-config.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">修改 webpack 配置</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/source-build.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">源码构建模式</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/advanced/storybook.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 Storybook</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_82695" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">框架</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/framework/vue3.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">构建 Vue 3 应用</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/framework/vue2.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">构建 Vue 2 应用</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_82695" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">优化</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/optimization/optimize-bundle.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">产物体积优化</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/optimization/build-performance.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">提升构建性能</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/optimization/split-chunk.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">拆包最佳实践</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/optimization/inline-assets.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">静态资源内联</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_82695" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">调试</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/debug/debug-mode.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">开启调试模式</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/debug/inspector.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 Webpack Inspector</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_82695" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">常见问题</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/faq/general.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">通用类问题</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/faq/features.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">功能类问题</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/faq/exceptions.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">异常类问题</div></a></div><div><a class="link_2625c menuLink_82695 cursor-pointer" target="" href="/builder/guide/faq/hmr.html"><div class="menuItem_82695 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">热更新问题</div></a></div></div></div></section></nav></div></div></aside><div class="content_c7b5e rspress-doc-container flex flex-shrink-0 m-auto"><div class="w-full"><div><div class="rspress-doc"><!--$--><h1 id="环境变量" class="text-3xl mb-10 leading-10 tracking-tight title_e0087">环境变量<a class="link_e0087 header-anchor" aria-hidden="true" href="#环境变量">#</a></h1>
<p class="my-4 leading-7">Builder 支持在编译过程中向代码中注入环境变量或表达式，这对于区分运行环境、注入常量值等场景很有帮助。本章节会介绍环境变量的使用方式。</p>
<h2 id="默认环境变量" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">默认环境变量<a class="link_e0087 header-anchor" aria-hidden="true" href="#默认环境变量">#</a></h2>
<h3 id="processenvnode_env" class="mt-10 mb-2 leading-7 text-xl title_e0087">process.env.NODE_ENV<a class="link_e0087 header-anchor" aria-hidden="true" href="#processenvnode_env">#</a></h3>
<p class="my-4 leading-7">默认情况下，Builder 会自动设置 <code>process.env.NODE_ENV</code> 环境变量，在开发模式为 <code>&#x27;development&#x27;</code>，生产模式为 <code>&#x27;production&#x27;</code>。</p>
<p class="my-4 leading-7">你可以在 Node.js 和运行时代码中直接使用 <code>process.env.NODE_ENV</code>。</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;development&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-symbol)">console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;this is a development log&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">在开发环境，以上代码会被编译为：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;this is a development log&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">在生产环境，以上代码会被编译为：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;this is a development log&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">在代码压缩过程中，<code>if (false) { ... }</code> 会被识别为无效代码，并被自动移除。</p>
<h3 id="processenvasset_prefix" class="mt-10 mb-2 leading-7 text-xl title_e0087">process.env.ASSET_PREFIX<a class="link_e0087 header-anchor" aria-hidden="true" href="#processenvasset_prefix">#</a></h3>
<p class="my-4 leading-7">你可以在运行时代码中使用 <code>process.env.ASSET_PREFIX</code> 来访问静态资源的前缀。</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">在开发环境下，它等同于 <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/builder/api/config-dev.html#dev-assetprefix">dev.assetPrefix</a> 设置的值。</li>
<li class="[&amp;:not(:first-child)]:mt-2">在生产环境下，它等同于 <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/builder/api/config-output.html#output-assetprefix">output.assetPrefix</a> 设置的值。</li>
<li class="[&amp;:not(:first-child)]:mt-2">Builder 会自动移除 <code>assetPrefix</code> 尾部的斜线符号，以便于进行字符串拼接。</li>
</ul>
<p class="my-4 leading-7">比如，我们通过 <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/builder/api/config-output.html#output-copy">output.copy</a> 配置，将 <code>static/icon.png</code> 图片拷贝到 <code>dist</code> 目录下：</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  dev</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    assetPrefix</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;/&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    copy</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> from</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;./static&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> to</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;static&#x27;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    assetPrefix</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;https://example.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">此时，我们可以在前端代码中通过以下方式来拼接图片 URL：</p>
<div class="language-jsx"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-jsx" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> Image </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">img</span><span class="token" style="color:var(--code-token-function)"> </span><span class="token" style="color:var(--code-token-symbol)">src</span><span class="token script language-javascript script-punctuation" style="color:var(--code-token-function)">=</span><span class="token script language-javascript" style="color:var(--code-token-punctuation)">{</span><span class="token script language-javascript template-string template-punctuation" style="color:var(--code-token-function)">`</span><span class="token script language-javascript template-string interpolation interpolation-punctuation" style="color:var(--code-token-function)">${</span><span class="token script language-javascript template-string interpolation" style="color:var(--code-token-function)">process</span><span class="token script language-javascript template-string interpolation" style="color:var(--code-token-function)">.</span><span class="token script language-javascript template-string interpolation" style="color:var(--code-token-function)">env</span><span class="token script language-javascript template-string interpolation" style="color:var(--code-token-function)">.</span><span class="token script language-javascript template-string interpolation" style="color:var(--code-token-function)">ASSET_PREFIX</span><span class="token script language-javascript template-string interpolation interpolation-punctuation" style="color:var(--code-token-function)">}</span><span class="token script language-javascript template-string" style="color:var(--code-token-function)">/static/icon.png</span><span class="token script language-javascript template-string template-punctuation" style="color:var(--code-token-function)">`</span><span class="token script language-javascript" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-function)"> </span><span class="token" style="color:var(--code-token-punctuation)">/&gt;</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">在开发环境，以上代码会被编译为：</p>
<div class="language-jsx"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-jsx" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> Image </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">img</span><span class="token" style="color:var(--code-token-function)"> </span><span class="token" style="color:var(--code-token-symbol)">src</span><span class="token script language-javascript script-punctuation" style="color:var(--code-token-function)">=</span><span class="token script language-javascript" style="color:var(--code-token-punctuation)">{</span><span class="token script language-javascript template-string template-punctuation" style="color:var(--code-token-function)">`</span><span class="token script language-javascript template-string" style="color:var(--code-token-function)">/static/icon.png</span><span class="token script language-javascript template-string template-punctuation" style="color:var(--code-token-function)">`</span><span class="token script language-javascript" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-function)"> </span><span class="token" style="color:var(--code-token-punctuation)">/&gt;</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">在生产环境，以上代码会被编译为：</p>
<div class="language-jsx"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-jsx" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> Image </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">img</span><span class="token" style="color:var(--code-token-function)"> </span><span class="token" style="color:var(--code-token-symbol)">src</span><span class="token script language-javascript script-punctuation" style="color:var(--code-token-function)">=</span><span class="token script language-javascript" style="color:var(--code-token-punctuation)">{</span><span class="token script language-javascript template-string template-punctuation" style="color:var(--code-token-function)">`</span><span class="token script language-javascript template-string" style="color:var(--code-token-function)">https://example.com/static/icon.png</span><span class="token script language-javascript template-string template-punctuation" style="color:var(--code-token-function)">`</span><span class="token script language-javascript" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-function)"> </span><span class="token" style="color:var(--code-token-punctuation)">/&gt;</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="使用-define-配置项" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">使用 define 配置项<a class="link_e0087 header-anchor" aria-hidden="true" href="#使用-define-配置项">#</a></h2>
<p class="my-4 leading-7">通过配置 <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/builder/api/config-source.html#sourcedefine">source.define</a> 选项，你可以在构建时将代码中的变量替换成其它值或者表达式。</p>
<p class="my-4 leading-7">define 类似于其它一些语言提供的宏定义能力，但得益于 JavaScript 强大的运行时表达能力，通常不需要像那些语言一样将其用作复杂代码的生成器。它常用于在构建环境向运行时传递环境变量等简单信息，或是辅助 Builder 进行 Tree Shaking 等操作。</p>
<h3 id="替换表达式" class="mt-10 mb-2 leading-7 text-xl title_e0087">替换表达式<a class="link_e0087 header-anchor" aria-hidden="true" href="#替换表达式">#</a></h3>
<p class="my-4 leading-7">define 最基础的用途是在构建时替换代码中的表达式。</p>
<p class="my-4 leading-7">例如环境变量 <code>NODE_ENV</code> 的值会影响许多第三方模块的行为，在构建线上应用的产物时通常需要将它设置为 <code>&quot;production&quot;</code>：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">source</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">define</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;process.env.NODE_ENV&#x27;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-constant)">JSON</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">stringify</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">需要注意的是这里提供的值必须是 JSON 字符串，例如 <code>process.env.NODE_ENV</code> 的值为 <code>&quot;production&quot;</code> 则传入的值应当是 <code>&quot;\&quot;production\&quot;&quot;</code> 才能够正确被处理。</p>
<p class="my-4 leading-7">同理 <code>{ foo: &quot;bar&quot; }</code> 也应该被转换成 <code>&quot;{\&quot;foo\&quot;:\&quot;bar\&quot;}&quot;</code>，如果直接传入原始对象则意味着把表达式 <code>process.env.NODE_ENV.foo</code> 替换为标识符 <code>bar</code>。</p>
<p class="my-4 leading-7"><code>source.define</code> 的具体行为请参考 <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/builder/api/config-source.html#sourcedefine">API 文档</a>。</p>
<div class="rspress-directive tip"><div class="rspress-directive-title">TIP</div><div class="rspress-directive-content"><p class="my-4 leading-7">以上例子中的环境变量 <code>NODE_ENV</code> 已经由 Builder 自动注入，通常你不需要手动配置它的值。
</p></div></div>
<h3 id="processenv-注入方式" class="mt-10 mb-2 leading-7 text-xl title_e0087">process.env 注入方式<a class="link_e0087 header-anchor" aria-hidden="true" href="#processenv-注入方式">#</a></h3>
<p class="my-4 leading-7">在使用 <code>source.define</code> 或 <code>source.globalVars</code> 时，请避免注入整个 <code>process.env</code> 对象，比如下面的用法是不推荐的：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">source</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">define</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;process.env&#x27;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-constant)">JSON</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">stringify</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">如果你采用了上述用法，将会导致如下问题：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">额外注入了一些未使用的环境变量，导致开发环境的环境变量被泄露到前端代码中。</li>
<li class="[&amp;:not(:first-child)]:mt-2">由于每一处 <code>process.env</code> 代码都会被替换为完整的环境变量对象，导致前端代码的包体积增加，性能降低。</li>
</ol>
<p class="my-4 leading-7">因此，请按照实际需求来注入 <code>process.env</code> 上的环境变量，避免全量注入。</p>
<h2 id="设置环境变量" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">设置环境变量<a class="link_e0087 header-anchor" aria-hidden="true" href="#设置环境变量">#</a></h2>
<p class="my-4 leading-7">针对设置环境变量的高频场景，Builder 还提供了 <a class="link_2625c  link_e0087 inline-link_e0087 cursor-pointer" target="" href="/builder/api/config-source.html#sourceglobalvars">source.globalVars</a> 配置用于简化配置，它是 <code>source.define</code> 的一个语法糖，唯一的区别是 <code>source.globalVars</code> 会自动将传入的值进行 JSON 序列化处理，这使得设置环境变量的值更容易，避免大量书写 <code>JSON.stringify(...)</code> 转换语句：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">source</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">globalVars</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;process.env.NODE_ENV&#x27;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;production&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;import.meta.foo&#x27;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token literal-property" style="color:var(--code-token-parameter)">bar</span><span class="token operator">:</span><span> </span><span class="token number">42</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;import.meta.baz&#x27;</span><span class="token operator">:</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">需要注意的是不论以上哪种方式都只会匹配完整的表达式，对表达式进行解构会让 Builder 无法正确识别：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// =&gt; production</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token operator">=</span><span> process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// =&gt; undefined</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> vars </span><span class="token operator">=</span><span> process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>vars</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// =&gt; undefined</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="声明环境变量类型" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">声明环境变量类型<a class="link_e0087 header-anchor" aria-hidden="true" href="#声明环境变量类型">#</a></h2>
<p class="my-4 leading-7">当你在 TypeScript 代码中读取环境变量时，TypeScript 可能会提示该变量缺少类型定义，此时你需要添加相应的类型声明。</p>
<p class="my-4 leading-7">比如你引用了一个 <code>CUSTOM_VAR</code> 变量，在 TypeScript 文件中会出现如下提示：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>TS2304: Cannot find name &#x27;CUSTOM_VAR&#x27;.
</code></div></div>
<p class="my-4 leading-7">此时，你可以在项目中创建 <code>src/env.d.ts</code> 文件，并添加以下内容即可：</p>
<div class="language-ts"><div class="rspress-code-title">src/env.d.ts</div><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">declare</span><span> </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> </span><span class="token" style="color:var(--code-token-constant)">CUSTOM_VAR</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="tree-shaking" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">Tree Shaking<a class="link_e0087 header-anchor" aria-hidden="true" href="#tree-shaking">#</a></h2>
<p class="my-4 leading-7">Define 还可以用于标记死代码以协助 Builder 进行 Tree Shaking 优化。</p>
<p class="my-4 leading-7">例如通过将 <code>process.env.REGION</code> 替换为具体值来实现针对不同地区的产物进行差异化构建：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">source</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">define</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;process.env.REGION&#x27;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-constant)">JSON</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">stringify</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">REGION</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// or...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">globalVars</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;process.env.REGION&#x27;</span><span class="token operator">:</span><span> process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">REGION</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">这样设置后对于存在地区控制的代码：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> </span><span class="token function-variable" style="color:var(--code-token-function)">App</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">REGION</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;cn&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token operator">&lt;</span><span>EntryFoo </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">else</span><span> </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">REGION</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;sg&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token operator">&lt;</span><span>EntryBar </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">else</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token operator">&lt;</span><span>EntryBaz </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">指定环境变量 <code>REGION=sg</code> 并执行构建得到的产物会被剔除多余的代码：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> </span><span class="token function-variable" style="color:var(--code-token-function)">App</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">else</span><span> </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token operator">&lt;</span><span>EntryBar </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">else</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">未用到的组件不会被打包到产物中，它们的外部依赖也会对应地被优化，最终即可得到体积和性能都更优的产物代码。</p>
<h2 id="源码内联测试" class="mt-14 mb-6 text-2xl tracking-tight title_e0087">源码内联测试<a class="link_e0087 header-anchor" aria-hidden="true" href="#源码内联测试">#</a></h2>
<p class="my-4 leading-7">Vitest 支持将测试写在源码文件内，能够在不导出的情况下测试私有功能的行为，并且通过设置 Define 来在正式构建时剔除测试代码。详细指南请参考 <a href="https://cn.vitest.dev/guide/in-source.html" target="_blank" rel="noopener noreferrer" class="link_2625c  link_e0087 inline-link_e0087">Vitest 官方文档</a>。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">// 函数实现</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-function)">add</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter operator">...</span><span class="token parameter">args</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> args</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">reduce</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">a</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> b</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> a </span><span class="token operator">+</span><span> b</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// 源码内的测试套件</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">import</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>meta</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>vitest</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> it</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> expect </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">import</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>meta</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>vitest</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">it</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;add&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-function)">expect</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-function)">add</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">toBe</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-function)">expect</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-function)">add</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token number">1</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">toBe</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token number">1</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-function)">expect</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-function)">add</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token number">1</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token number">2</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token number">3</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">toBe</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token number">6</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre><button class="copy"></button></div></div><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/document/builder-doc/docs/zh/guide/advanced/define.md" target="_blank" class="editLink_d8024">Edit this page on GitHub</a></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_cd2c7 flex flex-col"><a class="link_2625c pager-link_cd2c7 cursor-pointer" target="" href="/builder/guide/advanced/alias.html"><span class="desc_cd2c7">上一页</span><span class="title_cd2c7">路径别名</span></a></div><div class="next_cd2c7 flex flex-col"><a class="link_2625c pager-link_cd2c7 next_cd2c7 cursor-pointer" target="" href="/builder/guide/advanced/hmr.html"><span class="desc_cd2c7">下一页</span><span class="title_cd2c7">模块热更新</span></a></div></div></footer></div></div></div><div class="aside-container_c7b5e"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">目录</div><nav class="mt-1"><ul class="relative"><li><a href="#默认环境变量" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">默认环境变量</span></a></li><li><a href="#processenvnode_env" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">process.env.NODE_ENV</span></a></li><li><a href="#processenvasset_prefix" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">process.env.ASSET_PREFIX</span></a></li><li><a href="#使用-define-配置项" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">使用 define 配置项</span></a></li><li><a href="#替换表达式" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">替换表达式</span></a></li><li><a href="#processenv-注入方式" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">process.env 注入方式</span></a></li><li><a href="#设置环境变量" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">设置环境变量</span></a></li><li><a href="#声明环境变量类型" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">声明环境变量类型</span></a></li><li><a href="#tree-shaking" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">Tree Shaking</span></a></li><li><a href="#源码内联测试" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">源码内联测试</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div><div id="search-container"></div></body></html>