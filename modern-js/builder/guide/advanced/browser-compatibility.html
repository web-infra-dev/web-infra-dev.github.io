<!doctype html><html  lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title data-rh="true">浏览器兼容性 - Modern.js Builder</title><meta data-rh="true" name="description" content="基于 Rspack 的 Web 构建工具"/>
<script id="check-dark-light">
;(() => {
  const saved = localStorage.getItem('rspress-theme-appearance')
  const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
  if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
    document.documentElement.classList.add('dark')
  }
})()
</script>
<link rel="icon" href="https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/logo-1x-0104.png"><script defer="defer">!function(){var s,t,a,c,e,i,n,j,r,l,o,f,b,d={},y={};function u(s){var t=y[s];if(void 0!==t)return t.exports;var a=y[s]={id:s,loaded:!1,exports:{}};return d[s](a,a.exports,u),a.loaded=!0,a.exports}u.m=d,u.es=function(s,t){return Object.keys(s).forEach((function(a){"default"!==a&&!Object.prototype.hasOwnProperty.call(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:function(){return s[a]}})})),s},s={10547:["5134"],11008:["629"],11827:["6426"],12741:["3898","8501","8516","lib-lodash","lib-polyfill","lib-react"],14300:["6398"],14418:["8433"],14901:["3584"],15305:["2556","8516","lib-lodash","lib-polyfill","lib-react"],15407:["825","8516","lib-lodash","lib-polyfill","lib-react"],16284:["1935"],17057:["35"],18665:["904"],18948:["7117","8516","lib-lodash","lib-polyfill","lib-react"],22274:["8516","9408","lib-lodash","lib-polyfill","lib-react"],22733:["1196","3898"],24154:["7358"],2463:["3629"],24642:["9703"],25705:["8935"],26661:["4241"],2667:["7674"],27002:["3239"],27543:["3898","714"],27602:["9674"],28102:["4991"],28484:["7233"],29702:["590"],30120:["8509"],31537:["3898","5615"],32353:["119"],34479:["9094"],34635:["4476"],35644:["6257"],36972:["4989"],36989:["1582","3898"],37017:["2789"],37135:["5705"],3743:["9527"],3783:["3898","8125"],38210:["9685"],3927:["8516","8886","lib-lodash","lib-polyfill","lib-react"],4075:["2663"],41847:["6961"],42054:["995"],42312:["3435"],43917:["2044","3898"],44072:["8638"],45271:["2176"],48349:["5696"],48512:["3898","6649","8516","lib-lodash","lib-polyfill","lib-react"],49536:["8723"],49612:["8260"],518:["8162"],52158:["5307"],52228:["5081"],54678:["7423"],54932:["8158"],54989:["4798"],56343:["5427"],56763:["6355","8516","lib-lodash","lib-polyfill","lib-react"],56986:["4611"],57142:["4920","8516","lib-lodash","lib-polyfill","lib-react"],57890:["8690"],6019:["7443"],60319:["8516","951","lib-lodash","lib-polyfill","lib-react"],6045:["6437"],60872:["3898","5894"],61101:["5342"],62062:["6520","8516","lib-lodash","lib-polyfill","lib-react"],62291:["8207"],62430:["4039"],62440:["7043"],63514:["2885"],63565:["3898","8366"],65479:["3898","7580"],66573:["9399"],67210:["7045"],69019:["3898","9679"],69661:["3898","8302"],70962:["5969"],70990:["3898","8916"],72902:["6024","8516","lib-lodash","lib-polyfill","lib-react"],74069:["8516","9907","lib-lodash","lib-polyfill","lib-react"],74523:["3898","4293"],76893:["8549"],77778:["582"],77829:["5127"],7786:["6890"],77894:["4260"],77920:["4742"],78448:["813"],78943:["1710"],79519:["7785","8516","lib-lodash","lib-polyfill","lib-react"],79833:["7273"],80157:["5146","8516","lib-lodash","lib-polyfill","lib-react"],80811:["4188"],80873:["3148"],81170:["4012"],82198:["6899"],82347:["3898","9946"],83892:["2159"],84718:["5583"],84915:["3624"],85997:["5723"],86560:["8516","9654","lib-lodash","lib-polyfill","lib-react"],87443:["3898","4837"],87516:["5674"],88861:["5987"],88990:["9530"],8951:["5843"],89998:["193"],90875:["3384"],91512:["4497","8516","lib-lodash","lib-polyfill","lib-react"],91881:["2839","3898"],93894:["3898","5850"],95661:["5702"],96040:["6755"],9621:["8516","8596","lib-lodash","lib-polyfill","lib-react"],96878:["6789"],97155:["5299"],98748:["1104"],99272:["3898","5497"]},u.el=function(t){var a=s[t];return void 0===a?Promise.resolve():a.length>1?Promise.all(a.map(u.e)):u.e(a[0])},u.f={},u.e=function(s){return Promise.all(Object.keys(u.f).reduce((function(t,a){return u.f[a](s,t),t}),[]))},u.p="/builder/",u.u=function(s){return{1104:"static/js/async/1104.bc82e6ee.js",119:"static/js/async/119.964f5795.js",1196:"static/js/async/1196.56315292.js",1582:"static/js/async/1582.13334366.js",1710:"static/js/async/1710.7ff6c7db.js",193:"static/js/async/193.8d706db0.js",1935:"static/js/async/1935.54ad546b.js",2044:"static/js/async/2044.a06deb54.js",2159:"static/js/async/2159.cd141f1d.js",2176:"static/js/async/2176.bda08ab9.js",2556:"static/js/async/2556.41dc6d92.js",2663:"static/js/async/2663.46e71b55.js",2789:"static/js/async/2789.2344d360.js",2839:"static/js/async/2839.8108984e.js",2885:"static/js/async/2885.4ec8457b.js",3148:"static/js/async/3148.c9be2fed.js",3239:"static/js/async/3239.7089d4ee.js",3384:"static/js/async/3384.06aac0ef.js",3435:"static/js/async/3435.3d546de6.js",35:"static/js/async/35.b53702e2.js",3584:"static/js/async/3584.a13949fe.js",3624:"static/js/async/3624.b7b73aa0.js",3629:"static/js/async/3629.32c4fdec.js",3898:"static/js/async/3898.f89125b5.js",4012:"static/js/async/4012.ffc4fc72.js",4039:"static/js/async/4039.ae136039.js",4188:"static/js/async/4188.120f3dd6.js",4241:"static/js/async/4241.d226337f.js",4260:"static/js/async/4260.6f90be14.js",4293:"static/js/async/4293.bd66f732.js",4476:"static/js/async/4476.97cfb52c.js",4497:"static/js/async/4497.186e0426.js",4611:"static/js/async/4611.384ce6ef.js",4742:"static/js/async/4742.1cfb17b3.js",4798:"static/js/async/4798.9db2acf6.js",4837:"static/js/async/4837.3f7b85c0.js",4920:"static/js/async/4920.39018c1c.js",4989:"static/js/async/4989.5a2d7804.js",4991:"static/js/async/4991.30094e5c.js",5081:"static/js/async/5081.fb165167.js",5127:"static/js/async/5127.bbe647ad.js",5134:"static/js/async/5134.903b5e30.js",5146:"static/js/async/5146.d1f8a1f4.js",5299:"static/js/async/5299.329f16d9.js",5307:"static/js/async/5307.3ee89ff3.js",5342:"static/js/async/5342.a0ed8982.js",5427:"static/js/async/5427.86b1df2d.js",5497:"static/js/async/5497.6f120ac9.js",5583:"static/js/async/5583.69d40985.js",5615:"static/js/async/5615.40afb90e.js",5674:"static/js/async/5674.380da39a.js",5696:"static/js/async/5696.4299e8ea.js",5702:"static/js/async/5702.77553a32.js",5705:"static/js/async/5705.77c3aff3.js",5723:"static/js/async/5723.0daa0504.js",582:"static/js/async/582.b7af13e7.js",5843:"static/js/async/5843.bb339e7f.js",5850:"static/js/async/5850.a5e90bf9.js",5894:"static/js/async/5894.9dd1c841.js",590:"static/js/async/590.43d679e1.js",5969:"static/js/async/5969.1b1dd490.js",5987:"static/js/async/5987.2db53a8f.js",6024:"static/js/async/6024.f0d02941.js",6257:"static/js/async/6257.25e5e766.js",629:"static/js/async/629.9c583b34.js",6355:"static/js/async/6355.6fd6cd95.js",6398:"static/js/async/6398.85087b7e.js",6426:"static/js/async/6426.344ebb03.js",6437:"static/js/async/6437.61a5570e.js",6520:"static/js/async/6520.38e5e633.js",6649:"static/js/async/6649.d7278422.js",6755:"static/js/async/6755.f304effe.js",6789:"static/js/async/6789.995af57c.js",6890:"static/js/async/6890.aaf1b0db.js",6899:"static/js/async/6899.7b6317cc.js",6961:"static/js/async/6961.888af51c.js",7043:"static/js/async/7043.bd2010ea.js",7045:"static/js/async/7045.1f5c9ce5.js",7117:"static/js/async/7117.61e4601b.js",714:"static/js/async/714.6215f148.js",7233:"static/js/async/7233.97aead4b.js",7273:"static/js/async/7273.a6ec65da.js",7358:"static/js/async/7358.a52b3c27.js",7423:"static/js/async/7423.fbe38414.js",7443:"static/js/async/7443.1759df44.js",7580:"static/js/async/7580.6a42e4d4.js",7674:"static/js/async/7674.9a57aaf4.js",7785:"static/js/async/7785.e54c95f2.js",8125:"static/js/async/8125.21a6cf98.js",813:"static/js/async/813.c1149532.js",8158:"static/js/async/8158.b5e76932.js",8162:"static/js/async/8162.507f645a.js",8207:"static/js/async/8207.88171c9b.js",825:"static/js/async/825.ec2bee07.js",8260:"static/js/async/8260.52aaf92c.js",8302:"static/js/async/8302.1c691ee8.js",8366:"static/js/async/8366.074ceba1.js",8433:"static/js/async/8433.e2790fe9.js",8501:"static/js/async/8501.357d474e.js",8509:"static/js/async/8509.0e38b93c.js",8549:"static/js/async/8549.10f4e078.js",8596:"static/js/async/8596.61d16d23.js",8638:"static/js/async/8638.951aeba4.js",8690:"static/js/async/8690.598df14b.js",8723:"static/js/async/8723.f5862306.js",8886:"static/js/async/8886.38daa6ba.js",8916:"static/js/async/8916.91a5a986.js",8935:"static/js/async/8935.e16c1430.js",904:"static/js/async/904.5df3e056.js",9094:"static/js/async/9094.f26a008b.js",9399:"static/js/async/9399.cac1e68a.js",9408:"static/js/async/9408.73c02ab2.js",951:"static/js/async/951.fe874696.js",9527:"static/js/async/9527.1182e9b3.js",9530:"static/js/async/9530.78c64e7c.js",9654:"static/js/async/9654.d7df6dd9.js",9674:"static/js/async/9674.528687f6.js",9679:"static/js/async/9679.d6c7a2ee.js",9685:"static/js/async/9685.f413a30a.js",9703:"static/js/async/9703.7e85363e.js",9907:"static/js/async/9907.f7401524.js",9946:"static/js/async/9946.d9f7a45c.js",995:"static/js/async/995.2baeff83.js"}[s]},u.k=function(s){return{3898:"static/css/async/3898.b611428b.css"}[s]},t={},u.l=function(s,a,c,e){if(t[s])t[s].push(a);else{if(void 0!==c)for(var i,n,j=document.getElementsByTagName("script"),r=0;r<j.length;r++){var l=j[r];if(l.getAttribute("src")==s){i=l;break}}!i&&(n=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,i.src=s),t[s]=[a];var o=function(a,c){i.onerror=i.onload=null,clearTimeout(f);var e=t[s];if(delete t[s],i.parentNode&&i.parentNode.removeChild(i),e&&e.forEach((function(s){return s(c)})),a)return a(c)},f=setTimeout(o.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=o.bind(null,i.onerror),i.onload=o.bind(null,i.onload),n&&document.head.appendChild(i)}},u.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},a=[],u.O=function(s,t,c,e){if(!t){var i=1/0;for(l=0;l<a.length;l++){t=a[l][0],c=a[l][1],e=a[l][2];for(var n=!0,j=0;j<t.length;j++)i>=e&&Object.keys(u.O).every((function(s){return u.O[s](t[j])}))?t.splice(j--,1):(n=!1,e<i&&(i=e));if(n){a.splice(l--,1);var r=c()}}return r}e=e||0;for(var l=a.length;l>0&&a[l-1][2]>e;l--)a[l]=a[l-1];a[l]=[t,c,e]},u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(s){if("object"==typeof window)return window}}(),u.d=function(s,t){for(var a in t)u.o(t,a)&&!u.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:t[a]})},u.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},u.n=function(s){return s&&s.__esModule?s.default:s},e=Object.getPrototypeOf?function(s){return Object.getPrototypeOf(s)}:function(s){return s.__proto__},u.t=function(s,t){if(1&t&&(s=this(s)),8&t||"object"==typeof s&&s&&(4&t&&s.__esModule||16&t&&"function"==typeof s.then))return s;var a=Object.create(null);u.r(a);var i={};c=c||[null,e({}),e([]),e(e)];for(var n=2&t&&s;"object"==typeof n&&!~c.indexOf(n);n=e(n))Object.getOwnPropertyNames(n).forEach((function(t){i[t]=function(){return s[t]}}));return i.default=function(){return s},u.d(a,i),a},u.nmd=function(s){return s.paths=[],!s.children&&(s.children=[]),s},i={"builder-runtime":0,"lib-lodash":0,"lib-polyfill":0,"lib-react":0,"lib-router":0,main:0},n="webpack",j="data-webpack-loading",r=function(s,t,a,c){var e,i,r="chunk-"+s;if(!c){for(var l=document.getElementsByTagName("link"),o=0;o<l.length;o++){var f=l[o],b=f.getAttribute("href")||f.href;if(b&&!b.startsWith(u.p)&&(b=u.p+(b.startsWith("/")?b.slice(1):b)),"stylesheet"==f.rel&&(b&&b.startsWith(t)||f.getAttribute("data-webpack")==n+":"+r)){e=f;break}}if(!a)return e}!e&&(i=!0,(e=document.createElement("link")).setAttribute("data-webpack",n+":"+r),e.setAttribute(j,1),e.rel="stylesheet",e.href=t);var d=function(s,t){if(e.onerror=e.onload=null,e.removeAttribute(j),clearTimeout(y),t&&"load"!=t.type&&e.parentNode.removeChild(e),a(t),s)return s(t)};if(e.getAttribute(j)){var y=setTimeout(d.bind(null,void 0,{type:"timeout",target:e}),12e4);e.onerror=d.bind(null,e.onerror),e.onload=d.bind(null,e.onload)}else d(void 0,{type:"load",target:e});return c?c.parentNode.insertBefore(e,c):i&&document.head.appendChild(e),e},u.f.css=function(s,t){var a=u.o(i,s)?i[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["3898","8516"].indexOf(s)>-1){var c=new Promise((function(t,c){a=i[s]=[t,c]}));t.push(a[2]=c);var e=u.p+u.k(s),n=Error();r(s,e,(function(t){if(u.o(i,s)&&(0!==(a=i[s])&&(i[s]=void 0),a))if("load"!==t.type){var c=t&&t.type,e=t&&t.target&&t.target.src;n.message="Loading css chunk "+s+" failed.\n("+c+": "+e+")",n.name="ChunkLoadError",n.type=c,n.request=e,a[1](n)}else a[0]()}))}else i[s]=0},(l=self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).push=function(s,t){var a=t[0];s&&s(t);for(var c=0;c<a.length;c++)void 0===i[a[c]]&&(i[a[c]]=0)}.bind(null,l.push.bind(l)),o={"builder-runtime":0},u.f.j=function(s,t){var a=u.o(o,s)?o[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["1104","119","1196","1582","1710","193","1935","2044","2159","2176","2556","2663","2789","2839","2885","3148","3239","3384","3435","35","3584","3624","3629","3898","4012","4039","4188","4241","4260","4293","4476","4497","4611","4742","4798","4837","4920","4989","4991","5081","5127","5134","5146","5299","5307","5342","5427","5497","5583","5615","5674","5696","5702","5705","5723","582","5843","5850","5894","590","5969","5987","6024","6257","629","6355","6398","6426","6437","6520","6649","6755","6789","6890","6899","6961","7043","7045","7117","714","7233","7273","7358","7423","7443","7580","7674","7785","8125","813","8158","8162","8207","825","8260","8302","8366","8433","8501","8509","8516","8549","8596","8638","8690","8723","8886","8916","8935","904","9094","9399","9408","951","9527","9530","9654","9674","9679","9685","9703","9907","9946","995","lib-lodash","lib-polyfill","lib-react","lib-router","main"].indexOf(s)>-1){var c=new Promise((function(t,c){a=o[s]=[t,c]}));t.push(a[2]=c);var e=u.p+u.u(s),i=Error();u.l(e,(function(t){if(u.o(o,s)&&(0!==(a=o[s])&&(o[s]=void 0),a)){var c=t&&("load"===t.type?"missing":t.type),e=t&&t.target&&t.target.src;i.message="Loading chunk "+s+" failed.\n("+c+": "+e+")",i.name="ChunkLoadError",i.type=c,i.request=e,a[1](i)}}),"chunk-"+s,s)}else o[s]=0},u.O.j=function(s){return 0===o[s]},f=function(s,t){var a,c,e=t[0],i=t[1],n=t[2],j=0;if(e.some((function(s){return 0!==o[s]}))){for(a in i)u.o(i,a)&&(u.m[a]=i[a]);if(n)var r=n(u)}for(s&&s(t);j<e.length;j++)c=e[j],u.o(o,c)&&o[c]&&o[c][0](),o[c]=0;return u.O(r)},(b=self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).forEach(f.bind(null,0)),b.push=f.bind(null,b.push.bind(b))}()</script><script defer="defer" src="/builder/static/js/lib-lodash.8df6ad3e.js"></script><script defer="defer" src="/builder/static/js/lib-polyfill.91eb4e44.js"></script><script defer="defer" src="/builder/static/js/lib-react.db2b46c7.js"></script><script defer="defer" src="/builder/static/js/lib-router.3a8011a8.js"></script><script defer="defer" src="/builder/static/js/8516.e2cb31c8.js"></script><script defer="defer" src="/builder/static/js/main.b27e1dd5.js"></script><link href="/builder/static/css/8516.21280a51.css" rel="stylesheet"></head><body ><div id="root"><div><header class="top-0 left-0 md:fixed w-full" style="z-index:var(--rp-z-index-nav);background:var(--rp-c-bg)"><div class="navContainer_47ac2 rspress-nav px-6"><div class="container_47ac2 flex justify-between items-center h-full"><div class="undefined"><a href="/builder/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>Modern.js Builder</span></a></div><div class="undefined flex flex-1 justify-end items-center"><div class="rightNav_47ac2"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="navSearchButton_f619e"><button><svg width="18" height="24" viewBox="0 0 32 32" hight="18"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_f619e">Search Docs</p><div><span>⌘</span><span>K</span></div></button></div><div class="mobileNavSearchButton_f619e"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_b3367  cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="singleItem_47ac2 activeItem_47ac2 text-sm font-medium mx-1.5 px-3 py-2 flex items-center">指南</div></a><a class="link_b3367  cursor-pointer" target="" href="/builder/api/index.html"><div class="singleItem_47ac2  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a><a class="link_b3367  cursor-pointer" target="" href="/builder/plugins/introduction.html"><div class="singleItem_47ac2  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">插件</div></a></div><div class="flex-center flex-row"><div class="translation menu-item_47ac2 flex text-sm font-bold items-center px-3 py-2"><div><div class="relative flex-center h-14"><button class="nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><span class="text-sm font-medium flex" style="margin-right:2px"><svg width="18" height="18" viewBox="0 0 32 32" style="with:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div class="nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:2rem;background:var(--rp-c-bg)"><div><div class="rounded-2xl my-1 flex" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><span class="text-brand">简体中文</span></div></div><div><div class="font-medium my-1"><a class="link_b3367  cursor-pointer" target="" href="/builder/en/guide/advanced/browser-compatibility.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>English</span></div></div></a></div></div></div></div></div></div></div><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg></div></div></div><div class="social-links menu-item_8cbd0 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_8cbd0"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div><div class="mobileNavMenu_47ac2"><div class="navScreen_8624f " id="navScreen"><div class="container_8624f"><div class="navMenu_8624f"><div class="navMenuItem_8624f w-full"><a class="link_b3367  cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="singleItem_47ac2 activeItem_47ac2 text-sm font-medium mx-1.5 px-3 py-2 flex items-center">指南</div></a></div><div class="navMenuItem_8624f w-full"><a class="link_b3367  cursor-pointer" target="" href="/builder/api/index.html"><div class="singleItem_47ac2  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a></div><div class="navMenuItem_8624f w-full"><a class="link_b3367  cursor-pointer" target="" href="/builder/plugins/introduction.html"><div class="singleItem_47ac2  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">插件</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_8624f flex justify-center"></div><div class="undefined flex text-sm font-bold justify-center"><div class="mx-1.5 my-1"><div class=" navScreenMenuGroup_de8a5 relative"><button class="button_de8a5"><span class="buttonSpan_de8a5"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" down_de8a5 "><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div><div class="items_de8a5"><div><div class="p-1"><span class="text-brand">简体中文</span></div></div><div><div class="py-1 font-medium"><a class="link_b3367  cursor-pointer" target="" href="/builder/en.html"><div><div class="flex justify-center"><span>English</span></div></div></a></div></div></div></div></div></div></div><div class="social-links menu-item_8cbd0 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_8cbd0"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div></div><button class=" navHamburger_2498a text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div></header><section><div class="docLayout_feeda pt-0"><div class="localNav_dce60"><button class="menu_dce60 flex-center"><div class="text-md mr-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span class="text-sm">Menu</span></button></div><aside class="sidebar_74484 rspress-sidebar "><div class="mt-1 sidebarContent_74484"><div class="rspress-scrollbar" style="max-height:calc(100vh - var(--rp-nav-height) - 8px);overflow:scroll"><nav class="pb-2"><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_74484" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2.5 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">开始</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">介绍</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/quick-start.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">快速上手</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/glossary.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">名词解释</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/features.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">功能导航</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_74484" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2.5 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">基础</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/builder-config.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Builder 配置项</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/build-target.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">构建产物类型</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/output-files.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">构建产物目录</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/css-usage.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用样式资源</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/static-assets.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用静态资源</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/svg-assets.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用 SVG 资源</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/json-files.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用 JSON 文件</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/wasm-assets.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">引用 Wasm 资源</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/html-template.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">配置 HTML 模板</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/css-modules.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 CSS Modules</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/typescript.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 TypeScript</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/basic/builder-cli.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 Builder CLI</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_74484" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2.5 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">进阶</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/advanced/rspack-start.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 Rspack</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/advanced/alias.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">路径别名</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/advanced/define.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">环境变量</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/advanced/hmr.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">模块热更新</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/advanced/rem.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">开启 REM 适配</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/advanced/browserslist.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">设置浏览器范围</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/advanced/browser-compatibility.html"><div class="menuItemActive_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0;color:var(--rp-c-brand)">浏览器兼容性</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/advanced/custom-webpack-config.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">修改 webpack 配置</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/advanced/source-build.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">源码构建模式</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_74484" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2.5 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">框架</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/framework/vue3.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">构建 Vue 3 应用</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/framework/vue2.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">构建 Vue 2 应用</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_74484" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2.5 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">优化</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/optimization/optimize-bundle.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">产物体积优化</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/optimization/build-performance.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">提升构建性能</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/optimization/split-chunk.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">拆包最佳实践</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/optimization/inline-assets.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">静态资源内联</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_74484" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2.5 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">调试</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/debug/debug-mode.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">开启调试模式</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/debug/inspector.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">使用 Webpack Inspector</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_74484" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2.5 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">常见问题</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/faq/general.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">通用类问题</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/faq/features.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">功能类问题</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/faq/exceptions.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">异常类问题</div></a></div><div><a class="link_b3367 menuLink_74484 cursor-pointer" target="" href="/builder/guide/faq/hmr.html"><div class="menuItem_74484 mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">热更新问题</div></a></div></div></div></section></nav></div></div></aside><div class="content_feeda rspress-doc-container flex flex-shrink-0"><div class="w-full"><div class="rspress-doc"><!--$--><h1 id="浏览器兼容性" class="text-3xl mb-10 leading-10 tracking-tight title_f1ea0">浏览器兼容性<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#浏览器兼容性">#</a></h1>
<p class="my-4 leading-7">本章节介绍如何使用 Builder 提供的能力来处理浏览器兼容性问题。</p>
<h2 id="设置浏览器范围" class="mt-14 mb-6 text-2xl tracking-tight title_f1ea0">设置浏览器范围<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#设置浏览器范围">#</a></h2>
<p class="my-4 leading-7">在处理兼容性问题之前，首先需要明确你的项目需要支持的浏览器范围，并添加相应的 browserslist 配置。</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">如果你还没有设置浏览器范围，请先阅读 <a href="/builder/guide/advanced/browserslist.html" class="link_f1ea0 undefined">设置浏览器范围</a> 章节。</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">如果你已经设置了浏览器范围，那么 Builder 会自动根据该范围进行编译，对 JavaScript 语法和 CSS 语法进行降级处理，并注入所需的 polyfill 代码。大部分情况下，你可以放心地使用现代 ECMAScript 特性，无须担心兼容性问题。</p>
</li>
</ul>
<p class="my-4 leading-7">在设置浏览器范围之后，如果你依然在开发中遇到了一些兼容性问题，请继续阅读下面的内容来寻找解决方案。</p>
<h2 id="背景知识" class="mt-14 mb-6 text-2xl tracking-tight title_f1ea0">背景知识<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#背景知识">#</a></h2>
<p class="my-4 leading-7">在处理兼容性问题之前，建议你了解以下背景知识，以更好地处理相关问题。</p>
<h3 id="语法降级和-api-降级" class="mt-10 mb-2 leading-7 text-xl title_f1ea0">语法降级和 API 降级<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#语法降级和-api-降级">#</a></h3>
<p class="my-4 leading-7">当你在项目中使用高版本语法和 API 时，为了让编译后的代码能稳定运行在低版本浏览器中，需要完成两部分降级：语法降级和 API 降级。</p>
<p class="my-4 leading-7"><strong class="font-semibold">Builder 通过语法转译来对语法进行降级，通过 polyfill 来对 API 进行进行降级。</strong></p>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_f1ea0">
<p class="my-4 leading-7">语法和 API 并不是强绑定的，浏览器厂商在实现引擎的时候，会根据规范或者自身需要提前支持一些语法或者提前实现一些 API。因此，同一时期的不同厂商的浏览器，对语法和 API 的兼容都不一定相同。所以在一般的实践中，语法和 API 是分成两个部分进行处理的。</p>
</blockquote>
<h3 id="语法转译" class="mt-10 mb-2 leading-7 text-xl title_f1ea0">语法转译<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#语法转译">#</a></h3>
<p class="my-4 leading-7"><strong class="font-semibold">语法是编程语言如何组织代码的一系列规则</strong>，不遵守这些规则的代码无法被编程语言的引擎正确识别，因此无法被运行。在 JavaScript 中，以下几个示例都是语法规则：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">在 <code>const foo = 1</code> 中，<code>const</code> 表示声明一个不可变的常量。</li>
<li class="[&amp;:not(:first-child)]:mt-2">在 <code>foo?.bar?.baz</code> 中，<code>?.</code> 表示可选链访问属性。</li>
<li class="[&amp;:not(:first-child)]:mt-2">在 <code>async function () {}</code> 中，<code>async</code> 表示声明一个异步函数。</li>
</ul>
<p class="my-4 leading-7">由于不同浏览器的解析器所能支持的语法不同，尤其是旧版本浏览器引擎所能支持的语法较少，因此一些语法在低版本浏览器引擎中运行时，就会在解析 AST 的阶段报错。</p>
<p class="my-4 leading-7">比如下面这段代码在 IE 浏览器或低版本 Node.js 下会报错：</p>
<div class="language-js"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> foo </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>foo</span><span class="token operator">?.</span><span class="token" style="color:var(--code-token-function)">bar</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">我们在低版本 Node.js 中运行这段代码，会出现以下错误信息：</p>
<div class="language-bash"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>SyntaxError: Unexpected token </span><span class="token class-name" style="color:var(--code-token-symbol)">.</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  at Object.exports.runInThisContext </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>vm.js:73:16</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  at Object.</span><span class="token operator">&lt;</span><span>anonymous</span><span class="token operator">&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>eval</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>-wrapper:6:22</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  at Module._compile </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>module.js:460:26</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  at evalScript </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>node.js:431:25</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  at startup </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>node.js:90:7</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem">  at node.js:814:3</span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">从错误信息里可以明显看到，这是一个语法错误（SyntaxError）。这说明这个语法在低版本的引擎中是不受支持的。</p>
<p class="my-4 leading-7"><strong class="font-semibold">语法是不能通过 polyfill 或者 shim 进行支持的</strong>。如果想在低版本浏览器中运行一些它原本不支持的语法，那么就需要对代码进行转译，转译成低版本引擎所能支持的语法。</p>
<p class="my-4 leading-7">将上述代码转译为以下代码即可在低版本引擎中运行：</p>
<div class="language-js"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> foo </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>foo </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-keyword)">null</span><span> </span><span class="token operator">||</span><span> foo </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-keyword)">void</span><span> </span><span class="token number">0</span><span> </span><span class="token operator">?</span><span> </span><span class="token" style="color:var(--code-token-keyword)">void</span><span> </span><span class="token number">0</span><span> </span><span class="token operator">:</span><span> foo</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">bar</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">转译后，代码的语法变了，把一些低版本引擎无法理解的语法用其可理解的语法替代，<strong class="font-semibold">但代码本身的意义没有变</strong>。</p>
<p class="my-4 leading-7">如果引擎在转换为 AST 的时候遇到了无法识别的语法，就会报语法错误，并中止代码执行流程。在这种情况下，如果你的项目没有使用 SSR 或 SSG 等能力的话，页面将会直接白屏，导致页面不可用。</p>
<p class="my-4 leading-7">如果代码被转换为 AST 成功，引擎会将 AST 转为可执行代码，并在引擎内部正常执行。</p>
<h3 id="api-polyfill" class="mt-10 mb-2 leading-7 text-xl title_f1ea0">API Polyfill<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#api-polyfill">#</a></h3>
<p class="my-4 leading-7">JavaScript 是解释型脚本语言，不同于 Rust 等编译型语言。Rust 会在编译阶段对代码中的调用进行检查，而 JavaScript 在真正运行到某一行代码之前，并不知道这一行代码所调用的函数是否存在，因此一些错误只有在运行时才会出现。</p>
<p class="my-4 leading-7">举个例子，下面这段代码：</p>
<div class="language-js"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> str </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;Hello world!&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>str</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">notExistedMethod</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">上面这段代码有着正确的语法，在引擎运行时的第一个阶段也能正确转换为 AST，但是在真正运行的时候，由于 <code>String.prototype</code> 上不存在 <code>notExistedMethod</code> 这个方法，所以在实际运行的时候会报错：</p>
<div class="language-bash"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>Uncaught TypeError: str.notExistedMethod is not a </span><span class="token" style="color:var(--code-token-keyword)">function</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  at </span><span class="token operator">&lt;</span><span>anonymous</span><span class="token operator">&gt;</span><span>:2:17</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">随着 ECMAScript 的迭代，一些内置对象也会迎来新的方法。比如 <code>String.prototype.replaceAll</code> 是在 ES2021 中被引入的，那么在大部分 2021 年前的浏览器的引擎的内置对象 <code>String.prototype</code> 中是不存在 <code>replaceAll</code> 方法的，因此下面这段代码在最新的 Chrome 里可以运行，但是在较早的版本里无法运行：</p>
<div class="language-js"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-string)">&#x27;abc&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">replaceAll</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;abc&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;xyz&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">为了解决在旧版浏览器中的 <code>String.prototype</code> 缺少 <code>replaceAll</code> 的问题，我们可以在老版本的浏览器里扩展 <code>String.prototype</code> 对象，给它加上 <code>replaceAll</code> 方法，例如：</p>
<div class="language-js"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">// 该 polyfill 的实现并不一定符合标准，仅作为示例。</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token operator">!</span><span class="token class-name">String</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>prototype</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>replaceAll</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token class-name">String</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>prototype</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token function-variable" style="color:var(--code-token-function)">replaceAll</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">str</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> newStr</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// If a regex pattern</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token class-name">Object</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>prototype</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">toString</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">call</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>str</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">toLowerCase</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;[object regexp]&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token" style="color:var(--code-token-keyword)">this</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">replace</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>str</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> newStr</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// If a string</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token" style="color:var(--code-token-keyword)">this</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">replace</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">RegExp</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>str</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;g&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> newStr</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre><button class="copy"></button></div></div>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_f1ea0">
<p class="my-4 leading-7">这种为旧环境提供实现来对齐新 API 的技术被称作 polyfill。</p>
</blockquote>
<h2 id="降级方式" class="mt-14 mb-6 text-2xl tracking-tight title_f1ea0">降级方式<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#降级方式">#</a></h2>
<p class="my-4 leading-7">在 Builder 中，我们将代码分为三类：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">第一类是当前项目中的源代码。</li>
<li class="[&amp;:not(:first-child)]:mt-2">第二类是通过 npm 安装的第三方依赖代码。</li>
<li class="[&amp;:not(:first-child)]:mt-2">第三类是非当前项目的代码，比如 monorepo 中其他目录下的代码。</li>
</ul>
<p class="my-4 leading-7">默认情况下，Builder 只会对第一类代码进行编译和降级，而其他类型的代码默认是不进行降级处理的。</p>
<p class="my-4 leading-7">之所以这样处理，主要有几个考虑：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">将所有第三方依赖代码都进行降级的话会<strong class="font-semibold">导致构建性能显著下降</strong>。</li>
<li class="[&amp;:not(:first-child)]:mt-2">大部分第三方依赖在发布前已经进行了降级处理，二次降级可能会引入新问题。</li>
<li class="[&amp;:not(:first-child)]:mt-2">非当前项目的代码可能已经经过了编译处理，或者编译所需的配置与当前项目并不相同。</li>
</ul>
<h3 id="降级当前项目代码" class="mt-10 mb-2 leading-7 text-xl title_f1ea0">降级当前项目代码<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#降级当前项目代码">#</a></h3>
<p class="my-4 leading-7">当前项目的代码会被默认降级，因此你不需要添加额外的配置，只需要保证正确设置了浏览器范围即可。</p>
<h3 id="降级第三方依赖" class="mt-10 mb-2 leading-7 text-xl title_f1ea0">降级第三方依赖<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#降级第三方依赖">#</a></h3>
<p class="my-4 leading-7">当你发现某个第三方依赖的代码导致了兼容性问题时，你可以将这个依赖添加到 Builder 的 <a href="/builder/api/config-source.html#sourceinclude" class="link_f1ea0 undefined">source.include</a> 配置中，使 Builder 对该依赖进行额外的编译。</p>
<p class="my-4 leading-7">以 <code>query-string</code> 这个 npm 包为例，你可以做如下的配置：</p>
<div class="language-ts"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> path </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;path&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  source</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    include</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token regex-source language-regex" style="color:var(--code-token-keyword)">\/node_modules\/query-string\/</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">请查看 <a href="/builder/api/config-source.html#sourceinclude" class="link_f1ea0 undefined">source.include</a> 文档来查看更详细的用法说明。</p>
<h3 id="降级非当前项目的代码" class="mt-10 mb-2 leading-7 text-xl title_f1ea0">降级非当前项目的代码<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#降级非当前项目的代码">#</a></h3>
<p class="my-4 leading-7">当你引用非当前项目的代码时，如果该代码未经过编译处理，那么你也需要配置 <a href="/builder/api/config-source.html#sourceinclude" class="link_f1ea0 undefined">source.include</a> 来对它进行编译。</p>
<p class="my-4 leading-7">比如，你需要引用 monorepo 中 <code>packages</code> 目录下的某个模块，可以添加如下的配置：</p>
<div class="language-ts"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> path </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;path&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  source</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    include</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 方法一:</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 编译 Monorepo 的 package 目录下的所有文件</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">resolve</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;../../packages&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 方法二:</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 编译 Monorepo 的 package 目录里某个包的源代码</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 这种写法匹配的范围更加精准，对整体编译性能的影响更小</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">resolve</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;../../packages/xxx/src&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h2 id="polyfill-方案" class="mt-14 mb-6 text-2xl tracking-tight title_f1ea0">Polyfill 方案<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#polyfill-方案">#</a></h2>
<p class="my-4 leading-7">Builder 底层通过 Babel 或 SWC 编译 JavaScript 代码，并注入 <a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener noreferrer" class="link_f1ea0 undefined">core-js</a>、<a href="https://www.npmjs.com/package/@babel/runtime" target="_blank" rel="noopener noreferrer" class="link_f1ea0 undefined">@babel/runtime</a>、<a href="https://www.npmjs.com/package/@swc/helpers" target="_blank" rel="noopener noreferrer" class="link_f1ea0 undefined">@swc/helpers</a> 等 polyfill 库。</p>
<p class="my-4 leading-7">在不同的使用场景下，你可能会需要不同的 polyfill 方案。Builder 提供了 <a href="/builder/api/config-output.html#outputpolyfill" class="link_f1ea0 undefined">output.polyfill</a> 配置项来切换不同的 polyfill 方案。</p>
<h3 id="entry-方案" class="mt-10 mb-2 leading-7 text-xl title_f1ea0">entry 方案<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#entry-方案">#</a></h3>
<p class="my-4 leading-7">entry 为默认方案，无须手动设置。</p>
<p class="my-4 leading-7">在使用 entry 方案时，Builder 会根据当前项目设置的浏览器范围来计算需要注入哪些 <code>core-js</code> 方法，并在每个页面的入口文件中进行注入。这种方式注入的 polyfill 较为全面，不需要再担心项目源码和第三方依赖的 polyfill 问题，但是因为包含了一些没有用到的 polyfill 代码，所以最终的包大小可能会有所增加。</p>
<p class="my-4 leading-7">entry 方案对应的配置为：</p>
<div class="language-ts"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    polyfill</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;entry&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="usage-方案" class="mt-10 mb-2 leading-7 text-xl title_f1ea0">usage 方案<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#usage-方案">#</a></h3>
<p class="my-4 leading-7">usage 方案可以更精确地控制需要注入哪些 core-js polyfill。</p>
<p class="my-4 leading-7">当你开启 usage 方案时，Builder 会分析项目中的源代码，并判断需要注入哪些 polyfill。</p>
<p class="my-4 leading-7">比如代码中使用了 <code>Map</code>:</p>
<div class="language-js"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> b </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">Map</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">编译后，只会在该文件中注入 <code>Map</code> 所需的 polyfill：</p>
<div class="language-js"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;core-js/modules/es.map&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> b </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">Map</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">这种方式的优点是注入的 polyfill 体积更小，适合对包体积有较高要求的项目使用。缺点是 polyfill 可能注入不全，因为第三方依赖默认不会被编译和降级处理，因此第三方依赖所需的 polyfill 不会被分析到，如果需要分析某个第三方依赖，也需要将其加入到 <a href="/builder/api/config-source.html#sourceinclude" class="link_f1ea0 undefined">source.include</a> 配置中。</p>
<p class="my-4 leading-7">usage 方案对应的配置为：</p>
<div class="language-ts"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    polyfill</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;usage&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<h3 id="不注入-polyfill" class="mt-10 mb-2 leading-7 text-xl title_f1ea0">不注入 Polyfill<a class="link_f1ea0 header-anchor" aria-hidden="true" href="#不注入-polyfill">#</a></h3>
<p class="my-4 leading-7">你可以将 <code>output.polyfill</code> 设置为 <code>&#x27;off&#x27;</code> 来禁用 polyfill 注入的行为。</p>
<div class="language-ts"><div class="rspress-code-content"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">default</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    polyfill</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;off&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="copy"></button></div></div>
<p class="my-4 leading-7">使用此选项时，你需要自行保证代码的兼容性，比如通过 <a href="/builder/api/config-source.html#sourcepreentry" class="link_f1ea0 undefined">source.preEntry</a> 来手动引用所需的 polyfill 代码。</p><!--/$--><div><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/document/builder-doc/docs/zh/guide/advanced/browser-compatibility.md" target="_blank" class="editLink_eea9e">Edit this page on GitHub</a></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_33e00 flex flex-col"><a class="link_b3367 pager-link_33e00 cursor-pointer" target="" href="/builder/guide/advanced/browserslist.html"><span class="desc_33e00">上一页</span><span class="title_33e00">设置浏览器范围</span></a></div><div class="next_33e00 flex flex-col"><a class="link_b3367 pager-link_33e00 next_33e00 cursor-pointer" target="" href="/builder/guide/advanced/custom-webpack-config.html"><span class="desc_33e00">下一页</span><span class="title_33e00">修改 webpack 配置</span></a></div></div></footer></div></div></div><div class="aside-container_feeda" style="max-height:calc(100vh - (var(--rp-nav-height) + 32px));overflow:scroll"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">目录</div><nav class="mt-1"><ul class="relative"><li><a href="#设置浏览器范围" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">设置浏览器范围</span></a></li><li><a href="#背景知识" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">背景知识</span></a></li><li><a href="#语法降级和-api-降级" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">语法降级和 API 降级</span></a></li><li><a href="#语法转译" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">语法转译</span></a></li><li><a href="#api-polyfill" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">API Polyfill</span></a></li><li><a href="#降级方式" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">降级方式</span></a></li><li><a href="#降级当前项目代码" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">降级当前项目代码</span></a></li><li><a href="#降级第三方依赖" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">降级第三方依赖</span></a></li><li><a href="#降级非当前项目的代码" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">降级非当前项目的代码</span></a></li><li><a href="#polyfill-方案" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">Polyfill 方案</span></a></li><li><a href="#entry-方案" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">entry 方案</span></a></li><li><a href="#usage-方案" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">usage 方案</span></a></li><li><a href="#不注入-polyfill" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">不注入 Polyfill</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div><div id="search-container"></div></body></html>