{"version":3,"file":"static/js/async/docs_zh_guide_advanced_hmr_md.e84a6a04.js","sources":["./docs/zh/guide/advanced/hmr.md"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"zh%2Fguide%2Fadvanced%2Fhmr.md\"] = {\"toc\":[{\"text\":\"启用 HMR\",\"id\":\"启用-hmr\",\"depth\":2},{\"text\":\"自定义 HMR URL\",\"id\":\"自定义-hmr-url\",\"depth\":2},{\"text\":\"默认配置\",\"id\":\"默认配置\",\"depth\":3},{\"text\":\"线上代理\",\"id\":\"线上代理\",\"depth\":3},{\"text\":\"Live reloading 和 Hot reloading 的区别\",\"id\":\"live-reloading-和-hot-reloading-的区别\",\"depth\":2},{\"text\":\"常见问题\",\"id\":\"常见问题\",\"depth\":2}],\"title\":\"模块热更新\",\"frontmatter\":{}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        p: \"p\",\n        ul: \"ul\",\n        li: \"li\",\n        h2: \"h2\",\n        pre: \"pre\",\n        code: \"code\",\n        h3: \"h3\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"模块热更新\">{\"模块热更新\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#模块热更新\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.p>{\"模块热更新（HMR - hot module replacement）功能会在应用程序运行过程中，替换、添加或删除模块，而无需重新加载整个页面。主要是通过以下几种方式，来显著加快开发速度：\"}</_components.p>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"保留在完全重新加载页面期间丢失的应用程序状态。\"}</_components.li>{\"\\n\"}<_components.li>{\"只更新变更内容，以节省宝贵的开发时间。\"}</_components.li>{\"\\n\"}<_components.li>{\"在源代码中 CSS/JS 产生修改时，会立刻在浏览器中进行更新，这几乎相当于在浏览器 devtools 直接更改样式。\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.h2 id=\"启用-hmr\">{\"启用 HMR\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#启用-hmr\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"Builder 已内置了对 HMR 的支持，在开发环境下默认启用。\"}</_components.p>{\"\\n\"}<_components.p>{\"如果你不需要使用 HMR 能力，可以将 \"}<_components.a href=\"/api/config-dev#devhmr\">{\"dev.hmr\"}</_components.a>{\" 设置为 false，此时将不再提供热更新和 react-refresh 功能。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export default {\\n  dev: {\\n    hmr: false,\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"自定义-hmr-url\">{\"自定义 HMR URL\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#自定义-hmr-url\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"在默认情况下，Builder 使用当前页面的 host 和端口号来拼接 HMR 对应的 WebSocket URL。\"}</_components.p>{\"\\n\"}<_components.p>{\"当出现 HMR 连接失败的情况时，你可以通过自定义 \"}<_components.code>{\"devServer.client\"}</_components.code>{\" 配置的方式来指定 WebSocket URL。\"}</_components.p>{\"\\n\"}<_components.h3 id=\"默认配置\">{\"默认配置\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#默认配置\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"默认配置如下，Builder 会根据当前页面的 location 自动推导 WebSocket 请求的 URL：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export default {\\n  tools: {\\n    devServer: {\\n      client: {\\n        path: '/webpack-hmr',\\n        // 默认设置为 dev server 的端口号\\n        port: '',\\n        // 默认设置为 location.hostname\\n        host: '',\\n        // 默认设置为 location.protocol === 'https:' ? 'wss' : 'ws'\\n        protocol: '',\\n      },\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"线上代理\">{\"线上代理\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#线上代理\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"如果你将一个线上页面代理到本地进行开发，WebSocket 请求将会连接失败。此时你可以尝试将 \"}<_components.code>{\"devServer.client\"}</_components.code>{\" 配置成如下值，使 HMR 请求能打到本地的 Dev Server。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export default {\\n  tools: {\\n    devServer: {\\n      client: {\\n        host: 'localhost',\\n        protocol: 'ws',\\n      },\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"live-reloading-和-hot-reloading-的区别\">{\"Live reloading 和 Hot reloading 的区别\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#live-reloading-和-hot-reloading-的区别\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"Live reloading: 修改文件之后，webpack 重新编译，并强制刷新浏览器，属于全局（整个应用）刷新，相当于 \"}<_components.code>{\"window.location.reload()\"}</_components.code>{\"；\"}</_components.li>{\"\\n\"}<_components.li>{\"Hot reloading: 修改文件之后，webpack 重新编译对应模块，刷新时可以记住应用的状态，从而做到局部刷新，即热更新。\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.p>{\"DevServer 提供了 \"}<_components.a href=\"/api/config-tools#hot\">{\"hot\"}</_components.a>{\" 和 \"}<_components.a href=\"/api/config-tools#livereload\">{\"liveReload\"}</_components.a>{\" 这两个配置项来控制更新方式。当 hot 和 liveReload 同时开启时，DevServer 会优先尝试使用 hot 模式 (HMR)，如果 HMR 更新失败后，会降级到重新加载页面。\"}</_components.p>{\"\\n\"}<_components.h2 id=\"常见问题\">{\"常见问题\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#常见问题\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"请参考 \"}<_components.a href=\"/guide/faq/hmr\">{\"热更新问题\"}</_components.a>{\"。\"}</_components.p></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","a","p","ul","li","h2","pre","code","h3","components","id","className","href","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_"],"mappings":"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"}