{"version":3,"file":"static/js/async/docs_en_guide_optimization_optimize-bundle_md.25775866.js","sources":["./docs/en/guide/optimization/optimize-bundle.md"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"en%2Fguide%2Foptimization%2Foptimize-bundle.md\"] = {\"toc\":[{\"text\":\"Reduce duplicate dependencies\",\"id\":\"reduce-duplicate-dependencies\",\"depth\":2},{\"text\":\"Use lightweight libraries\",\"id\":\"use-lightweight-libraries\",\"depth\":2},{\"text\":\"Adjust Browserslist\",\"id\":\"adjust-browserslist\",\"depth\":2},{\"text\":\"Usage polyfill\",\"id\":\"usage-polyfill\",\"depth\":2},{\"text\":\"Image Compression\",\"id\":\"image-compression\",\"depth\":2},{\"text\":\"Split Chunk\",\"id\":\"split-chunk\",\"depth\":2}],\"title\":\"Bundle Size Optimization\",\"frontmatter\":{}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        p: \"p\",\n        h2: \"h2\",\n        ul: \"ul\",\n        li: \"li\",\n        code: \"code\",\n        pre: \"pre\",\n        div: \"div\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"bundle-size-optimization\">{\"Bundle Size Optimization\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#bundle-size-optimization\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.p>{\"Bundle size optimization is an important part in production environment because it directly affects the user experience of online users. In this document, we will introduce some common bundle size optimization methods in Builder.\"}</_components.p>{\"\\n\"}<_components.h2 id=\"reduce-duplicate-dependencies\">{\"Reduce duplicate dependencies\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#reduce-duplicate-dependencies\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"In real projects, there will be some third-party dependencies installed with multiple versions. Duplicate dependencies can lead to larger bundles and slower builds.\"}</_components.p>{\"\\n\"}<_components.p>{\"We can detect or eliminate duplicate dependencies with some community tools.\"}</_components.p>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"If you are using \"}<_components.code>{\"pnpm >= 7.26.0\"}</_components.code>{\", you can use the \"}<_components.a href=\"https://pnpm.io/cli/dedupe\" target=\"_blank\" rel=\"noopener noreferrer\">{\"pnpm dedupe\"}</_components.a>{\" command to upgrade and eliminate duplicate dependencies.\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-bash\">{\"pnpm dedupe\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"If you are using \"}<_components.code>{\"pnpm < 7.26.0\"}</_components.code>{\", you can use \"}<_components.a href=\"https://github.com/ocavue/pnpm-deduplicate\" target=\"_blank\" rel=\"noopener noreferrer\">{\"pnpm-deduplicate\"}</_components.a>{\" to analyze all duplicate dependencies, then update dependencies or declare \"}<_components.a href=\"https://pnpm.io/package_json#pnpmoverrides\" target=\"_blank\" rel=\"noopener noreferrer\">{\"pnpm overrides\"}</_components.a>{\" to merge duplicated dependencies.\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-bash\">{\"npx pnpm-deduplicate --list\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"If you are using \"}<_components.code>{\"yarn\"}</_components.code>{\", you can use \"}<_components.a href=\"https://github.com/scinos/yarn-deduplicate\" target=\"_blank\" rel=\"noopener noreferrer\">{\"yarn-deduplicate\"}</_components.a>{\" to automatically merge duplicated dependencies:\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-bash\">{\"npx yarn-deduplicate && yarn\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"use-lightweight-libraries\">{\"Use lightweight libraries\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#use-lightweight-libraries\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"It is recommended to using lightweight libraries in your project, such as replacing \"}<_components.a href=\"https://momentjs.com/\" target=\"_blank\" rel=\"noopener noreferrer\">{\"moment\"}</_components.a>{\" with \"}<_components.a href=\"https://day.js.org/\" target=\"_blank\" rel=\"noopener noreferrer\">{\"day.js\"}</_components.a>{\".\"}</_components.p>{\"\\n\"}<_components.p>{\"If you want to find out the large libraries in the project, you can add the \"}<_components.code>{\"BUNDLE_ANALYZE=true\"}</_components.code>{\" environment variable when building:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-bash\">{\"BUNDLE_ANALYZE=true pnpm build\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"See the \"}<_components.a href=\"/api/config-performance#performancebundleanalyze\">{\"performance.bundleAnalyze\"}</_components.a>{\" configuration for details.\"}</_components.p>{\"\\n\"}<_components.h2 id=\"adjust-browserslist\">{\"Adjust Browserslist\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#adjust-browserslist\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"The Builder will compile the code according to the project's Browserslist config, and inject some Polyfills. If the project does not need to be compatible with legacy browsers, you can adjust the Browserslist and drop some legacy browsers, thereby reducing the compilation overhead on syntax and polyfill.\"}</_components.p>{\"\\n\"}<_components.p>{\"Builder's default Browserslist config is:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"['> 0.01%', 'not dead', 'not op_mini all'];\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"For example, if you only need to be compatible with browsers above Chrome 61, you can change it to:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"['Chrome >= 61'];\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.div className=\"modern-directive tip\"><_components.div className=\"modern-directive-title\">{\"TIP\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"Please read the \"}<_components.a href=\"/guide/advanced/browserslist\">{\"Browserslist\"}</_components.a>{\" chapter to know more about the usage of Browserslist.\\n\"}</_components.p></_components.div></_components.div>{\"\\n\"}<_components.h2 id=\"usage-polyfill\">{\"Usage polyfill\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#usage-polyfill\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"When it is clear that third-party dependencies do not require additional polyfill, you can set \"}<_components.a href=\"/en/api/config-output#outputpolyfill\">{\"output.polyfill\"}</_components.a>{\" to \"}<_components.code>{\"usage\"}</_components.code>{\".\"}</_components.p>{\"\\n\"}<_components.p>{\"In \"}<_components.code>{\"usage\"}</_components.code>{\" mode, Builder analyzes the syntax used in the source code and injects the required polyfill code on demand to reduce the size of polyfill.\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"export default {\\n  output: {\\n    polyfill: 'usage',\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.div className=\"modern-directive tip\"><_components.div className=\"modern-directive-title\">{\"TIP\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"Please read the \"}<_components.a href=\"/guide/advanced/browser-compatibility\">{\"Browser Compatibility\"}</_components.a>{\" chapter to know more about the usage of Browserslist.\\n\"}</_components.p></_components.div></_components.div>{\"\\n\"}<_components.h2 id=\"image-compression\">{\"Image Compression\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#image-compression\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"In general front-end projects, the size of image often accounts for a large proportion of the total bundle size of the project.So if the image size can be reduced as much as possible, it will have a significant optimization effect on the project bundle size. You can enable image compression by registering a plugin in the Builder:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"import { builderPluginImageCompress } from '@modern-js/builder-plugin-image-compress';\\n\\n// Add the plugin to the Builder\\nbuilder.addPlugins([builderPluginImageCompress()]);\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"See details in \"}<_components.a href=\"/en/plugins/plugin-image-compress\">{\"plugin-image-compress\"}</_components.a>{\".\"}</_components.p>{\"\\n\"}<_components.h2 id=\"split-chunk\">{\"Split Chunk\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#split-chunk\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"A great chunk splitting strategy is very important to improve the loading performance of the application. It can make full use of the browser's caching mechanism to reduce the number of requests and improve the loading speed of the application.\"}</_components.p>{\"\\n\"}<_components.p>{\"A variety of \"}<_components.a href=\"/en/guide/optimization/split-chunk\">{\"chunk splitting strategies\"}</_components.a>{\" are built into Builder, which can meet the needs of most applications. You can also customize the chunk splitting config according to your own business scenarios.\"}</_components.p>{\"\\n\"}<_components.p>{\"For example, split the \"}<_components.code>{\"axios\"}</_components.code>{\" library under node_modules into \"}<_components.code>{\"axios.js\"}</_components.code>{\":\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"export default {\\n  performance: {\\n    chunkSplit: {\\n      strategy: 'split-by-experience',\\n      forceSplitting: {\\n        axios: /node_modules\\\\/axios/,\\n      },\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","a","p","h2","ul","li","code","pre","div","components","id","className","href","target","rel","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_"],"mappings":"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"}