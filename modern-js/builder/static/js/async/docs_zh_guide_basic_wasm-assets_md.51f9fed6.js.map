{"version":3,"file":"static/js/async/docs_zh_guide_basic_wasm-assets_md.51f9fed6.js","sources":["./docs/zh/guide/basic/wasm-assets.md"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"zh%2Fguide%2Fbasic%2Fwasm-assets.md\"] = {\"toc\":[{\"text\":\"引用方式\",\"id\":\"引用方式\",\"depth\":2},{\"text\":\"输出目录\",\"id\":\"输出目录\",\"depth\":2},{\"text\":\"添加类型声明\",\"id\":\"添加类型声明\",\"depth\":2}],\"title\":\"引用 Wasm 资源\",\"frontmatter\":{}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        p: \"p\",\n        div: \"div\",\n        h2: \"h2\",\n        pre: \"pre\",\n        code: \"code\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"引用-wasm-资源\">{\"引用 Wasm 资源\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#引用-wasm-资源\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.p>{\"Builder 支持在代码引用 WebAssembly 资源。\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive tip\"><_components.div className=\"modern-directive-title\">{\"什么是 WebAssembly\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"WebAssembly（缩写为 wasm）是一种可移植、高性能的字节码格式，被设计用来在现代 Web 浏览器中执行 CPU 密集型计算任务，为 Web 平台带来了接近本地编译代码的性能和可靠性。\"}</_components.p></_components.div></_components.div>{\"\\n\"}<_components.h2 id=\"引用方式\">{\"引用方式\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#引用方式\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"你可以直接在 JavaScript 文件中引用一个 WebAssembly 模块：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\" meta='title=\"index.js\"'>{\"import { add } from './add.wasm';\\n\\nconsole.log(add); // [native code]\\nconsole.log(add(1, 2)); // 3\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"也可以通过 dynamic import 来引用 WebAssembly 模块：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\" meta='title=\"index.js\"'>{\"import('./add.wasm').then(({ add }) => {\\n  console.log('---- Async Wasm Module');\\n  console.log(add); // [native code]\\n  console.log(add(1, 2)); // 3\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"还可以通过 \"}<_components.code>{\"new URL\"}</_components.code>{\" 语法来获取 WebAssembly 模块的路径：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\" meta='title=\"index.js\"'>{\"const wasmURL = new URL('./add.wasm', import.meta.url);\\n\\nconsole.log(wasmURL).pathname; // \\\"/static/wasm/[hash].module.wasm\\\"\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"输出目录\">{\"输出目录\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#输出目录\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"当 \"}<_components.code>{\".wasm\"}</_components.code>{\" 资源被引用后，默认会被 Builder 输出到 \"}<_components.code>{\"dist/static/wasm\"}</_components.code>{\" 目录下。\"}</_components.p>{\"\\n\"}<_components.p>{\"你可以通过 \"}<_components.a href=\"/api/config-output#outputdistpath\">{\"output.distPath\"}</_components.a>{\" 配置项来修改 \"}<_components.code>{\".wasm\"}</_components.code>{\" 产物的输出目录。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"export default {\\n  output: {\\n    distPath: {\\n      wasm: 'resource/wasm',\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"添加类型声明\">{\"添加类型声明\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#添加类型声明\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"当你在 TypeScript 代码中引用 Wasm 文件时，通常需要添加相应的类型声明。\"}</_components.p>{\"\\n\"}<_components.p>{\"比如 \"}<_components.code>{\"add.wasm\"}</_components.code>{\" 文件导出了 \"}<_components.code>{\"add()\"}</_components.code>{\" 方法，那么你可以在同级目录下创建一个 \"}<_components.code>{\"add.wasm.d.ts\"}</_components.code>{\" 文件，并添加相应的类型声明：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"add.wasm.d.ts\"'>{\"export const add = (num1: number, num2: number) => number;\\n\"}</_components.code></_components.pre></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","a","p","div","h2","pre","code","components","id","className","href","meta","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_"],"mappings":"wNAAA,E,mDAGA,SAASA,EAAkBC,CAAK,EAC5B,IAAMC,EAAcC,OAAOC,MAAM,CAAC,CAC9BC,GAAI,KACJC,EAAG,IACHC,EAAG,IACHC,IAAK,MACLC,GAAI,KACJC,IAAK,MACLC,KAAM,MACV,EAAG,yBAAsBV,EAAMW,UAAU,EACzC,MAAO,uB,UAAE,WAACV,EAAYG,EAAE,EAACQ,GAAG,a,UAAc,aAAa,UAACX,EAAYI,CAAC,EAACQ,UAAU,gBAAgB,cAAY,OAAOC,KAAK,c,SAAe,G,MAAsC,KAAK,UAACb,EAAYK,CAAC,E,SAAE,iC,GAAmD,KAAK,WAACL,EAAYM,GAAG,EAACM,UAAU,uB,UAAuB,UAACZ,EAAYM,GAAG,EAACM,UAAU,yB,SAA0B,iB,GAAoC,UAACZ,EAAYM,GAAG,EAACM,UAAU,2B,SAA2B,UAACZ,EAAYK,CAAC,E,SAAE,mG,QAAyJ,KAAK,WAACL,EAAYO,EAAE,EAACI,GAAG,O,UAAQ,OAAO,UAACX,EAAYI,CAAC,EAACQ,UAAU,gBAAgB,cAAY,OAAOC,KAAK,Q,SAAS,G,MAAsC,KAAK,UAACb,EAAYK,CAAC,E,SAAE,2C,GAA6D,KAAK,UAACL,EAAYQ,GAAG,E,SAAC,UAACR,EAAYS,IAAI,EAACG,UAAU,cAAcE,KAAK,mB,SAAoB,yG,KAAgJ,KAAK,UAACd,EAAYK,CAAC,E,SAAE,0C,GAA4D,KAAK,UAACL,EAAYQ,GAAG,E,SAAC,UAACR,EAAYS,IAAI,EAACG,UAAU,cAAcE,KAAK,mB,SAAoB,iK,KAAwM,KAAK,WAACd,EAAYK,CAAC,E,UAAE,SAAS,UAACL,EAAYS,IAAI,E,SAAE,S,GAA8B,4B,GAA6C,KAAK,UAACT,EAAYQ,GAAG,E,SAAC,UAACR,EAAYS,IAAI,EAACG,UAAU,cAAcE,KAAK,mB,SAAoB,oI,KAA2K,KAAK,WAACd,EAAYO,EAAE,EAACI,GAAG,O,UAAQ,OAAO,UAACX,EAAYI,CAAC,EAACQ,UAAU,gBAAgB,cAAY,OAAOC,KAAK,Q,SAAS,G,MAAsC,KAAK,WAACb,EAAYK,CAAC,E,UAAE,KAAK,UAACL,EAAYS,IAAI,E,SAAE,O,GAA4B,4BAA4B,UAACT,EAAYS,IAAI,E,SAAE,kB,GAAuC,Q,GAAyB,KAAK,WAACT,EAAYK,CAAC,E,UAAE,SAAS,UAACL,EAAYI,CAAC,EAACS,KAAK,oC,SAAqC,iB,GAAmC,WAAW,UAACb,EAAYS,IAAI,E,SAAE,O,GAA4B,Y,GAA6B,KAAK,UAACT,EAAYQ,GAAG,E,SAAC,UAACR,EAAYS,IAAI,EAACG,UAAU,c,SAAe,kG,KAAyI,KAAK,WAACZ,EAAYO,EAAE,EAACI,GAAG,S,UAAU,SAAS,UAACX,EAAYI,CAAC,EAACQ,UAAU,gBAAgB,cAAY,OAAOC,KAAK,U,SAAW,G,MAAsC,KAAK,UAACb,EAAYK,CAAC,E,SAAE,8C,GAAgE,KAAK,WAACL,EAAYK,CAAC,E,UAAE,MAAM,UAACL,EAAYS,IAAI,E,SAAE,U,GAA+B,UAAU,UAACT,EAAYS,IAAI,E,SAAE,O,GAA4B,uBAAuB,UAACT,EAAYS,IAAI,E,SAAE,e,GAAoC,kB,GAAmC,KAAK,UAACT,EAAYQ,GAAG,E,SAAC,UAACR,EAAYS,IAAI,EAACG,UAAU,cAAcE,KAAK,wB,SAAyB,8D,OAC7lG,CAdA,GAAAC,UAAA,EAAWC,mBAAmB,EAA9B,GAAWA,mBAAmB,CAAK,CAAC,GACpCD,WAAWC,mBAAmB,CAAC,sCAAsC,CAAG,CAAC,IAAM,CAAC,CAAC,KAAO,OAAO,GAAK,OAAO,MAAQ,CAAC,EAAE,CAAC,KAAO,OAAO,GAAK,OAAO,MAAQ,CAAC,EAAE,CAAC,KAAO,SAAS,GAAK,SAAS,MAAQ,CAAC,EAAE,CAAC,MAAQ,aAAa,YAAc,CAAC,CAAC,EAkB5O,MAJA,W,IAAoBjB,EAAQ,UAAR,6CAAQ,CAAC,EACRkB,EAAc,AAAAhB,OAAOC,MAAM,CAAC,CAAC,EAAG,yBAAsBH,EAAMW,UAAU,EAA/EQ,OAAO,CACf,OAAOD,EAAY,UAACA,EAAA,mBAAclB,GAAA,C,SAAO,UAACD,EAAA,KAAAqB,CAAA,AAAAA,EAAA,GAAsBpB,G,IAAuBD,EAAkBC,EAC7G,C"}