(self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).push([["docs_en_api_config-performance_mdx"],{85006:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return _}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169"),a=r("2512"),o=r("35872"),d=r("8147"),h=r("97687"),p=r("71279"),u=r("69179"),x=r("81851"),j=r("30131"),f=r("77260"),m=r("74579"),g=r("30935"),b=r("38793");function y(e){var n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"performance-config",children:["Performance Config",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performance-config",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"This section describes some performance related configurations in Modern.js Builder."}),"\n",(0,t.jsxs)(n.h2,{id:"performancebuildcache",children:["performance.buildCache",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performancebuildcache",children:"#"})]}),"\n","\n",(0,t.jsx)(a.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performancebundleanalyze",children:["performance.bundleAnalyze",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performancebundleanalyze",children:"#"})]}),"\n","\n",(0,t.jsx)(o.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performancechunksplit",children:["performance.chunkSplit",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performancechunksplit",children:"#"})]}),"\n","\n",(0,t.jsx)(d.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performancednsprefetch",children:["performance.dnsPrefetch",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performancednsprefetch",children:"#"})]}),"\n","\n",(0,t.jsx)(h.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performancepreconnect",children:["performance.preconnect",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performancepreconnect",children:"#"})]}),"\n","\n",(0,t.jsx)(p.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performanceprefetch",children:["performance.prefetch",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performanceprefetch",children:"#"})]}),"\n","\n",(0,t.jsx)(u.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performancepreload",children:["performance.preload",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performancepreload",children:"#"})]}),"\n","\n",(0,t.jsx)(x.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performanceprintfilesize",children:["performance.printFileSize",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performanceprintfilesize",children:"#"})]}),"\n","\n",(0,t.jsx)(j.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performanceprofile",children:["performance.profile",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performanceprofile",children:"#"})]}),"\n","\n",(0,t.jsx)(f.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performanceremoveconsole",children:["performance.removeConsole",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performanceremoveconsole",children:"#"})]}),"\n","\n",(0,t.jsx)(m.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performanceremovemomentlocale",children:["performance.removeMomentLocale",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performanceremovemomentlocale",children:"#"})]}),"\n","\n",(0,t.jsx)(g.default,{}),"\n",(0,t.jsxs)(n.h2,{id:"performancetransformlodash",children:["performance.transformLodash",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#performancetransformlodash",children:"#"})]}),"\n","\n",(0,t.jsx)(b.default,{})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fapi%2Fconfig-performance.mdx"]={toc:[{text:"performance.buildCache",id:"performancebuildcache",depth:2},{text:"performance.bundleAnalyze",id:"performancebundleanalyze",depth:2},{text:"performance.chunkSplit",id:"performancechunksplit",depth:2},{text:"performance.dnsPrefetch",id:"performancednsprefetch",depth:2},{text:"performance.preconnect",id:"performancepreconnect",depth:2},{text:"performance.prefetch",id:"performanceprefetch",depth:2},{text:"performance.preload",id:"performancepreload",depth:2},{text:"performance.printFileSize",id:"performanceprintfilesize",depth:2},{text:"performance.profile",id:"performanceprofile",depth:2},{text:"performance.removeConsole",id:"performanceremoveconsole",depth:2},{text:"performance.removeMomentLocale",id:"performanceremovemomentlocale",depth:2},{text:"performance.transformLodash",id:"performancetransformlodash",depth:2}],title:"Performance Config",frontmatter:{extractApiHeaders:[2]}};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(y,(0,i._)({},e))})):y(e)}},2512:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",h3:"h3",a:"a",h4:"h4"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Type:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type BuildCacheConfig =\n  | {\n      /**\n       * Base directory for the filesystem cache.\n       */\n      cacheDirectory?: string;\n      /**\n       * Set different cache names based on cacheDigest content.\n       */\n      cacheDigest?: Array<string | undefined>;\n    }\n  | boolean;\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Default:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const defaultBuildCacheConfig = {\n  cacheDirectory: './node_modules/.cache/webpack',\n};\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Bundler:"})," ",(0,t.jsx)(n.code,{children:"only support webpack"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Controls the Builder's caching behavior during the build process."}),"\n",(0,t.jsxs)(n.p,{children:["Builder will enable build cache by default to improve the compile speed, the generated cache files are write to the ",(0,t.jsx)(n.code,{children:"./node_modules/.cache/webpack"})," directory by default."]}),"\n",(0,t.jsxs)(n.p,{children:["You can configure the cache path with ",(0,t.jsx)(n.code,{children:"buildCache"}),", e.g."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    buildCache: {\n      cacheDirectory: './node_modules/.custom_cache/webpack',\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can also disable the build cache by setting it to ",(0,t.jsx)(n.code,{children:"false"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    buildCache: false,\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"cachedigest",children:["cacheDigest",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cachedigest",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"cacheDigest"})," is used to add some environment variables that will affect the build results. The Builder will set the cache name based on the ",(0,t.jsx)(n.code,{children:"cacheDigest"})," content and the current build mode to ensure that different cacheDigests can hit different caches."]}),"\n",(0,t.jsxs)(n.h4,{id:"example",children:["Example",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["The current project needs to set different extensions according to different ",(0,t.jsx)(n.code,{children:"APP_ID"}),". By default, since the code & configuration & dependencies of the current project have not changed, the previous cache will be hit."]}),"\n",(0,t.jsxs)(n.p,{children:["By adding ",(0,t.jsx)(n.code,{children:"APP_ID"})," to ",(0,t.jsx)(n.code,{children:"cacheDigest"}),", different cache results will be searched when APP_ID changes, thereby avoiding hitting cache results that do not meet expectations."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    bundlerChain: (chain: any) => {\n      if (process.env.APP_ID === 'xxx') {\n        chain.resolve.extensions.prepend('.ttp.ts');\n      }\n    },\n  },\n  performance: {\n    buildCache: {\n      cacheDigest: [process.env.APP_ID],\n    },\n  },\n};\n"})})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2FbuildCache.md"]={toc:[{text:"cacheDigest",id:"cachedigest",depth:3},{text:"Example",id:"example",depth:4}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},35872:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",a:"a",pre:"pre",h3:"h3",img:"img",ol:"ol"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"Object | undefined"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Used to enable the ",(0,t.jsx)(n.a,{href:"https://github.com/webpack-contrib/webpack-bundle-analyzer",target:"_blank",rel:"noopener noreferrer",children:"webpack-bundle-analyzer"})," plugin to analyze the size of the output."]}),"\n",(0,t.jsxs)(n.p,{children:["By default, Builder does not enable ",(0,t.jsx)(n.code,{children:"webpack-bundle-analyzer"}),". When this feature is enabled, the default configuration is as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const defaultConfig = {\n  analyzerMode: 'static',\n  openAnalyzer: false,\n  // target is the compilation target, such as `web`, `node`, etc.\n  reportFilename: `report-${target}.html`,\n};\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"enable-bundle-analyze",children:["Enable Bundle Analyze",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#enable-bundle-analyze",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["You have two ways to enable ",(0,t.jsx)(n.code,{children:"webpack-bundle-analyzer"})," to analyze the size of the output files:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Add the environment variable ",(0,t.jsx)(n.code,{children:"BUNDLE_ANALYZE=true"}),", for example:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"BUNDLE_ANALYZE=true pnpm build\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Configure ",(0,t.jsx)(n.code,{children:"performance.bundleAnalyze"})," to enable it permanently:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    bundleAnalyze: {},\n  },\n};\n"})}),"\n",(0,t.jsx)(n.p,{children:"After enabling it, Builder will generate an HTML file that analyzes the size of the output files, and print the following log in the Terminal:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Webpack Bundle Analyzer saved report to /Project/my-project/dist/report-web.html\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can manually open the file in the browser and view the detail of the bundle size. When an area is larger, it indicates that its corresponding bundle size is larger."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/mwa-build-analyze-8784f762c1ab0cb20935829d5f912c4c.png",alt:""})}),"\n",(0,t.jsxs)(n.h3,{id:"override-default-configuration",children:["Override Default Configuration",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#override-default-configuration",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["You can override the default configuration through ",(0,t.jsx)(n.code,{children:"performance.bundleAnalyze"}),", such as enabling the server mode:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    bundleAnalyze: process.env.BUNDLE_ANALYZE\n      ? {\n          analyzerMode: 'server',\n          openAnalyzer: true,\n        }\n      : {},\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"size-types",children:["Size Types",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#size-types",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.code,{children:"webpack-bundle-analyzer"})," panel, you can control size types in the upper left corner (default is ",(0,t.jsx)(n.code,{children:"Parsed"}),"):"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Stat"}),": The size obtained from the ",(0,t.jsx)(n.code,{children:"stats"})," object of the bundler, which reflects the size of the code before minification."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Parsed"}),": The size of the file on the disk, which reflects the size of the code after minification."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Gzipped"}),": The file size requested in the browser reflects the size of the code after minification and gzip."]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"generate-statsjson",children:["Generate stats.json",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#generate-statsjson",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["By setting ",(0,t.jsx)(n.code,{children:"generateStatsFile"})," to true, stats JSON file will be generated in bundle output directory."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    bundleAnalyze: {\n      generateStatsFile: true,\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"notes",children:["Notes",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#notes",children:"#"})]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Enabling the server mode will cause the ",(0,t.jsx)(n.code,{children:"build"})," process to not exit normally."]}),"\n",(0,t.jsxs)(n.li,{children:["Enabling ",(0,t.jsx)(n.code,{children:"bundleAnalyzer"})," will reduce build speed. Therefore, this configuration should not be enabled during daily development, and it is recommended to enable it on demand through the ",(0,t.jsx)(n.code,{children:"BUNDLE_ANALYZE"})," environment variable."]}),"\n",(0,t.jsxs)(n.li,{children:["Since no code minification and other optimizations are performed in the ",(0,t.jsx)(n.code,{children:"dev"})," phase, the real output size cannot be reflected, so it is recommended to analyze the output size in the ",(0,t.jsx)(n.code,{children:"build"})," phase."]}),"\n"]})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2FbundleAnalyze.md"]={toc:[{text:"Enable Bundle Analyze",id:"enable-bundle-analyze",depth:3},{text:"Override Default Configuration",id:"override-default-configuration",depth:3},{text:"Size Types",id:"size-types",depth:3},{text:"Generate stats.json",id:"generate-statsjson",depth:3},{text:"Notes",id:"notes",depth:3}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},8147:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre",h3:"h3",a:"a",div:"div",blockquote:"blockquote"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"Object"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"{ strategy: 'split-by-experience' }"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"performance.chunkSplit"})," is used to configure the chunk splitting strategy. The type of ",(0,t.jsx)(n.code,{children:"ChunkSplit"})," is as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type ForceSplitting = RegExp[] | Record<string, RegExp>;\n\ninterface BaseChunkSplit {\n  strategy?:\n    | 'split-by-module'\n    | 'split-by-experience'\n    | 'all-in-one'\n    | 'single-vendor';\n  override?: SplitChunks;\n  forceSplitting?: ForceSplitting;\n}\n\ninterface SplitBySize {\n  strategy?: 'split-by-size';\n  minSize?: number;\n  maxSize?: number;\n  override?: SplitChunks;\n  forceSplitting?: ForceSplitting;\n}\n\ninterface SplitCustom {\n  strategy?: 'custom';\n  splitChunks?: SplitChunks;\n  forceSplitting?: ForceSplitting;\n}\n\nexport type ChunkSplit = BaseChunkSplit | SplitBySize | SplitCustom;\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"chunksplitstrategy",children:["chunkSplit.strategy",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chunksplitstrategy",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Builder supports the following chunk splitting strategies:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"split-by-experience"}),": an empirical splitting strategy, automatically splits some commonly used npm packages into chunks of moderate size."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"split-by-module"}),": split by NPM package granularity, each NPM package corresponds to a chunk."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"split-by-size"}),": automatically split according to module size."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"all-in-one"}),": bundle all codes into one chunk."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"single-vendor"}),": bundle all NPM packages into a single chunk."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"custom"}),": custom chunk splitting strategy."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"default-strategy",children:["Default Strategy",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#default-strategy",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["Builder adopts the ",(0,t.jsx)(n.code,{children:"split-by-experience"})," strategy by default, which is a strategy we have developed from experience. Specifically, when the following npm packages are referenced in your project, they will automatically be split into separate chunks:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lib-polyfill.js"}),": includes ",(0,t.jsx)(n.code,{children:"core-js"}),", ",(0,t.jsx)(n.code,{children:"@babel/runtime"}),", ",(0,t.jsx)(n.code,{children:"@swc/helpers"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lib-react.js"}),": includes ",(0,t.jsx)(n.code,{children:"react"}),", ",(0,t.jsx)(n.code,{children:"react-dom"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lib-router.js"}),": includes ",(0,t.jsx)(n.code,{children:"react-router"}),", ",(0,t.jsx)(n.code,{children:"react-router-dom"}),", ",(0,t.jsx)(n.code,{children:"history"}),", ",(0,t.jsx)(n.code,{children:"@remix-run/router"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lib-lodash.js"}),": includes ",(0,t.jsx)(n.code,{children:"lodash"}),", ",(0,t.jsx)(n.code,{children:"lodash-es"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lib-antd.js"}),": includes ",(0,t.jsx)(n.code,{children:"antd"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lib-arco.js"}),": includes ",(0,t.jsx)(n.code,{children:"@arco-design/web-react"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lib-semi.js"}),": includes ",(0,t.jsx)(n.code,{children:"@douyinfe/semi-ui"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.div,{className:"modern-directive tip",children:[(0,t.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,t.jsx)(n.div,{className:"modern-directive-content",children:(0,t.jsx)(n.p,{children:"If the above npm packages are not installed or used in the project, the corresponding chunk will not be generated."})})]}),"\n",(0,t.jsxs)(n.p,{children:["If you want to use other splitting strategies, you can specify it via ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.strategy"}),"."]}),"\n",(0,t.jsxs)(n.div,{className:"modern-directive tip",children:[(0,t.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,t.jsx)(n.div,{className:"modern-directive-content",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"split-by-module"})," strategy is not supported when using Rspack as the bundler.\n"]})})]}),"\n",(0,t.jsxs)(n.h3,{id:"chunksplitminsize",children:["chunkSplit.minSize",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chunksplitminsize",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"number"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"10000"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.strategy"})," is ",(0,t.jsx)(n.code,{children:"split-by-size"}),", you can specify the minimum size of a chunk via ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.minSize"}),", the unit is bytes. The default value is ",(0,t.jsx)(n.code,{children:"10000"}),". For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-size',\n      minSize: 20000,\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"chunksplitmaxsize",children:["chunkSplit.maxSize",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chunksplitmaxsize",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"number"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"Infinity"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.strategy"})," is ",(0,t.jsx)(n.code,{children:"split-by-size"}),", you can specify the maximum size of a chunk via ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.maxSize"}),", the unit is bytes. The default value is ",(0,t.jsx)(n.code,{children:"Infinity"}),". For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-size',\n      maxSize: 50000,\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"chunksplitforcesplitting",children:["chunkSplit.forceSplitting",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chunksplitforcesplitting",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"RegExp[] | Record<string, RegExp>"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"[]"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Via ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.forceSplitting"}),", you can specify the NPM packages that need to be forced to split."]}),"\n",(0,t.jsxs)(n.p,{children:["For example, split the ",(0,t.jsx)(n.code,{children:"axios"})," library under node_modules into ",(0,t.jsx)(n.code,{children:"axios.js"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n   performance: {\n     chunkSplit: {\n       strategy: 'split-by-experience',\n       forceSplitting: {\n         axios: /node_modules\\/axios/,\n       },\n     },\n   },\n};\n"})}),"\n",(0,t.jsx)(n.p,{children:"This is an easier way than configuring webpack's splitChunks directly."}),"\n",(0,t.jsxs)(n.div,{className:"modern-directive tip",children:[(0,t.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,t.jsx)(n.div,{className:"modern-directive-content",children:(0,t.jsxs)(n.p,{children:["Chunks split using the ",(0,t.jsx)(n.code,{children:"forceSplitting"})," configuration will be inserted into the HTML file as resources requested for the initial screen using ",(0,t.jsx)(n.code,{children:"<script>"})," tags. Therefore, please split them appropriately based on the actual scenario to avoid excessive size of initial screen resources.\n"]})})]}),"\n",(0,t.jsxs)(n.h3,{id:"chunksplitsplitchunks",children:["chunkSplit.splitChunks",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chunksplitsplitchunks",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.strategy"})," is ",(0,t.jsx)(n.code,{children:"custom"}),", you can specify the custom webpack chunk splitting config via ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.splitChunks"}),". This config will be merged with the webpack splitChunks config (the ",(0,t.jsx)(n.code,{children:"cacheGroups"})," config will also be merged). For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'custom',\n      splitChunks: {\n        cacheGroups: {\n          react: {\n            test: /[\\\\/]node_modules[\\\\/](react|react-dom)[\\\\/]/,\n            name: 'react',\n            chunks: 'all',\n          },\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"chunksplitoverride",children:["chunkSplit.override",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chunksplitoverride",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.strategy"})," is ",(0,t.jsx)(n.code,{children:"split-by-experience"}),", ",(0,t.jsx)(n.code,{children:"split-by-module"}),", ",(0,t.jsx)(n.code,{children:"split-by-size"})," or ",(0,t.jsx)(n.code,{children:"single-vendor"}),", you can specify the custom webpack chunk splitting config via ",(0,t.jsx)(n.code,{children:"performance.chunkSplit.override"}),". This config will be merged with the webpack splitChunks config (the ",(0,t.jsx)(n.code,{children:"cacheGroups"})," config will also be merged). For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-experience',\n      override: {\n        cacheGroups: {\n          react: {\n            test: /[\\\\/]node_modules[\\\\/](react|react-dom)[\\\\/]/,\n            name: 'react',\n            chunks: 'all',\n          },\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:'When the Builder target is "node", since Node Bundles do not need to be splitted to optimize loading performance, the chunkSplit rule will not take effect.'}),"\n"]})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2FchunkSplit.md"]={toc:[{text:"chunkSplit.strategy",id:"chunksplitstrategy",depth:3},{text:"Default Strategy",id:"default-strategy",depth:3},{text:"chunkSplit.minSize",id:"chunksplitminsize",depth:3},{text:"chunkSplit.maxSize",id:"chunksplitmaxsize",depth:3},{text:"chunkSplit.forceSplitting",id:"chunksplitforcesplitting",depth:3},{text:"chunkSplit.splitChunks",id:"chunksplitsplitchunks",depth:3},{text:"chunkSplit.override",id:"chunksplitoverride",depth:3}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},97687:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",p:"p",strong:"strong",code:"code",a:"a",h3:"h3",pre:"pre"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"undefined | string[]"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Specifies that the user agent should preemptively perform DNS resolution for the target resource's origin, refer to ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/dns-prefetch",target:"_blank",rel:"noopener noreferrer",children:"dns-prefetch"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"After this property is set, the domain name can be resolved before the resource is requested, reducing request latency and improving loading performance."}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Performance/dns-prefetch",target:"_blank",rel:"noopener noreferrer",children:"Using dns-prefetch"})," for more details."]}),"\n",(0,t.jsxs)(n.h3,{id:"example",children:["Example",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    dnsPrefetch: ['http://xxx.com'],\n  },\n};\n"})})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2FdnsPrefetch.md"]={toc:[{text:"Example",id:"example",depth:3}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},71279:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",pre:"pre",p:"p",a:"a",h3:"h3"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"undefined | Array<string | PreconnectOption>"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"interface PreconnectOption {\n  href: string;\n  crossorigin?: boolean;\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Specifies that the user agent should preemptively connect to the target resource's origin, refer to ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/preconnect",target:"_blank",rel:"noopener noreferrer",children:"preconnect"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Configuring this property will establish a connection with the server. If the site is HTTPS, this process includes DNS resolution, TCP connection establishment, and TLS handshake. Combining Preconnect and DnsPrefetch can further reduce the delay of cross-domain requests."}),"\n",(0,t.jsxs)(n.h3,{id:"example",children:["Example",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    preconnect: ['http://xxx.com'],\n  },\n};\n"})})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2Fpreconnect.md"]={toc:[{text:"Example",id:"example",depth:3}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},69179:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",pre:"pre",p:"p",a:"a",div:"div",h3:"h3",h4:"h4"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"undefined | true | PrefetchOption"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type IncludeType = 'async-chunks' | 'initial' | 'all-assets' | 'all-chunks';\n\ntype Filter = Array<string | RegExp> | ((filename: string) => boolean);\n\ninterface PrefetchOption {\n  type?: IncludeType;\n  include?: Filter;\n  exclude?: Filter;\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Specifies that the user agent should preemptively fetch and cache the target resource as it is likely to be required for a followup navigation. Refer to ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/prefetch",target:"_blank",rel:"noopener noreferrer",children:"prefetch"}),"."]}),"\n",(0,t.jsxs)(n.div,{className:"modern-directive tip",children:[(0,t.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,t.jsx)(n.div,{className:"modern-directive-content",children:(0,t.jsx)(n.p,{children:"When using Rspack as the bundler, the Prefetch capability is not currently supported in the MPA scenario."})})]}),"\n",(0,t.jsxs)(n.h3,{id:"boolean-type",children:["Boolean Type",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#boolean-type",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["When setting ",(0,t.jsx)(n.code,{children:"performance.prefetch"})," to ",(0,t.jsx)(n.code,{children:"true"}),", resources will be prefetched according to the following configuration:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"{\n  type: 'async-chunks',\n}\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"object-type",children:["Object Type",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#object-type",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["When the value of ",(0,t.jsx)(n.code,{children:"performance.prefetch"})," is ",(0,t.jsx)(n.code,{children:"object"})," type, the Builder will enable the prefetch capability for the specified resource according to the current configuration."]}),"\n",(0,t.jsxs)(n.h4,{id:"prefetchtype",children:["prefetch.type",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#prefetchtype",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"type"})," field controls which resources will be pre-fetched, and supports secondary filtering of specified resources through ",(0,t.jsx)(n.code,{children:"include"})," and ",(0,t.jsx)(n.code,{children:"exclude"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Currently supported resource types are as follows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"async-chunks"}),": prefetch all asynchronous resources (on the current page), including asynchronous js and its associated css, image, font and other resources."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"initial"}),": prefetch all non-async resources (on the current page). It should be noted that if the current script has been added to the html template, no additional pre-fetching will be performed."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"all-chunks"}),": prefetch all resources (on the current page), including all asynchronous and non-asynchronous resources."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"all-assets"}),": prefetch all resources, and resources of other pages will be included in the MPA scenario."]}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"example",children:["Example",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"When you want to prefetch all image resources in png format on the current page, you can configure it as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    prefetch: {\n      type: 'all-chunks',\n      include: [/.*\\.png$/]\n    },\n  },\n};\n"})})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2Fprefetch.md"]={toc:[{text:"Boolean Type",id:"boolean-type",depth:3},{text:"Object Type",id:"object-type",depth:3},{text:"prefetch.type",id:"prefetchtype",depth:4},{text:"Example",id:"example",depth:4}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},81851:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",pre:"pre",p:"p",a:"a",div:"div",h3:"h3",h4:"h4"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"undefined | true | PreloadOption"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type IncludeType = 'async-chunks' | 'initial' | 'all-assets' | 'all-chunks';\n\ntype Filter = Array<string | RegExp> | ((filename: string) => boolean);\n\ninterface PreloadOption {\n  type?: IncludeType;\n  include?: Filter;\n  exclude?: Filter;\n}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Specifies that the user agent must preemptively fetch and cache the target resource for current navigation according to the potential destination given by the as attribute (and the priority associated with the corresponding destination). Refer to ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/preload",target:"_blank",rel:"noopener noreferrer",children:"preload"}),"."]}),"\n",(0,t.jsxs)(n.div,{className:"modern-directive tip",children:[(0,t.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,t.jsx)(n.div,{className:"modern-directive-content",children:(0,t.jsx)(n.p,{children:"When using Rspack as the bundler, the Preload capability is not currently supported in the MPA scenario."})})]}),"\n",(0,t.jsxs)(n.h3,{id:"boolean-type",children:["Boolean Type",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#boolean-type",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["When setting ",(0,t.jsx)(n.code,{children:"performance.preload"})," to ",(0,t.jsx)(n.code,{children:"true"}),", resources will be preloaded according to the following configuration:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"{\n  type: 'async-chunks',\n}\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"object-type",children:["Object Type",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#object-type",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["When the value of ",(0,t.jsx)(n.code,{children:"performance.preload"})," is ",(0,t.jsx)(n.code,{children:"object"})," type, the Builder will enable the preload capability for the specified resource according to the current configuration."]}),"\n",(0,t.jsxs)(n.h4,{id:"preloadtype",children:["preload.type",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#preloadtype",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"type"})," field controls which resources will be pre-fetched, and supports secondary filtering of specified resources through ",(0,t.jsx)(n.code,{children:"include"})," and ",(0,t.jsx)(n.code,{children:"exclude"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Currently supported resource types are as follows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"async-chunks"}),": preload all asynchronous resources (on the current page), including asynchronous js and its associated css, image, font and other resources."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"initial"}),": preload all non-async resources (on the current page). It should be noted that if the current script has been added to the html template, no additional pre-fetching will be performed."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"all-chunks"}),": preload all resources (on the current page), including all asynchronous and non-asynchronous resources."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"all-assets"}),": preload all resources, and resources of other pages will be included in the MPA scenario."]}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"example",children:["Example",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"When you want to preload all image resources in png format on the current page, you can configure it as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    preload: {\n      type: 'all-chunks',\n      include: [/.*\\.png$/]\n    },\n  },\n};\n"})})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2Fpreload.md"]={toc:[{text:"Boolean Type",id:"boolean-type",depth:3},{text:"Object Type",id:"object-type",depth:3},{text:"preload.type",id:"preloadtype",depth:4},{text:"Example",id:"example",depth:4}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},30131:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre",h3:"h3",a:"a"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"boolean"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Whether to print the file sizes after production build."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"info    File sizes after production build:\n\n  File                                     Size         Gzipped\n  dist/static/js/lib-corejs.1c836fe7.js    212.89 kB    66.57 kB\n  dist/static/js/lib-react.fcafbc5c.js     134.65 kB    43.45 kB\n  dist/static/js/main.6ff06f70.js          8.93 kB      3.73 kB\n  dist/static/css/main.9f48031b.css        2.64 kB      927 B\n  dist/html/main/index.html                1.64 kB      874 B\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"example",children:["Example",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Disable the logs:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    printFileSize: false,\n  },\n};\n"})})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2FprintFileSize.md"]={toc:[{text:"Example",id:"example",depth:3}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},77260:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",a:"a",h3:"h3",pre:"pre"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"boolean"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Whether capture timing information for each module, same as the ",(0,t.jsx)(n.a,{href:"https://webpack.js.org/configuration/other-options/#profile",target:"_blank",rel:"noopener noreferrer",children:"profile"})," config of webpack / Rspack."]}),"\n",(0,t.jsxs)(n.h3,{id:"example",children:["Example",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    profile: true,\n  },\n};\n"})}),"\n",(0,t.jsx)(n.p,{children:"When turned on, webpack / Rspack generates a JSON file with some statistics about the module that includes information about timing information for each module."})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2Fprofile.md"]={toc:[{text:"Example",id:"example",depth:3}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},74579:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h4:"h4",a:"a",pre:"pre"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"boolean | ConsoleType[]"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Whether to remove ",(0,t.jsx)(n.code,{children:"console.xx"})," in production build."]}),"\n",(0,t.jsxs)(n.h4,{id:"remove-all-consoles",children:["Remove all consoles",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#remove-all-consoles",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"removeConsole"})," is set to ",(0,t.jsx)(n.code,{children:"true"}),", all types of ",(0,t.jsx)(n.code,{children:"console.xx"})," are removed:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    removeConsole: true,\n  },\n};\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"remove-specific-console",children:["Remove specific console",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#remove-specific-console",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["You can also specify to remove only certain types of ",(0,t.jsx)(n.code,{children:"console.xx"}),", such as ",(0,t.jsx)(n.code,{children:"console.log"})," and ",(0,t.jsx)(n.code,{children:"console.warn"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export default {\n  performance: {\n    removeConsole: ['log', 'warn'],\n  },\n};\n"})}),"\n",(0,t.jsx)(n.p,{children:"The following types of console are currently supported:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type ConsoleType = 'log' | 'info' | 'warn' | 'error' | 'table' | 'group';\n"})})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2FremoveConsole.md"]={toc:[{text:"Remove all consoles",id:"remove-all-consoles",depth:4},{text:"Remove specific console",id:"remove-specific-console",depth:4}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},30935:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",a:"a",pre:"pre"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"boolean"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Whether to remove the locales of ",(0,t.jsx)(n.a,{href:"https://momentjs.com/",target:"_blank",rel:"noopener noreferrer",children:"moment.js"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"moment.js"})," contains a lot of locales by default, which will increase the bundle size."]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"moment.js"})," is used in the project, it is recommended to enable this option to automatically exclude all locales:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    removeMomentLocale: true,\n  },\n};\n"})}),"\n",(0,t.jsx)(n.p,{children:"Once enabled, you can load a specific locale via:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import moment from 'moment';\nimport 'moment/locale/zh-cn';\n\nmoment.locale('zh-cn');\n"})})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2FremoveMomentLocale.md"]={toc:[],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}},38793:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s,i=r("15169"),c=r("43932"),t=r("9880"),l=r("23169");function a(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",a:"a",h3:"h3",pre:"pre"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.code,{children:"boolean"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default:"})," ",(0,t.jsx)(n.code,{children:"true"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Bundler:"})," ",(0,t.jsx)(n.code,{children:"only support webpack"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Specifies whether to modularize the import of ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/lodash",target:"_blank",rel:"noopener noreferrer",children:"lodash"})," and remove unused lodash modules to reduce the code size of lodash."]}),"\n",(0,t.jsxs)(n.p,{children:["This optimization is implemented using ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/babel-plugin-lodash",target:"_blank",rel:"noopener noreferrer",children:"babel-plugin-lodash"})," and ",(0,t.jsx)(n.a,{href:"https://github.com/web-infra-dev/swc-plugins/tree/main/crates/plugin_lodash",target:"_blank",rel:"noopener noreferrer",children:"swc-plugin-lodash"})," under the hood."]}),"\n",(0,t.jsxs)(n.h3,{id:"example",children:["Example",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["This option is enabled by default, and Builder will automatically redirects the code references of ",(0,t.jsx)(n.code,{children:"lodash"})," to sub-paths."]}),"\n",(0,t.jsx)(n.p,{children:"For example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="input.js"',children:"import _ from 'lodash';\nimport { add } from 'lodash/fp';\n\nconst addOne = add(1);\n_.map([1, 2, 3], addOne);\n"})}),"\n",(0,t.jsx)(n.p,{children:"The transformed code will be:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="output.js"',children:"import _add from 'lodash/fp/add';\nimport _map from 'lodash/map';\n\nconst addOne = _add(1);\n_map([1, 2, 3], addOne);\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"disabling-the-transformation",children:["Disabling the Transformation",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#disabling-the-transformation",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["In some cases, the import transformation of ",(0,t.jsx)(n.code,{children:"lodash"})," may generate unexpected code. In such cases, you can manually disable this optimization:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"export default {\n  performance: {\n    transformLodash: false,\n  },\n};\n"})})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fconfig%2Fperformance%2FtransformLodash.md"]={toc:[{text:"Example",id:"example",depth:3},{text:"Disabling the Transformation",id:"disabling-the-transformation",depth:3}],title:"",frontmatter:{}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return n?(0,t.jsx)(n,(0,c._)((0,i._)({},e),{children:(0,t.jsx)(a,(0,i._)({},e))})):a(e)}}}]);