<!doctype html><html lang="zh"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title data-rh="true">插件系统 - Modern.js Builder</title><meta data-rh="true" name="description" content="基于 Rspack 的 Web 构建工具"/>
<script id="check-dark-light">
;(() => {
  const saved = localStorage.getItem('rspress-theme-appearance')
  const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
  if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
    document.documentElement.classList.add('dark')
  }
})()
</script>
<link rel="icon" href="https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/logo-1x-0104.png"><script defer="defer">!function(){var s,t,a,c,e,n,i,j,r,l,o,d,f,y,b={},u={};function p(s){var t=u[s];if(void 0!==t)return t.exports;var a=u[s]={id:s,loaded:!1,exports:{}};return b[s](a,a.exports,p),a.loaded=!0,a.exports}p.m=b,p.es=function(s,t){return Object.keys(s).forEach((function(a){"default"!==a&&!Object.prototype.hasOwnProperty.call(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:function(){return s[a]}})})),s},s={10379:["lib-lodash","lib-polyfill","5197","2206"],11052:["5952"],11216:["5500"],15552:["8473"],16315:["lib-lodash","lib-polyfill","5197","6299"],16533:["6573"],16978:["9085"],17675:["3020","5631"],18043:["lib-lodash","lib-polyfill","5197","9140"],18078:["1816"],18328:["8943"],19588:["4752"],20592:["lib-lodash","lib-polyfill","5197","7477"],20846:["3977"],21029:["6731"],22450:["4513"],22782:["9793"],23097:["5126"],25959:["1767"],26206:["7575"],26381:["lib-lodash","lib-polyfill","5197","7716"],26974:["228"],27300:["6972"],2756:["3433"],28418:["7018"],29308:["1495"],29670:["lib-lodash","lib-polyfill","5197","2370"],29828:["2311"],30126:["35"],31765:["692"],32050:["4556"],3337:["2654"],33664:["2390"],33904:["4403"],35534:["3510"],3610:["9507"],36743:["1486"],36908:["9643"],37460:["1041"],37692:["7292"],37706:["4058"],37741:["3690"],37940:["6366"],37984:["2514"],38066:["lib-lodash","lib-polyfill","5197","4713"],38407:["1075"],38438:["4610"],38494:["lib-lodash","lib-polyfill","5197","3889"],39193:["679"],39281:["5325"],40155:["7285","6220"],41077:["9840"],41695:["8577"],44259:["4569"],44526:["lib-lodash","lib-polyfill","5197","4206"],44680:["2172"],44824:["lib-lodash","lib-polyfill","5197","6662"],45947:["8160"],46377:["6712"],47996:["9630"],48766:["7464"],48785:["5131"],49407:["1191"],49826:["7209"],52331:["4972"],53050:["5875"],53835:["8331"],53951:["5510"],54172:["7087"],54539:["480"],56061:["1494"],56879:["3157"],57389:["361"],58547:["lib-lodash","lib-polyfill","5197","4571"],59014:["3661"],60108:["2274"],60771:["264"],62428:["4466"],62431:["2222"],63004:["4916"],63014:["lib-lodash","lib-polyfill","5197","4112"],64315:["lib-lodash","lib-polyfill","5197","2516"],64350:["652"],6470:["3020","1728"],65715:["9663"],66255:["4755"],6992:["4936"],70551:["5671"],71014:["3614"],71077:["4083"],72030:["6745"],73150:["7978"],7421:["3761"],74487:["7200"],7527:["7992"],76050:["2355"],77156:["7264"],77263:["6314"],78355:["lib-lodash","lib-polyfill","5197","5710"],78904:["2753"],79116:["5326"],79627:["lib-lodash","lib-polyfill","5197","7231"],81940:["lib-lodash","lib-polyfill","5197","4589"],82336:["8572"],8310:["1813"],84384:["2636"],85074:["9422"],86279:["9690"],86505:["9417"],88139:["7285","95"],88526:["3605"],89698:["5453"],898:["602"],90028:["5563"],90136:["4760"],92331:["8502"],9429:["9777"],95277:["5736"],95466:["9841"],95773:["lib-lodash","lib-polyfill","5197","1936"],96001:["lib-lodash","lib-polyfill","5197","5090"],96956:["3958"],98044:["7759"],99039:["6047"]},p.el=function(t){var a=s[t];return void 0===a?Promise.resolve():a.length>1?Promise.all(a.map(p.e)):p.e(a[0])},p.f={},p.e=function(s){return Promise.all(Object.keys(p.f).reduce((function(t,a){return p.f[a](s,t),t}),[]))},p.p="/builder/",p.u=function(s){return{1041:"static/js/async/1041.c03a5b07.js",1075:"static/js/async/1075.f74b70be.js",1191:"static/js/async/1191.a9f1226d.js",1486:"static/js/async/1486.831ff129.js",1494:"static/js/async/1494.f8543907.js",1495:"static/js/async/1495.06f2ed9a.js",1728:"static/js/async/1728.57da20b9.js",1767:"static/js/async/1767.50c06eb8.js",1813:"static/js/async/1813.0c445a17.js",1816:"static/js/async/1816.e7efdebd.js",1936:"static/js/async/1936.23e3c89a.js",2172:"static/js/async/2172.da47d686.js",2206:"static/js/async/2206.0aa4c267.js",2222:"static/js/async/2222.163394d4.js",2274:"static/js/async/2274.025e5ef2.js",228:"static/js/async/228.c1840748.js",2311:"static/js/async/2311.75c45c5b.js",2355:"static/js/async/2355.b819ff0a.js",2370:"static/js/async/2370.04059584.js",2390:"static/js/async/2390.55a5e60a.js",2514:"static/js/async/2514.9d4cee2e.js",2516:"static/js/async/2516.ef928054.js",2636:"static/js/async/2636.ad4ba561.js",264:"static/js/async/264.30639c5e.js",2654:"static/js/async/2654.5f323eb7.js",2753:"static/js/async/2753.b1e3219c.js",3020:"static/js/async/3020.388ae6f7.js",3157:"static/js/async/3157.6810d476.js",3433:"static/js/async/3433.1242d335.js",35:"static/js/async/35.e4ba2b95.js",3510:"static/js/async/3510.4f78a9e0.js",3605:"static/js/async/3605.8d689b59.js",361:"static/js/async/361.ca134268.js",3614:"static/js/async/3614.9d8f65c6.js",3661:"static/js/async/3661.11d95532.js",3690:"static/js/async/3690.eec928b8.js",3761:"static/js/async/3761.abba02b8.js",3889:"static/js/async/3889.791963eb.js",3958:"static/js/async/3958.3eb320d2.js",3977:"static/js/async/3977.6e886f43.js",4058:"static/js/async/4058.fa4ec519.js",4083:"static/js/async/4083.38f28b66.js",4112:"static/js/async/4112.6754448a.js",4206:"static/js/async/4206.561d3035.js",4403:"static/js/async/4403.ea548a90.js",4466:"static/js/async/4466.4075630c.js",4513:"static/js/async/4513.dabe22bd.js",4556:"static/js/async/4556.f63bd63c.js",4569:"static/js/async/4569.d233342d.js",4571:"static/js/async/4571.bb8651ba.js",4589:"static/js/async/4589.47c35540.js",4610:"static/js/async/4610.a7a16aba.js",4713:"static/js/async/4713.e22af3eb.js",4752:"static/js/async/4752.5e4ace35.js",4755:"static/js/async/4755.e6476a17.js",4760:"static/js/async/4760.fc680e65.js",480:"static/js/async/480.6ffe3cb2.js",4916:"static/js/async/4916.7bb9cfd3.js",4936:"static/js/async/4936.e2271ea1.js",4972:"static/js/async/4972.7fe8fad9.js",5090:"static/js/async/5090.c13004b9.js",5126:"static/js/async/5126.794828a6.js",5131:"static/js/async/5131.dcd73de2.js",5325:"static/js/async/5325.3e78e00f.js",5326:"static/js/async/5326.43892481.js",5453:"static/js/async/5453.883ff57d.js",5500:"static/js/async/5500.db908f8c.js",5510:"static/js/async/5510.3c987996.js",5563:"static/js/async/5563.7857a958.js",5631:"static/js/async/5631.3ae261d1.js",5671:"static/js/async/5671.25adad96.js",5710:"static/js/async/5710.ff395513.js",5736:"static/js/async/5736.97459a0d.js",5875:"static/js/async/5875.ca9564d7.js",5952:"static/js/async/5952.90edc93c.js",602:"static/js/async/602.7101347b.js",6047:"static/js/async/6047.0171fb4d.js",6220:"static/js/async/6220.547fe2fe.js",6299:"static/js/async/6299.29f8351e.js",6314:"static/js/async/6314.e20a882b.js",6366:"static/js/async/6366.ceba02fd.js",652:"static/js/async/652.d1ae778d.js",6573:"static/js/async/6573.0c35feb7.js",6662:"static/js/async/6662.29c5f25b.js",6712:"static/js/async/6712.7cd4e495.js",6731:"static/js/async/6731.fca2cd60.js",6745:"static/js/async/6745.1d62f027.js",679:"static/js/async/679.97fe7805.js",692:"static/js/async/692.60daaded.js",6972:"static/js/async/6972.b2c3848c.js",7018:"static/js/async/7018.5a68b702.js",7087:"static/js/async/7087.096eb7e8.js",7200:"static/js/async/7200.48479276.js",7209:"static/js/async/7209.b4821050.js",7231:"static/js/async/7231.67fecf7b.js",7264:"static/js/async/7264.d515eede.js",7285:"static/js/async/7285.47451e6e.js",7292:"static/js/async/7292.ed21dcb9.js",7464:"static/js/async/7464.fd75deb3.js",7477:"static/js/async/7477.d81c03cd.js",7575:"static/js/async/7575.5f198c6b.js",7716:"static/js/async/7716.e3714d85.js",7759:"static/js/async/7759.81b90312.js",7978:"static/js/async/7978.51772204.js",7992:"static/js/async/7992.7ccacedc.js",8160:"static/js/async/8160.703f2cdd.js",8331:"static/js/async/8331.d566c549.js",8473:"static/js/async/8473.aa6d97db.js",8502:"static/js/async/8502.178c0b84.js",8572:"static/js/async/8572.cf3bc7c8.js",8577:"static/js/async/8577.a2d0d3ff.js",8943:"static/js/async/8943.453ad766.js",9085:"static/js/async/9085.551fb994.js",9140:"static/js/async/9140.4b109fef.js",9417:"static/js/async/9417.41527081.js",9422:"static/js/async/9422.750a43e9.js",95:"static/js/async/95.fe661302.js",9507:"static/js/async/9507.fb436c88.js",9630:"static/js/async/9630.816d8191.js",9643:"static/js/async/9643.455d175c.js",9663:"static/js/async/9663.11416ee0.js",9690:"static/js/async/9690.81feb610.js",9777:"static/js/async/9777.318f2d58.js",9793:"static/js/async/9793.64a78ff7.js",9840:"static/js/async/9840.aa500bd6.js",9841:"static/js/async/9841.15de7c0e.js"}[s]},p.k=function(s){return{4206:"static/css/async/4206.c290620c.css",5710:"static/css/async/5710.c290620c.css",602:"static/css/async/602.c290620c.css",6972:"static/css/async/6972.c290620c.css"}[s]},t={},p.l=function(s,a,c,e){if(t[s])t[s].push(a);else{if(void 0!==c)for(var n,i,j=document.getElementsByTagName("script"),r=0;r<j.length;r++){var l=j[r];if(l.getAttribute("src")==s){n=l;break}}!n&&(i=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,n.src=s),t[s]=[a];var o=function(a,c){n.onerror=n.onload=null,clearTimeout(d);var e=t[s];if(delete t[s],n.parentNode&&n.parentNode.removeChild(n),e&&e.forEach((function(s){return s(c)})),a)return a(c)},d=setTimeout(o.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=o.bind(null,n.onerror),n.onload=o.bind(null,n.onload),i&&document.head.appendChild(n)}},p.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},a=[],p.O=function(s,t,c,e){if(!t){var n=1/0;for(l=0;l<a.length;l++){t=a[l][0],c=a[l][1],e=a[l][2];for(var i=!0,j=0;j<t.length;j++)n>=e&&Object.keys(p.O).every((function(s){return p.O[s](t[j])}))?t.splice(j--,1):(i=!1,e<n&&(n=e));if(i){a.splice(l--,1);var r=c()}}return r}e=e||0;for(var l=a.length;l>0&&a[l-1][2]>e;l--)a[l]=a[l-1];a[l]=[t,c,e]},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(s){if("object"==typeof window)return window}}(),p.d=function(s,t){for(var a in t)p.o(t,a)&&!p.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:t[a]})},p.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},p.n=function(s){return s&&s.__esModule?s.default:s},e=Object.getPrototypeOf?function(s){return Object.getPrototypeOf(s)}:function(s){return s.__proto__},p.t=function(s,t){if(1&t&&(s=this(s)),8&t||"object"==typeof s&&s&&(4&t&&s.__esModule||16&t&&"function"==typeof s.then))return s;var a=Object.create(null);p.r(a);var n={};c=c||[null,e({}),e([]),e(e)];for(var i=2&t&&s;"object"==typeof i&&!~c.indexOf(i);i=e(i))Object.getOwnPropertyNames(i).forEach((function(t){n[t]=function(){return s[t]}}));return n.default=function(){return s},p.d(a,n),a},p.nmd=function(s){return s.paths=[],!s.children&&(s.children=[]),s},n={"bundler-runtime":0,"lib-lodash":0,"lib-polyfill":0,"lib-react":0,"lib-router":0},i="webpack",j="data-webpack-loading",r=function(s,t,a,c){var e,n,r="chunk-"+s;if(!c){for(var l=document.getElementsByTagName("link"),o=0;o<l.length;o++){var d=l[o],f=d.getAttribute("href")||d.href;if(f&&!f.startsWith(p.p)&&(f=p.p+(f.startsWith("/")?f.slice(1):f)),"stylesheet"==d.rel&&(f&&f.startsWith(t)||d.getAttribute("data-webpack")==i+":"+r)){e=d;break}}if(!a)return e}!e&&(n=!0,(e=document.createElement("link")).setAttribute("data-webpack",i+":"+r),e.setAttribute(j,1),e.rel="stylesheet",e.href=t);var y=function(s,t){if(e.onerror=e.onload=null,e.removeAttribute(j),clearTimeout(b),t&&"load"!=t.type&&e.parentNode.removeChild(e),a(t),s)return s(t)};if(e.getAttribute(j)){var b=setTimeout(y.bind(null,void 0,{type:"timeout",target:e}),12e4);e.onerror=y.bind(null,e.onerror),e.onload=y.bind(null,e.onload)}else y(void 0,{type:"load",target:e});return c?c.parentNode.insertBefore(e,c):n&&document.head.appendChild(e),e},p.f.css=function(s,t){var a=p.o(n,s)?n[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["4206","5197","5710","602","6972","main"].indexOf(s)>-1){var c=new Promise((function(t,c){a=n[s]=[t,c]}));t.push(a[2]=c);var e=p.p+p.k(s),i=Error();r(s,e,(function(t){if(p.o(n,s)&&(0!==(a=n[s])&&(n[s]=void 0),a))if("load"!==t.type){var c=t&&t.type,e=t&&t.target&&t.target.src;i.message="Loading css chunk "+s+" failed.\n("+c+": "+e+")",i.name="ChunkLoadError",i.type=c,i.request=e,a[1](i)}else a[0]()}))}else n[s]=0},l=function(s,t){var a=t[0];s&&s(t);for(var c=0;c<a.length;c++)void 0===n[a[c]]&&(n[a[c]]=0)},(o=self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o)),d={"bundler-runtime":0},p.f.j=function(s,t){var a=p.o(d,s)?d[s]:void 0;if(0!==a)if(a)t.push(a[2]);else if(["1041","1075","1191","1486","1494","1495","1728","1767","1813","1816","1936","2172","2206","2222","2274","228","2311","2355","2370","2390","2514","2516","2636","264","2654","2753","3020","3157","3433","35","3510","3605","361","3614","3661","3690","3761","3889","3958","3977","4058","4083","4112","4206","4403","4466","4513","4556","4569","4571","4589","4610","4713","4752","4755","4760","480","4916","4936","4972","5090","5126","5131","5197","5325","5326","5453","5500","5510","5563","5631","5671","5710","5736","5875","5952","602","6047","6220","6299","6314","6366","652","6573","6662","6712","6731","6745","679","692","6972","7018","7087","7200","7209","7231","7264","7285","7292","7464","7477","7575","7716","7759","7978","7992","8160","8331","8473","8502","8572","8577","8943","9085","9140","9417","9422","95","9507","9630","9643","9663","9690","9777","9793","9840","9841","lib-lodash","lib-polyfill","lib-react","lib-router","main"].indexOf(s)>-1){var c=new Promise((function(t,c){a=d[s]=[t,c]}));t.push(a[2]=c);var e=p.p+p.u(s),n=Error();p.l(e,(function(t){if(p.o(d,s)&&(0!==(a=d[s])&&(d[s]=void 0),a)){var c=t&&("load"===t.type?"missing":t.type),e=t&&t.target&&t.target.src;n.message="Loading chunk "+s+" failed.\n("+c+": "+e+")",n.name="ChunkLoadError",n.type=c,n.request=e,a[1](n)}}),"chunk-"+s,s)}else d[s]=0},p.O.j=function(s){return 0===d[s]},f=function(s,t){var a,c,e=t[0],n=t[1],i=t[2],j=0;if(e.some((function(s){return 0!==d[s]}))){for(a in n)p.o(n,a)&&(p.m[a]=n[a]);if(i)var r=i(p)}for(s&&s(t);j<e.length;j++)c=e[j],p.o(d,c)&&d[c]&&d[c][0](),d[c]=0;return p.O(r)},(y=self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).forEach(f.bind(null,0)),y.push=f.bind(null,y.push.bind(y))}()</script><script defer="defer" src="/builder/static/js/lib-lodash.bd5d56ca.js"></script><script defer="defer" src="/builder/static/js/lib-polyfill.465ca539.js"></script><script defer="defer" src="/builder/static/js/lib-react.3c70bbbb.js"></script><script defer="defer" src="/builder/static/js/lib-router.ff55a2fa.js"></script><script defer="defer" src="/builder/static/js/5197.dd2f1673.js"></script><script defer="defer" src="/builder/static/js/main.3d16ec1a.js"></script><link href="/builder/static/css/5197.263bbd23.css" rel="stylesheet"><link href="/builder/static/css/main.8856c2f0.css" rel="stylesheet"></head><body ><div id="root"><div><div class="navContainer_f6cde sticky rspress-nav px-6 "><div class="container_f6cde flex justify-between items-center h-full"><div class="undefined"><a href="/builder/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>Modern.js Builder</span></a></div><div class="undefined flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="navSearchButton_6e282"><button><svg width="18" height="24" viewBox="0 0 32 32" hight="18"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">指南</div></a><a class="link_03735  cursor-pointer" target="" href="/builder/api/index.html"><div class="singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a><a class="link_03735  cursor-pointer" target="" href="/builder/plugins/introduction.html"><div class="singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">插件</div></a></div><div class="flex-center flex-row"><div class="translation menu-item_f6cde flex text-sm font-bold items-center px-3 py-2"><div><div class="relative flex-center h-14"><button class="nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><span class="text-sm font-medium flex" style="margin-right:2px"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div class="nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:2rem;background:var(--rp-c-bg)"><div><div class="rounded-2xl my-1 flex" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><span class="text-brand">简体中文</span></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/builder/en/plugins/introduction.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>English</span></div></div></a></div></div></div></div></div></div></div><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg></div></div></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/builder/guide/introduction.html"><div class="singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">指南</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/builder/api/index.html"><div class="singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">API</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/builder/plugins/introduction.html"><div class="singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">插件</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div><div class="undefined flex text-sm font-bold justify-center"><div class="mx-1.5 my-1"><div class=" navScreenMenuGroup_457e8 relative"><button class="button_457e8"><span class="buttonSpan_457e8"><svg width="18" height="18" viewBox="0 0 32 32" style="width:18px;height:18px"><path fill="currentColor" d="M27.85 29H30l-6-15h-2.35l-6 15h2.15l1.6-4h6.85zm-7.65-6 2.62-6.56L25.45 23zM18 7V5h-7V2H9v3H2v2h10.74a14.71 14.71 0 0 1-3.19 6.18A13.5 13.5 0 0 1 7.26 9h-2.1a16.47 16.47 0 0 0 3 5.58A16.84 16.84 0 0 1 3 18l.75 1.86A18.47 18.47 0 0 0 9.53 16a16.92 16.92 0 0 0 5.76 3.84L16 18a14.48 14.48 0 0 1-5.12-3.37A17.64 17.64 0 0 0 14.8 7z"></path></svg></span><svg width="1em" height="1em" viewBox="0 0 32 32" class=" down_457e8 "><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></button><div><div class="items_457e8"><div><div class="p-1 text-center"><span class="text-brand">简体中文</span></div></div><div><div class="py-1 font-medium"><a class="link_03735  cursor-pointer" target="" href="/builder/en/plugins/introduction.html"><div><div class="flex justify-center"><span>English</span></div></div></a></div></div></div></div></div></div></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/builder" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div></div><button class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="rspress-sidebar-menu"><button class="flex-center"><div class="text-md mr-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span class="text-sm">Menu</span></button></div><aside class="sidebar_71eca rspress-sidebar "><div class="navTitleMask_71eca"><div class="undefined"><a href="/builder/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>Modern.js Builder</span></a></div></div><div class="mt-1 sidebarContent_71eca"><div class="rspress-scrollbar" style="max-height:calc(100vh - var(--rp-nav-height) - 8px);overflow:auto"><nav class="pb-2"><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_71eca" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">指南</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/plugins/introduction.html"><div class="menuItemActive_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0;color:var(--rp-c-brand)">插件系统</div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center  menuItemStatic_71eca" style="border-radius:0 1rem 1rem 0;cursor:normal"><h2 class="py-2 px-3 text-sm font-medium flex" style="color:var(--rp-c-text-1);font-size:14px;padding-left:24px;font-weight:bold">列表</h2></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:1;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/plugins/list.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">总览</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/plugins/plugin-vue.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Vue 插件</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/plugins/plugin-vue2.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Vue 2 插件</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/plugins/plugin-swc.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">SWC 插件</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/plugins/plugin-stylus.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Stylus 插件</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/plugins/plugin-esbuild.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Esbuild 插件</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/plugins/plugin-node-polyfill.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Node Polyfill 插件</div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/builder/plugins/plugin-image-compress.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 1rem 1rem 0">Image Compress 插件</div></a></div></div></div></section></nav></div></div></aside><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full"><div><div class="rspress-doc"><!--$--><h1 id="插件系统" class="text-3xl mb-10 leading-10 tracking-tight title_3b154">插件系统<a class="link_3b154 header-anchor" aria-hidden="true" href="#插件系统">#</a></h1>
<p class="my-4 leading-7">Builder 提供了一套轻量强大的插件系统，用以实现自身的大多数功能，并允许用户进行扩展。
开发者编写的插件能够修改 Builder 的默认行为并添加各类额外功能，包括但不限于：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">修改 bundler 配置</li>
<li class="[&amp;:not(:first-child)]:mt-2">处理新的文件类型</li>
<li class="[&amp;:not(:first-child)]:mt-2">修改或编译文件</li>
<li class="[&amp;:not(:first-child)]:mt-2">部署产物</li>
</ul>
<p class="my-4 leading-7">Builder 底层支持 webpack 和 Rspack 等 bundler，并提供统一的 Node.js API 来抹平插件开发的差异，进而接入不同的上层框架、降低用户对底层 bundler 切换的感知。</p>
<h2 id="开发插件" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">开发插件<a class="link_3b154 header-anchor" aria-hidden="true" href="#开发插件">#</a></h2>
<p class="my-4 leading-7">插件提供类似 <code>(options?: PluginOptions) =&gt; BuilderPlugin</code> 的函数作为入口，建议将插件函数命名为 <code>builderPluginXXX</code>。</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> BuilderPlugin </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/builder-webpack-provider&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">interface</span><span> </span><span class="token class-name">PluginFooOptions</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  message</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> builderPluginFoo </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  options</span><span class="token operator">?</span><span class="token operator">:</span><span> PluginFooOptions</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token operator">:</span><span> BuilderPlugin </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;plugin-foo&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">setup</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>api</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">onExit</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> msg </span><span class="token operator">=</span><span> options</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>message </span><span class="token operator">||</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;finish.&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-symbol)">console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>msg</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>builder</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">addPlugins</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-function)">builderPluginFoo</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> message</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;some other message.&#x27;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="wrap "></button><button class="copy"></button></div></div>
<p class="my-4 leading-7">函数形式的插件可以 <strong class="font-semibold">接受选项对象</strong> 并 <strong class="font-semibold">返回插件实例</strong>，并通过闭包机制管理内部状态。</p>
<p class="my-4 leading-7">其中各部分的作用分别为：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>name</code> 属性用于标注插件名称</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>setup</code> 作为插件逻辑的主入口</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>api</code> 对象包含了各类钩子和工具函数</li>
</ul>
<p class="my-4 leading-7">为了便于识别，插件名称需要包含约定的 <code>builder-plugin</code> 前缀，例如 <code>builder-plugin-foo</code> <code>@scope/builder-plugin-bar</code> 等。</p>
<h2 id="生命周期钩子" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">生命周期钩子<a class="link_3b154 header-anchor" aria-hidden="true" href="#生命周期钩子">#</a></h2>
<p class="my-4 leading-7">Builder 在内部按照约定的生命周期进行任务调度，插件可以通过注册钩子来介入工作流程的任意阶段，并实现自己的功能。</p>
<p class="my-4 leading-7">Builder 生命周期钩子的完整列表参考 <a class="link_03735  link_3b154 inline-link_3b154 cursor-pointer" target="" href="/builder/api/plugin-hooks.html">API 文档</a>。</p>
<p class="my-4 leading-7">Builder 不会接管底层 Bundler 的生命周期，相关生命周期钩子的使用方式见对应文档：<a href="https://webpack.js.org/api/compiler-hooks/" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">webpack hooks</a></p>
<h2 id="使用配置项" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">使用配置项<a class="link_3b154 header-anchor" aria-hidden="true" href="#使用配置项">#</a></h2>
<p class="my-4 leading-7">自行编写的插件通常使用初始化时传入函数的参数作为配置项即可，开发者可以随意定义和使用函数的入参。</p>
<p class="my-4 leading-7">但某些情况下插件可能需要读取 / 修改 Builder 公用的配置项，这时就需要了解 Builder 内部对配置项的生产和消费流程：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">读取、解析配置并合并默认值</li>
<li class="[&amp;:not(:first-child)]:mt-2">插件通过 <code>api.modifyBuilderConfig(...)</code> 回调修改配置项</li>
<li class="[&amp;:not(:first-child)]:mt-2">归一化配置项并提供给插件后续消费，此后无法再修改配置项</li>
</ul>
<p class="my-4 leading-7">整套流程可以通过这个简单的插件体现：</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> builderPluginUploadDist </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token operator">:</span><span> BuilderPlugin </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;plugin-upload-dist&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">setup</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>api</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">modifyBuilderConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>config </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 尝试关闭代码压缩，需要自己填充默认值</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      config</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>output </span><span class="token operator">||=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      config</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>output</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>disableMinimize </span><span class="token operator">=</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 轮到其它插件修改配置...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">onBeforeBuild</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 读取最终的配置</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> config </span><span class="token operator">=</span><span> api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">getNormalizedConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token operator">!</span><span>config</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>output</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>disableMinimize</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-comment)">// 其它插件又启用了压缩则报错</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-keyword)">throw</span><span> </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">Error</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          </span><span class="token" style="color:var(--code-token-string)">&#x27;You must disable minimize to upload readable dist files.&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">onAfterBuild</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> config </span><span class="token operator">=</span><span> api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">getNormalizedConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> distRoot </span><span class="token operator">=</span><span> config</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>output</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>distPath</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>root</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// TODO: 上传 `distRoot` 目录下所有产物文件</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="wrap "></button><button class="copy"></button></div></div>
<p class="my-4 leading-7">插件中有三种方式使用配置项对象：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>api.modifyBuilderConfig(config =&gt; {})</code> 在回调中修改配置</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>api.getBuilderConfig()</code> 获取配置项</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>api.getNormalizedConfig()</code> 获取归一化后的配置项</li>
</ul>
<p class="my-4 leading-7">归一化的配置项会再次合并默认值并移除大部分可选类型，对于 <code>PluginUploadDist</code> 的例子其部分类型定义为：</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">modifyBuilderConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>config</span><span class="token operator">:</span><span> BuilderConfig</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">getBuilderConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-keyword)">as</span><span> BuilderConfig</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">BuilderConfig</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    disableMinimize</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    distPath</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> root</span><span class="token operator">?</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">getNormalizedConfig</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-keyword)">as</span><span> NormalizedConfig</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token class-name">NormalizedConfig</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    disableMinimize</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">boolean</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    distPath</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> root</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-symbol)">string</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="wrap "></button><button class="copy"></button></div></div>
<p class="my-4 leading-7"><code>getNormalizedConfig()</code> 的返回值类型与 <code>BuilderConfig</code> 的略有不同、相比文档其它地方描述的类型进行了收窄，
在使用时无需自行判空、填充默认值。</p>
<p class="my-4 leading-7">因此使用配置项的最佳方式应该是：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">通过 <code>api.modifyBuilderConfig(config =&gt; {})</code> 来<strong class="font-semibold">修改配置</strong></li>
<li class="[&amp;:not(:first-child)]:mt-2">在其后的生命周期中读取 <code>api.getNormalizedConfig()</code> 作为插件<strong class="font-semibold">实际使用的配置</strong></li>
</ul>
<h2 id="修改-webpack-配置" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">修改 webpack 配置<a class="link_3b154 header-anchor" aria-hidden="true" href="#修改-webpack-配置">#</a></h2>
<p class="my-4 leading-7">插件可以通过多种方式修改 webpack 的配置项。</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>api.modifyWebpackChain(chain =&gt; {})</code> 修改 webpack-chain</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>api.modifyWebpackConfig(config =&gt; {})</code> 修改最终的 webpack 配置</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>api.onAfterCreateCompiler(compiler =&gt; {})</code> 直接操作 webpack 实例</li>
</ul>
<p class="my-4 leading-7">通常推荐使用 <a href="https://github.com/neutrinojs/webpack-chain" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">neutrinojs/webpack-chain</a> 提供的链式 API 来修改 webpack 配置的工作。</p>
<p class="my-4 leading-7">Builder 使用的是兼容 webpack5 的修改版本：<a href="https://github.com/sorrycc/webpack-chain" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">sorrycc/webpack-chain</a>。</p>
<h2 id="参考范例" class="mt-14 mb-6 text-2xl tracking-tight title_3b154">参考范例<a class="link_3b154 header-anchor" aria-hidden="true" href="#参考范例">#</a></h2>
<h3 id="修改-loader" class="mt-10 mb-2 leading-7 text-xl title_3b154">修改 Loader<a class="link_3b154 header-anchor" aria-hidden="true" href="#修改-loader">#</a></h3>
<p class="my-4 leading-7">Loader 可以读取和处理不同类型的文件模块，具体参考 <a href="https://webpack.js.org/concepts/loaders" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">concepts</a> 和 <a href="https://webpack.js.org/loaders/" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">loaders</a>。</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> BuilderPlugin </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/builder-webpack-provider&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> builderPluginTypeScriptExt </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token operator">:</span><span> BuilderPlugin </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;builder-typescript-ext&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">setup</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>api</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">modifyWebpackChain</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">async</span><span> chain </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 设置 ts-loader 将更多的文件识别为 typescript 模块</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      chain</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>module</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">rule</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-constant)">CHAIN_ID</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">RULE</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">TS</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">test</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token regex-source language-regex" style="color:var(--code-token-keyword)">\.(ts|mts|cts|tsx|tss|tsm)$</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="wrap "></button><button class="copy"></button></div></div>
<h3 id="添加模块入口" class="mt-10 mb-2 leading-7 text-xl title_3b154">添加模块入口<a class="link_3b154 header-anchor" aria-hidden="true" href="#添加模块入口">#</a></h3>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> BuilderPlugin </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/builder-webpack-provider&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> builderPluginAdminPanel </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token operator">:</span><span> BuilderPlugin </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;builder-admin-panel&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">setup</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>api</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">modifyWebpackChain</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">async</span><span> chain </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      config</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">entry</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;admin-panel&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">add</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;src/admin/panel.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="wrap "></button><button class="copy"></button></div></div>
<h3 id="接入-webpack-插件" class="mt-10 mb-2 leading-7 text-xl title_3b154">接入 webpack 插件<a class="link_3b154 header-anchor" aria-hidden="true" href="#接入-webpack-插件">#</a></h3>
<p class="my-4 leading-7">开发者可以在 Builder 插件中接入已有的 webpack 插件来平缓迁移项目：</p>
<div class="language-ts"><div class="rspress-code-content rspress-scrollbar"><pre class="code" style="background-color:inherit"><code class="language-ts" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> BuilderPlugin </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/builder-webpack-provider&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-keyword)">type</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> Options </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/inspector-webpack-plugin&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">export</span><span> </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> builderPluginInspector </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>options</span><span class="token operator">?</span><span class="token operator">:</span><span> Options</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token operator">:</span><span> BuilderPlugin </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;builder-plugin-inspector&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">setup</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>api</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    api</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">modifyWebpackChain</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">async</span><span> chain </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 仅在需要的时候动态加载模块，避免不必要的性能消耗</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> InspectorWebpackPlugin </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">await</span><span> </span><span class="token" style="color:var(--code-token-keyword)">import</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-string)">&#x27;@modern-js/inspector-webpack-plugin&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-comment)">// 修改 webpack chain 接入插件</span><span>
</span></span><span style="display:block;padding:0 1.25rem">      chain
</span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">plugin</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;inspector-webpack-plugin&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">use</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>InspectorWebpackPlugin</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>inspectorOptions</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre><button class="wrap "></button><button class="copy"></button></div></div><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"><a href="https://github.com/web-infra-dev/modern.js/tree/main/packages/document/builder-doc/docs/zh/plugins/introduction.md" target="_blank" class="editLink_2a169">Edit this page on GitHub</a></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"></div><div class="next_e7091 flex flex-col"><a class="link_03735 pager-link_e7091 next_e7091 cursor-pointer" target="" href="/builder/plugins/list.html"><span class="desc_e7091">下一页</span><span class="title_e7091">总览</span></a></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">目录</div><nav class="mt-1"><ul class="relative"><li><a href="#开发插件" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">开发插件</span></a></li><li><a href="#生命周期钩子" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">生命周期钩子</span></a></li><li><a href="#使用配置项" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">使用配置项</span></a></li><li><a href="#修改-webpack-配置" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">修改 webpack 配置</span></a></li><li><a href="#参考范例" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">参考范例</span></a></li><li><a href="#修改-loader" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">修改 Loader</span></a></li><li><a href="#添加模块入口" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">添加模块入口</span></a></li><li><a href="#接入-webpack-插件" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">接入 webpack 插件</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div><div id="search-container"></div></body></html>