/*! For license information please see 87777.856c5af1.js.LICENSE.txt */
(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["87777"],{7534:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return c}});var t=s("39980"),l=s("96954");function a(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",h3:"h3",img:"img",h4:"h4",code:"code",ul:"ul",li:"li",pre:"pre"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"\u4F7F\u7528-github-\u76F8\u5173\u5DE5\u5177",children:["\u4F7F\u7528 Github \u76F8\u5173\u5DE5\u5177",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4F7F\u7528-github-\u76F8\u5173\u5DE5\u5177",children:"#"})]}),"\n",(0,t.jsxs)(n.h2,{id:"bot",children:["BOT",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#bot",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"\u5728 Github \u4E0A\uFF0Cchangesets \u63D0\u4F9B\u4E86\u673A\u5668\u4EBA\u7528\u4E8E\u68C0\u6D4B\u5F53\u524D Pull Request \u662F\u5426\u5B58\u5728 changeset\uFF0C\u5E76\u63D0\u4F9B\u4E86 UI \u754C\u9762\u6DFB\u52A0\u548C\u4FEE\u6539 changeset\u3002"}),"\n",(0,t.jsxs)(n.h3,{id:"\u5B89\u88C5",children:["\u5B89\u88C5",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5B89\u88C5",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u70B9\u51FB\u8FDB\u5165",(0,t.jsx)(n.a,{href:"https://github.com/apps/changeset-bot",target:"_blank",rel:"noopener noreferrer",children:"\u94FE\u63A5"}),"\uFF0C\u53F3\u4E0A\u89D2\u9009\u62E9\u5B89\u88C5\uFF0C\u786E\u8BA4\u5373\u53EF\u5B89\u88C5\u6210\u529F\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/changeset-install-bot.png",alt:"\u5B89\u88C5\u673A\u5668\u4EBA"})}),"\n",(0,t.jsxs)(n.h3,{id:"\u914D\u7F6E",children:["\u914D\u7F6E",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u914D\u7F6E",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"\u5B89\u88C5\u6210\u529F\u540E\uFF0C\u5373\u53EF\u8FDB\u5165\u914D\u7F6E\u9875\u9762\uFF0C\u6839\u636E\u9700\u6C42\u9009\u62E9\u5E94\u7528\u4ED3\u5E93\u5373\u53EF\u3002"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/changeset-config-bot.png",alt:"\u914D\u7F6E\u673A\u5668\u4EBA"})}),"\n",(0,t.jsxs)(n.h3,{id:"\u4F7F\u7528",children:["\u4F7F\u7528",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4F7F\u7528",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"\u914D\u7F6E\u5B8C\u6210\u540E\uFF0C\u8BE5\u673A\u5668\u4EBA\u5C06\u4F1A\u81EA\u52A8 check \u6BCF\u4E2A Pull Request \u662F\u5426\u6DFB\u52A0\u4E86 changeset\uFF0C\u5E76\u901A\u8FC7\u56DE\u590D\u7684\u65B9\u5F0F\u7ED9\u5230\u63D0\u793A\u4FE1\u606F\u3002"}),"\n",(0,t.jsxs)(n.h4,{id:"\u672A\u6DFB\u52A0-changeset",children:["\u672A\u6DFB\u52A0 changeset",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u672A\u6DFB\u52A0-changeset",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/changeset-bot-no-changeset.png",alt:"\u672A\u6DFB\u52A0 changeset \u72B6\u6001"})}),"\n",(0,t.jsxs)(n.p,{children:["\u53EF\u5728\u4ED3\u5E93\u6267\u884C ",(0,t.jsx)(n.code,{children:"pnpm run change"})," \u6DFB\u52A0 changeset\uFF0C\u4E5F\u53EF\u76F4\u63A5\u70B9\u51FB\u4E0B\u65B9\u7B2C\u4E8C\u4E2A\u94FE\u63A5\u586B\u5199 changeset\u3002"]}),"\n",(0,t.jsxs)(n.h4,{id:"\u5DF2\u6DFB\u52A0-changeset",children:["\u5DF2\u6DFB\u52A0 changeset",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5DF2\u6DFB\u52A0-changeset",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/changeset-bot-exist-changeset.png",alt:"\u5DF2\u6DFB\u52A0 changeset \u72B6\u6001"})}),"\n",(0,t.jsx)(n.p,{children:"\u53EF\u70B9\u51FB\u4E0B\u65B9\u94FE\u63A5\u4FEE\u6539\u548C\u6DFB\u52A0\u65B0\u7684 changeset\u3002"}),"\n",(0,t.jsxs)(n.h4,{id:"\u4E0D\u9700\u8981-changeset",children:["\u4E0D\u9700\u8981 changeset",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4E0D\u9700\u8981-changeset",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"\u53EF\u76F4\u63A5\u5FFD\u7565\u672A\u6DFB\u52A0\u65F6\u7684\u63D0\u793A\u4FE1\u606F\uFF0C\u5B83\u4E0D\u4F1A\u9020\u6210 Pull Request \u4E0D\u80FD\u5408\u5E76\u7684\u95EE\u9898\u3002"}),"\n",(0,t.jsxs)(n.h2,{id:"action",children:["Action",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#action",children:"#"})]}),"\n",(0,t.jsxs)(n.h3,{id:"\u81EA\u52A8\u521B\u5EFA-release-pull-request",children:["\u81EA\u52A8\u521B\u5EFA Release Pull Request",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u81EA\u52A8\u521B\u5EFA-release-pull-request",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Modern.js \u63D0\u4F9B\u4E86\u81EA\u52A8\u521B\u5EFA\u53D1\u7248 Pull Request \u7684 Github Action\uFF0C\u63D0\u4F9B\u57FA\u4E8E\u9009\u62E9\u7684\u5206\u652F\u81EA\u52A8\u6267\u884C bump \u64CD\u4F5C\uFF0C\u66F4\u65B0 lock \u6587\u4EF6\u53CA\u521B\u5EFA Pull Request \u64CD\u4F5C\u3002"}),"\n",(0,t.jsxs)(n.h4,{id:"\u4F7F\u7528-1",children:["\u4F7F\u7528",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4F7F\u7528-1",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5728\u4ED3\u5E93\u4E2D\u521B\u5EFA ",(0,t.jsx)(n.code,{children:".github/workflows/release-pull-request.yml"})," \u6587\u4EF6\uFF0C\u586B\u5165\u4EE5\u4E0B\u5185\u5BB9\uFF1A"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Release Pull Request\n\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        type: choice\n        description: 'Release Type(canary, beta, alpha, latest)'\n        required: true\n        default: 'latest'\n        options:\n        - canary\n        - beta\n        - alpha\n        - latest\n\njobs:\n  release:\n    name: Create Release Pull Request\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout Repo\n        uses: actions/checkout@master\n        with:\n          # This makes Actions fetch only one branch to release\n          fetch-depth: 100\n\n      - ... # install dependencies and build repo package\n      - name: Create Release Pull Request\n        uses: web-infra-dev/actions@v2\n        with:\n          version: ${{ github.event.inputs.version }}\n          versionNumber: 'auto'\n          type: 'pull request'\n          tools: 'modern'\n        env:\n          GITHUB_TOKEN: ${{ secrets.REPO_SCOPED_TOKEN }}\n          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}\n          REPOSITORY: ${{ github.repository }}\n          REF: ${{ github.ref }}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5C06 Workflow \u5408\u5E76\u5230\u4E3B\u5206\u652F\u540E\uFF0C\u8FDB\u5165 Github \u4ED3\u5E93\u5BF9\u5E94\u7684 Action \u9875\u9762\uFF0C\u9009\u62E9 Release Pull Request\uFF1A"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/action-pull-request.png",alt:"Release Pull Request Action"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u9009\u62E9\u672C\u6B21\u53D1\u5E03\u7C7B\u578B\uFF0C\u70B9\u51FB Run workflow \u6309\u94AE\uFF1A"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/action-pull-request.jpeg",alt:"Run Release Pull Request"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Workflow \u8FD0\u884C\u5B8C\u6210\u540E\u5C06\u81EA\u52A8\u521B\u5EFA ",(0,t.jsx)(n.code,{children:"Release-${version}"})," \u7684 Pull Request\uFF0C\u81EA\u52A8\u5B8C\u6210 ",(0,t.jsx)(n.code,{children:"bump"})," changeset \u76F8\u5173\u7248\u672C\u53F7\u5E76\u66F4\u65B0 lock \u6587\u4EF6\uFF0CPull Request \u7684\u5185\u5BB9\u4E3A\u6267\u884C ",(0,t.jsx)(n.code,{children:"gen-release-note"})," \u547D\u4EE4\u81EA\u52A8\u751F\u6210\u7684 Release Note\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/release-pull-request.jpeg",alt:"Release Pull Request"})}),"\n",(0,t.jsxs)(n.h3,{id:"\u81EA\u52A8-release",children:["\u81EA\u52A8 Release",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u81EA\u52A8-release",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Modern.js \u63D0\u4F9B\u4E86\u81EA\u52A8\u53D1\u5E03\u7248\u672C \u7684 Github Action\uFF0C\u63D0\u4F9B\u57FA\u4E8E\u9009\u62E9\u7684\u5206\u652F\u81EA\u52A8\u6267\u884C release \u64CD\u4F5C\uFF0C\u5C06\u5305\u53D1\u5E03\u5230 NPM \u4E0A\u3002"}),"\n",(0,t.jsxs)(n.h4,{id:"\u4F7F\u7528-2",children:["\u4F7F\u7528",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4F7F\u7528-2",children:"#"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5728\u4ED3\u5E93\u4E2D\u521B\u5EFA ",(0,t.jsx)(n.code,{children:".github/workflows/release.yml"})," \u6587\u4EF6\uFF0C\u586B\u5165\u4EE5\u4E0B\u5185\u5BB9\uFF1A"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Release\n\non:\n  workflow_dispatch:\n    inputs:\n      version:\n        type: choice\n        description: 'Release Version(canary, beta, alpha, latest)'\n        required: true\n        default: 'next'\n        options:\n        - canary\n        - beta\n        - alpha\n        - latest\n      branch:\n        description: 'Release Branch(confirm release branch)'\n        required: true\n        default: 'main'\n\njobs:\n  release:\n    name: Release\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout Repo\n        uses: actions/checkout@master\n        with:\n          # This makes Actions fetch only one branch to release\n          fetch-depth: 1\n\n      - ... # install dependencies and build repo package\n      - name: Release\n        uses: web-infra-dev/actions@v2\n        with:\n          version: ${{ github.event.inputs.version }}\n          branch: ${{ github.event.inputs.branch }}\n          type: 'release'\n          tools: 'modern'\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}\n          REPOSITORY: ${{ github.repository }}\n          REF: ${{ github.ref }}\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u914D\u7F6E\u4ED3\u5E93\u7684 NPM_TOKEN:"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/github-set-npm-token.png",alt:"\u914D\u7F6E Token"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5C06 Workflow \u5408\u5E76\u5230\u4E3B\u5206\u652F\u540E\uFF0C\u8FDB\u5165 Github \u4ED3\u5E93\u5BF9\u5E94\u7684 Action \u9875\u9762\uFF0C\u9009\u62E9 Release\uFF1A"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/release-action.png",alt:"Release Action"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u9009\u62E9\u5206\u652F\u540D\u79F0\u548C\u53D1\u5E03\u7248\u672C\u7C7B\u578B\uFF0C\u70B9\u51FB Run workflow \u6309\u94AE\uFF1A"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/run-release-workflow.png",alt:"Run Release Action"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Workflow \u5C06\u81EA\u52A8\u5B8C\u6210\u4ED3\u5E93 build \u548C\u53D1\u5E03\u5230 NPM \u6D41\u7A0B\u3002"}),"\n"]})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,l.useMDXComponents)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}var c=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["zh%2Fguides%2Ftopic-detail%2Fchangesets%2Fgithub.mdx"]={toc:[{text:"BOT",id:"bot",depth:2},{text:"\u5B89\u88C5",id:"\u5B89\u88C5",depth:3},{text:"\u914D\u7F6E",id:"\u914D\u7F6E",depth:3},{text:"\u4F7F\u7528",id:"\u4F7F\u7528",depth:3},{text:"\u672A\u6DFB\u52A0 changeset",id:"\u672A\u6DFB\u52A0-changeset",depth:4},{text:"\u5DF2\u6DFB\u52A0 changeset",id:"\u5DF2\u6DFB\u52A0-changeset",depth:4},{text:"\u4E0D\u9700\u8981 changeset",id:"\u4E0D\u9700\u8981-changeset",depth:4},{text:"Action",id:"action",depth:2},{text:"\u81EA\u52A8\u521B\u5EFA Release Pull Request",id:"\u81EA\u52A8\u521B\u5EFA-release-pull-request",depth:3},{text:"\u4F7F\u7528",id:"\u4F7F\u7528-1",depth:4},{text:"\u81EA\u52A8 Release",id:"\u81EA\u52A8-release",depth:3},{text:"\u4F7F\u7528",id:"\u4F7F\u7528-2",depth:4}],title:"\u4F7F\u7528 Github \u76F8\u5173\u5DE5\u5177",frontmatter:{sidebar_position:9}}}}]);