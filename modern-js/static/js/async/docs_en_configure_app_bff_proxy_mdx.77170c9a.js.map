{"version":3,"file":"static/js/async/docs_en_configure_app_bff_proxy_mdx.77170c9a.js","sources":["./docs/en/components/bff-proxy-path-rewrite.mdx","./docs/en/components/bff-proxy-principle.mdx","./docs/en/configure/app/bff/proxy.mdx"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"en%2Fcomponents%2Fbff-proxy-path-rewrite.mdx\"] = {\"toc\":[],\"title\":\"\",\"frontmatter\":{}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        p: \"p\",\n        code: \"code\",\n        pre: \"pre\"\n    }, _provideComponents(), props.components);\n    return <><_components.p>{\"Path rewriting can also be performed here, such as proxying the request sent to \"}<_components.code>{\"localhost:8080/api/topics\"}</_components.code>{\" to \"}<_components.code>{\"https://cnodejs.org/api/v1/topics\"}</_components.code>{\".\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\" meta='title=\"modern.server-runtime.config.js\"'>{\"import { defineConfig } from '@modern-js/app-tools/server';\\nexport default defineConfig({\\n  bff: {\\n    proxy: {\\n      '/api': {\\n        target: 'https://cnodejs.org',\\n        pathRewrite: { '/api/topics': '/api/v1/topics' },\\n        changeOrigin: true,\\n      },\\n    },\\n  },\\n});\\n\"}</_components.code></_components.pre></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n","globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"en%2Fcomponents%2Fbff-proxy-principle.mdx\"] = {\"toc\":[],\"title\":\"\",\"frontmatter\":{}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        p: \"p\",\n        a: \"a\"\n    }, _provideComponents(), props.components);\n    return <_components.p>{\"BFF Proxy uses the powerful \"}<_components.a href=\"https://github.com/chimurai/http-proxy-middleware\" target=\"_blank\" rel=\"noopener noreferrer\">{\"http-proxy-middleware\"}</_components.a>{\". For more advanced usage, please refer to its \"}<_components.a href=\"https://github.com/chimurai/http-proxy-middleware#options\" target=\"_blank\" rel=\"noopener noreferrer\">{\"documentation\"}</_components.a>{\".\"}</_components.p>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n","globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"en%2Fconfigure%2Fapp%2Fbff%2Fproxy.mdx\"] = {\"toc\":[{\"text\":\"Common Usage\",\"id\":\"common-usage\",\"depth\":2},{\"text\":\"Solving Cross-Domain Issues for APIs\",\"id\":\"solving-cross-domain-issues-for-apis\",\"depth\":3}],\"title\":\"bff.proxy\",\"frontmatter\":{\"sidebar_label\":\"proxy\"}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nimport EnableBFFCaution from \"@site-docs-en/components/enable-bff-caution\";\nimport BFFProxyPathRewrite from \"@site-docs-en/components/bff-proxy-path-rewrite\";\nimport BFFProxyPrinciple from \"@site-docs-en/components/bff-proxy-principle\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        ul: \"ul\",\n        li: \"li\",\n        strong: \"strong\",\n        code: \"code\",\n        p: \"p\",\n        pre: \"pre\",\n        h2: \"h2\",\n        h3: \"h3\",\n        div: \"div\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"bffproxy\">{\"bff.proxy\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#bffproxy\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li><_components.strong>{\"Type:\"}</_components.strong>{\" \"}<_components.code>{\"Record<string, string>\"}</_components.code></_components.li>{\"\\n\"}<_components.li><_components.strong>{\"Default:\"}</_components.strong>{\" \"}<_components.code>{\"{}\"}</_components.code></_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}{\"\\n\"}<EnableBFFCaution/>{\"\\n\"}<_components.p>{\"With simple configuration, Modern.js can automatically proxy requests sent to the BFF server to the specified service.\"}</_components.p>{\"\\n\"}<_components.p>{\"Add the following configuration to \"}<_components.code>{\"modern.server-runtime.config.js\"}</_components.code>{\" to enable proxy:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"modern.server-runtime.config.ts\"'>{\"import { defineConfig } from '@modern-js/app-tools/server';\\nexport default defineConfig({\\n  bff: {\\n    proxy: {\\n      '/api': 'https://cnodejs.org',\\n    },\\n  },\\n});\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"Assuming the address of Modern.js BFF server is \"}<_components.code>{\"localhost:8080\"}</_components.code>{\", all requests starting with \"}<_components.code>{\"api\"}</_components.code>{\" will be proxied to \"}<_components.code>{\"https://cnodejs.org\"}</_components.code>{\", for example, the request to \"}<_components.code>{\"localhost:8080/api/v1/topics\"}</_components.code>{\" will be proxied to \"}<_components.code>{\"https://cnodejs.org/api/v1/topics\"}</_components.code>{\".\"}</_components.p>{\"\\n\"}{\"\\n\"}<BFFProxyPathRewrite/>{\"\\n\"}<_components.p>{\"Unlike \"}<_components.a href=\"/configure/app/dev/proxy\">{\"dev.proxy\"}</_components.a>{\", the proxy here only applies to requests entering the BFF/API service; at the same time, this configuration can not only be used in the development environment, but also proxies corresponding requests in the production environment.\"}</_components.p>{\"\\n\"}{\"\\n\"}<BFFProxyPrinciple/>{\"\\n\"}<_components.h2 id=\"common-usage\">{\"Common Usage\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#common-usage\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.h3 id=\"solving-cross-domain-issues-for-apis\">{\"Solving Cross-Domain Issues for APIs\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#solving-cross-domain-issues-for-apis\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"During project development, cross-domain issues are often encountered because web pages and API services are not deployed under the same domain name.\\nThere are many ways to solve cross-domain issues, and here we can easily solve them using \"}<_components.code>{\"bff.proxy\"}</_components.code>{\".\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive info\"><_components.div className=\"modern-directive-title\">{\"INFO\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"Under BFF proxy mode, if you don't need to write BFF code, the API directory can be deleted; BFF proxy will still be enabled.\"}</_components.p>{\"\\n\"}</_components.div></_components.div>{\"\\n\"}<_components.p>{\"As shown below, the following configuration in \"}<_components.code>{\"modern.server-runtime.config.ts\"}</_components.code>{\" will proxy all web page requests starting with \"}<_components.code>{\"/api\"}</_components.code>{\" to a service on another domain with the same domain.\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\" meta='title=\"modern.server-runtime.config.ts\"'>{\"export default defineServerConfig({\\n  bff: {\\n    proxy: {\\n      '/api': 'https://cnodejs.org',\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","p","code","pre","components","className","meta","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_","a","href","target","rel","h1","ul","li","strong","h2","h3","div","id"],"mappings":"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"}