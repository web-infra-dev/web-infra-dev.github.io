(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["docs_en_apis_app_hooks_api_lambda_mdx"],{86516:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return c}});var s,d=n("15169"),r=n("43932"),t=n("9880"),l=n("23169");function a(e){var i=Object.assign({h1:"h1",a:"a",p:"p",code:"code",div:"div",h2:"h2",h3:"h3",ul:"ul",li:"li"},(0,l.useMDXComponents)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.h1,{id:"lambdatjs",children:["lambda/*.[tj]s",(0,t.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#lambdatjs",children:"#"})]}),"\n",(0,t.jsxs)(i.p,{children:["Files that declare API routes under the ",(0,t.jsx)(i.a,{href:"/guides/advanced-features/bff/type#framework-mode",children:"BFF Framework Mode"}),". Except for ",(0,t.jsx)(i.a,{href:"/apis/app/hooks/api/api#allow-list",children:"convention files"}),", files under the ",(0,t.jsx)(i.code,{children:"lambda/"})," directory will be registered as the routes."]}),"\n",(0,t.jsxs)(i.div,{className:"modern-directive info",children:[(0,t.jsx)(i.div,{className:"modern-directive-title",children:"INFO"}),(0,t.jsxs)(i.div,{className:"modern-directive-content",children:[(0,t.jsxs)(i.p,{children:["Using the ",(0,t.jsx)(i.code,{children:"api"}),' directory requires enabling the BFF function, and you need to run the new command to enable the "BFF" function under the project.']}),"\n"]})]}),"\n",(0,t.jsxs)(i.div,{className:"modern-directive tip",children:[(0,t.jsx)(i.div,{className:"modern-directive-title",children:"TIP"}),(0,t.jsxs)(i.div,{className:"modern-directive-content",children:[(0,t.jsxs)(i.p,{children:["This file supports using ",(0,t.jsx)(i.code,{children:"js"})," or ",(0,t.jsx)(i.code,{children:"ts"})," language, but must export functions using ",(0,t.jsx)(i.code,{children:"esm"})," syntax."]}),"\n"]})]}),"\n",(0,t.jsxs)(i.h2,{id:"routing-file-convention",children:["Routing File Convention",(0,t.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#routing-file-convention",children:"#"})]}),"\n",(0,t.jsxs)(i.h3,{id:"default-routing",children:["Default Routing",(0,t.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#default-routing",children:"#"})]}),"\n",(0,t.jsxs)(i.p,{children:["The routing system will map files named ",(0,t.jsx)(i.code,{children:"index"})," to the previous directory."]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"api/lambda/index.ts"})," -> ",(0,t.jsx)(i.code,{children:"$BASENAME/"})]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"api/lambda/user/index.ts"})," -> ",(0,t.jsx)(i.code,{children:"$BASENAME/user"})]}),"\n"]}),"\n",(0,t.jsxs)(i.h3,{id:"nested-routing",children:["Nested Routing",(0,t.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#nested-routing",children:"#"})]}),"\n",(0,t.jsx)(i.p,{children:"The routing system also supports parsing nested files. If you create a nested folder structure, the files will still automatically resolve routes in the same way."}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"api/lambda/hello.ts"})," -> ",(0,t.jsx)(i.code,{children:"$BASENAME/hello"})]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"api/lambda/user/list.ts"})," -> ",(0,t.jsx)(i.code,{children:"$BASENAME/user/list"})]}),"\n"]}),"\n",(0,t.jsxs)(i.h3,{id:"dynamic-routing",children:["Dynamic Routing",(0,t.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#dynamic-routing",children:"#"})]}),"\n",(0,t.jsxs)(i.p,{children:["The routing system supports generating dynamic routes through file directories named with ",(0,t.jsx)(i.code,{children:"[]"}),"."]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"api/lambda/user/[username]/info.ts"})," -> ",(0,t.jsx)(i.code,{children:"$BASENAME/user/:username/info"})]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"api/lambda/user/[username]/delete.ts"})," -> ",(0,t.jsx)(i.code,{children:"$BASENAME/user/:username/delete"})]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"api/lambda/article/[id]/info.ts"})," -> ",(0,t.jsx)(i.code,{children:"$BASENAME/article/:id/info"})]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"$BASENAME"})," can be configured in ",(0,t.jsx)(i.code,{children:"modern.config.js"}),", and the default value is ",(0,t.jsx)(i.code,{children:"/api"}),"."]}),"\n",(0,t.jsxs)(i.h3,{id:"allow-list",children:["Allow List",(0,t.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#allow-list",children:"#"})]}),"\n",(0,t.jsxs)(i.p,{children:["By default, all files in the ",(0,t.jsx)(i.code,{children:"lambda"})," directory are parsed as BFF function files, but we also set up a whitelist so that these files are not parsed:"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Files named starting with ",(0,t.jsx)(i.code,{children:"_"}),". For example: ",(0,t.jsx)(i.code,{children:"_utils.ts"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["All files in a folder named starting with ",(0,t.jsx)(i.code,{children:"_"}),". For example: ",(0,t.jsx)(i.code,{children:"_utils/index.ts"}),", ",(0,t.jsx)(i.code,{children:"_utils/cp.ts"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Test files. For example: ",(0,t.jsx)(i.code,{children:"foo.test.ts"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["TypeScript type files. For example: ",(0,t.jsx)(i.code,{children:"hello.d.ts"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Files under ",(0,t.jsx)(i.code,{children:"node_module"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(i.h2,{id:"function-definition",children:["Function Definition",(0,t.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#function-definition",children:"#"})]}),"\n",(0,t.jsxs)(i.p,{children:["Completely consistent with the ",(0,t.jsx)(i.a,{href:"/apis/app/hooks/api/api#function-definition",children:"Function Definition"})," under the function mode."]})]})}(s=globalThis).__RSPRESS_PAGE_META||(s.__RSPRESS_PAGE_META={}),globalThis.__RSPRESS_PAGE_META["en%2Fapis%2Fapp%2Fhooks%2Fapi%2Flambda.mdx"]={toc:[{text:"Routing File Convention",id:"routing-file-convention",depth:2},{text:"Default Routing",id:"default-routing",depth:3},{text:"Nested Routing",id:"nested-routing",depth:3},{text:"Dynamic Routing",id:"dynamic-routing",depth:3},{text:"Allow List",id:"allow-list",depth:3},{text:"Function Definition",id:"function-definition",depth:2}],title:"lambda/*.[tj]s",frontmatter:{title:"lambda/*.[tj]s",sidebar_position:3}};var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Object.assign({},(0,l.useMDXComponents)(),e.components).wrapper;return i?(0,t.jsx)(i,(0,r._)((0,d._)({},e),{children:(0,t.jsx)(a,(0,d._)({},e))})):a(e)}}}]);