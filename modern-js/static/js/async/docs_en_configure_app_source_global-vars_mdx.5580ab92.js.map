{"version":3,"file":"static/js/async/docs_en_configure_app_source_global-vars_mdx.5580ab92.js","sources":["../builder-doc/docs/en/config/source/globalVars.md","./docs/en/configure/app/source/global-vars.mdx"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"..%2F..%2Fbuilder-doc%2Fdocs%2Fen%2Fconfig%2Fsource%2FglobalVars.md\"] = {\"toc\":[{\"text\":\"Example\",\"id\":\"example\",\"depth\":3},{\"text\":\"Function Usage\",\"id\":\"function-usage\",\"depth\":3},{\"text\":\"Difference with define\",\"id\":\"difference-with-define\",\"depth\":3},{\"text\":\"Precautions\",\"id\":\"precautions\",\"depth\":3}],\"title\":\"\",\"frontmatter\":{}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        ul: \"ul\",\n        li: \"li\",\n        strong: \"strong\",\n        code: \"code\",\n        pre: \"pre\",\n        p: \"p\",\n        h3: \"h3\",\n        a: \"a\"\n    }, _provideComponents(), props.components);\n    return <><_components.ul>{\"\\n\"}<_components.li><_components.strong>{\"Type:\"}</_components.strong>{\" \"}<_components.code>{\"Record<string, JSONValue> | Function\"}</_components.code></_components.li>{\"\\n\"}<_components.li><_components.strong>{\"Default:\"}</_components.strong></_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"const defaultGlobalVars = {\\n  // The environment variable `process.env.NODE_ENV` will be added by default,\\n  // so you don't need to set it in manually.\\n  'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"Used to define global variables. It can replace expressions like \"}<_components.code>{\"process.env.FOO\"}</_components.code>{\" in your code after compile. Such as:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"console.log(process.env.NODE_ENV);\\n\\n// ⬇️ Turn into being...\\nconsole.log('development');\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"example\">{\"Example\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#example\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"In the following example, the \"}<_components.code>{\"ENABLE_VCONSOLE\"}</_components.code>{\" and \"}<_components.code>{\"APP_CONTEXT\"}</_components.code>{\" are injected into the code:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"export default {\\n  source: {\\n    globalVars: {\\n      ENABLE_VCONSOLE: true,\\n      APP_CONTEXT: { answer: 42 },\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"You can use them directly in your code:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"if (ENABLE_VCONSOLE) {\\n  // do something\\n}\\n\\nconsole.log(APP_CONTEXT);\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"function-usage\">{\"Function Usage\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#function-usage\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li><_components.strong>{\"Type:\"}</_components.strong></_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"type GlobalVarsFn = (\\n  obj: Record<string, JSONValue>,\\n  utils: { env: NodeEnv; target: BuilderTarget },\\n) => Record<string, JSONValue> | void;\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"You can set \"}<_components.code>{\"source.globalVars\"}</_components.code>{\" to a function to dynamically setting some environment variables.\"}</_components.p>{\"\\n\"}<_components.p>{\"For example, dynamically set according to the build target:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"export default {\\n  source: {\\n    globalVars(obj, { target }) {\\n      obj['MY_TARGET'] = target === 'node' ? 'server' : 'client';\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"difference-with-define\">{\"Difference with define\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#difference-with-define\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"You can take \"}<_components.code>{\"source.globalVars\"}</_components.code>{\" as the syntax sugar of \"}<_components.code>{\"source.define\"}</_components.code>{\", the only difference is that \"}<_components.code>{\"source.globalVars\"}</_components.code>{\" will automatically stringify the value, which makes it easier to set the value of global variables. The values of \"}<_components.code>{\"globalVars\"}</_components.code>{\" should be JSON-safe to ensure it can be serialized.\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"export default {\\n  source: {\\n    globalVars: {\\n      'process.env.BUILD_VERSION': '0.0.1',\\n      'import.meta.foo': { bar: 42 },\\n      'import.meta.baz': false,\\n    },\\n    define: {\\n      'process.env.BUILD_VERSION': JSON.stringify('0.0.1'),\\n      'import.meta': {\\n        foo: JSON.stringify({ bar: 42 }),\\n        baz: JSON.stringify(false),\\n      },\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"precautions\">{\"Precautions\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#precautions\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p><_components.code>{\"source.globalVars\"}</_components.code>{\" injects environment variables through string replacement, so it cannot take effect on dynamic syntaxes such as destructuring.\"}</_components.p>{\"\\n\"}<_components.p>{\"When using destructuring assignment, Builder will not be able to determine whether the variable \"}<_components.code>{\"NODE_ENV\"}</_components.code>{\" is associated with the expression \"}<_components.code>{\"process.env.NODE_ENV\"}</_components.code>{\" to be replaced, so the following usage is invalid:\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"const { NODE_ENV } = process.env;\\nconsole.log(NODE_ENV);\\n// ❌ Won't get a string.\\n\"}</_components.code></_components.pre></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n","globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"en%2Fconfigure%2Fapp%2Fsource%2Fglobal-vars.mdx\"] = {\"toc\":[],\"title\":\"source.globalVars\",\"frontmatter\":{\"sidebar_label\":\"globalVars\"}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nimport Main from '@modern-js/builder-doc/docs/en/config/source/globalVars.md';\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        div: \"div\",\n        p: \"p\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"sourceglobalvars\">{\"source.globalVars\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#sourceglobalvars\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.div className=\"modern-directive tip\"><_components.div className=\"modern-directive-title\">{\"TIP\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"This config is provided by Modern.js Builder, more detail can see \"}<_components.a href=\"https://modernjs.dev/builder/en/api/config-source.html#sourceglobalvars\" target=\"_blank\" rel=\"noopener noreferrer\">{\"source.globalVars\"}</_components.a>{\".\\n\"}</_components.p></_components.div></_components.div>{\"\\n\"}{\"\\n\"}<Main/></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","ul","li","strong","code","pre","p","h3","a","components","className","id","href","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_","h1","div","target","rel"],"mappings":"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"}