{"version":3,"file":"static/js/async/docs_zh_guides_basic-features_mock_mdx.72d5b2c6.js","sources":["./docs/zh/guides/basic-features/mock.mdx"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"zh%2Fguides%2Fbasic-features%2Fmock.mdx\"] = {\"toc\":[{\"text\":\"启用 Mock\",\"id\":\"启用-mock\",\"depth\":2},{\"text\":\"编写 Mock 文件\",\"id\":\"编写-mock-文件\",\"depth\":2},{\"text\":\"返回随机数据\",\"id\":\"返回随机数据\",\"depth\":2},{\"text\":\"延迟响应\",\"id\":\"延迟响应\",\"depth\":2},{\"text\":\"按需使用 Mock 服务\",\"id\":\"按需使用-mock-服务\",\"depth\":2}],\"title\":\"数据模拟\",\"frontmatter\":{\"sidebar_position\":5}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        p: \"p\",\n        h2: \"h2\",\n        code: \"code\",\n        pre: \"pre\",\n        div: \"div\",\n        ul: \"ul\",\n        li: \"li\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"数据模拟\">{\"数据模拟\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#数据模拟\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.p>{\"Modern.js 提供了快速生成 Mock 数据的功能，能够让前端独立自主开发，不被后端接口阻塞。\"}</_components.p>{\"\\n\"}<_components.h2 id=\"启用-mock\">{\"启用 Mock\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#启用-mock\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"约定当 \"}<_components.code>{\"config/mock\"}</_components.code>{\" 目录下存在 \"}<_components.code>{\"index.[jt]s\"}</_components.code>{\" 时，会自动开启 Mock 功能，如下：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-bash\">{\".\\n├── config\\n│   └── mock\\n│       └── index.ts\\n├── src\\n│   └── App.tsx\\n└── modern.config.ts\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"编写-mock-文件\">{\"编写 Mock 文件\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#编写-mock-文件\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p><_components.code>{\"config/mock/index.ts\"}</_components.code>{\" 文件只需要导出一个包含所有 Mock API 的对象，对象的属性由请求配置 \"}<_components.code>{\"method\"}</_components.code>{\" 和 \"}<_components.code>{\"url\"}</_components.code>{\" 组成，对应的属性值可以为 \"}<_components.code>{\"Object\"}</_components.code>{\"、\"}<_components.code>{\"Array\"}</_components.code>{\"、\"}<_components.code>{\"Function\"}</_components.code>{\"：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"export default {\\n  /* 属性为具体的 method 和 请求 url，值为 object 或 array 作为请求的结果 */\\n  'GET /api/getInfo': { data: [1, 2, 3, 4] },\\n\\n  /* method 默认为 GET */\\n  '/api/getExample': { id: 1 },\\n\\n  /* 可以使用自定义函数根据请求动态返回数据, req & res 都是 Node.js HTTP 原生对象 */\\n  'POST /api/addInfo': (req, res, next) => {\\n    res.setHeader('Access-Control-Allow-Origin', '*');\\n    res.end('200');\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"代码中访问 \"}<_components.code>{\"http://localhost:8080/api/getInfo\"}</_components.code>{\" 时，接口会返回 JSON 格式数据：\"}<_components.code>{'{ \"data\": [1, 2, 3, 4] }'}</_components.code>{\"。\"}</_components.p>{\"\\n\"}<_components.h2 id=\"返回随机数据\">{\"返回随机数据\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#返回随机数据\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p>{\"可以在 \"}<_components.code>{\"config/mock/index.js\"}</_components.code>{\" 中自主引入 \"}<_components.a href=\"https://github.com/nuysoft/Mock/wiki/Getting-Started\" target=\"_blank\" rel=\"noopener noreferrer\">{\"Mock.js\"}</_components.a>{\" 等库生成随机数据，例如：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"const Mock = require('mockjs');\\n\\nmodule.exports = {\\n  '/api/getInfo': Mock.mock({\\n    'data|1-10': [{ name: '@cname' }],\\n  }) /* => {data: [{name: \\\"董霞\\\"}, {name: \\\"魏敏\\\"},  {name: \\\"石磊\\\"}} */,\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.div className=\"modern-directive info\"><_components.div className=\"modern-directive-title\">{\"更多随机数据生成库\"}</_components.div><_components.div className=\"modern-directive-content\">{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li><_components.a href=\"https://github.com/chancejs/chancejs\" target=\"_blank\" rel=\"noopener noreferrer\">{\"Chancejs\"}</_components.a></_components.li>{\"\\n\"}<_components.li><_components.a href=\"https://github.com/nuysoft/Mock/wiki/Getting-Started\" target=\"_blank\" rel=\"noopener noreferrer\">{\"Mock\"}</_components.a></_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}</_components.div></_components.div>{\"\\n\"}<_components.h2 id=\"延迟响应\">{\"延迟响应\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#延迟响应\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li>{\"可以使用浏览器「 弱网模拟 」的功能实现。\"}</_components.li>{\"\\n\"}<_components.li>{\"可以通过 \"}<_components.code>{\"setTimeout\"}</_components.code>{\" 为单个接口设置延迟，例如：\"}</_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"module.exports = {\\n  'api/getInfo': (req, res) => {\\n    setTimeout(() => {\\n      res.end('delay 2000ms');\\n    }, 2000);\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h2 id=\"按需使用-mock-服务\">{\"按需使用 Mock 服务\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#按需使用-mock-服务\">{\"#\"}</_components.a></_components.h2>{\"\\n\"}<_components.p><_components.code>{\"config/mock/index.ts\"}</_components.code>{\" 下还可以到处 \"}<_components.code>{\"config\"}</_components.code>{\" 对象，更精细的控制 Mock 服务。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"type MockConfig = {\\n  enable: ((req: IncomingMessage, res: ServerResponse) => boolean) | boolean;\\n};\\n\\nexport const config = {\\n  enable: false\\n}\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"目前仅支持 \"}<_components.code>{\"enable\"}</_components.code>{\" 配置，开发者可以通过该配置控制是否执行 Mock。\"}</_components.p>{\"\\n\"}<_components.div className=\"modern-directive note\"><_components.div className=\"modern-directive-title\">{\"NOTE\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"修改 \"}<_components.code>{\"config\"}</_components.code>{\" 后无需重启服务，即刻生效。\\n\"}</_components.p></_components.div></_components.div></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","a","p","h2","code","pre","div","ul","li","components","id","className","href","target","rel","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_"],"mappings":"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"}