/*! For license information please see 35530.7c8d5c12.js.LICENSE.txt */
(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["35530"],{62739:function(e,i,n){"use strict";n.r(i);var s=n("39980"),d=n("9580");function t(e){let i=Object.assign({h1:"h1",a:"a",p:"p",code:"code",div:"div",h2:"h2",h3:"h3",ul:"ul",li:"li",pre:"pre"},(0,d.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.h1,{id:"tjs",children:["**/*.[tj]s",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#tjs",children:"#"})]}),"\n",(0,s.jsxs)(i.p,{children:["Files that declare API routes in the ",(0,s.jsx)(i.a,{href:"/guides/advanced-features/bff/type#function-mode",children:"BFF Function Mode"}),". Except for some ",(0,s.jsx)(i.a,{href:"/apis/app/hooks/api/api#allow-list",children:"convention files"}),", files in the ",(0,s.jsx)(i.code,{children:"api"})," directory will be registered as the routes."]}),"\n",(0,s.jsxs)(i.div,{className:"rspress-directive info",children:[(0,s.jsx)(i.div,{className:"rspress-directive-title",children:"INFO"}),(0,s.jsxs)(i.div,{className:"rspress-directive-content",children:[(0,s.jsxs)(i.p,{children:["Using the ",(0,s.jsx)(i.code,{children:"api"})," directory requires enabling the BFF feature, and you need to run the ",(0,s.jsx)(i.code,{children:"new"}),' command in the project to enable the "BFF" feature.']}),"\n",(0,s.jsxs)(i.p,{children:["This file supports using the ",(0,s.jsx)(i.code,{children:"js"})," or ",(0,s.jsx)(i.code,{children:"ts"})," language, but you must use ",(0,s.jsx)(i.code,{children:"esm"})," syntax to export functions."]}),"\n"]})]}),"\n",(0,s.jsxs)(i.h2,{id:"routing-file-convention",children:["Routing File Convention",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#routing-file-convention",children:"#"})]}),"\n",(0,s.jsxs)(i.h3,{id:"default-routing",children:["Default Routing",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#default-routing",children:"#"})]}),"\n",(0,s.jsxs)(i.p,{children:["The routing system will map files named ",(0,s.jsx)(i.code,{children:"index"})," to the previous directory."]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"api/index.ts"})," -> ",(0,s.jsx)(i.code,{children:"$BASENAME/"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"api/user/index.ts"})," -> ",(0,s.jsx)(i.code,{children:"$BASENAME/user"})]}),"\n"]}),"\n",(0,s.jsxs)(i.h3,{id:"nested-routing",children:["Nested Routing",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#nested-routing",children:"#"})]}),"\n",(0,s.jsx)(i.p,{children:"The routing system also supports parsing nested files. If you create a nested folder structure, the files will still automatically resolve routes in the same way."}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"api/hello.ts"})," -> ",(0,s.jsx)(i.code,{children:"$BASENAME/hello"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"api/user/list.ts"})," -> ",(0,s.jsx)(i.code,{children:"$BASENAME/user/list"})]}),"\n"]}),"\n",(0,s.jsxs)(i.h3,{id:"dynamic-routing",children:["Dynamic Routing",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#dynamic-routing",children:"#"})]}),"\n",(0,s.jsxs)(i.p,{children:["The routing system supports generating dynamic routes through file directories named with ",(0,s.jsx)(i.code,{children:"[]"}),"."]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"api/user/[username]/info.ts"})," -> ",(0,s.jsx)(i.code,{children:"$BASENAME/user/:username/info"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"api/user/[username]/delete.ts"})," -> ",(0,s.jsx)(i.code,{children:"$BASENAME/user/:username/delete"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"api/article/[id]/info.ts"})," -> ",(0,s.jsx)(i.code,{children:"$BASENAME/article/:id/info"})]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"$BASENAME"})," can be configured in ",(0,s.jsx)(i.code,{children:"modern.config.js"}),", and the default value is ",(0,s.jsx)(i.code,{children:"/api"}),"."]}),"\n",(0,s.jsxs)(i.h3,{id:"allow-list",children:["Allow List",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#allow-list",children:"#"})]}),"\n",(0,s.jsxs)(i.p,{children:["By default, all files in the ",(0,s.jsx)(i.code,{children:"api"})," directory will be parsed as BFF function files, but we also set a white list for these files that are not parsed:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Files whose names start with ",(0,s.jsx)(i.code,{children:"_"}),". For example: ",(0,s.jsx)(i.code,{children:"_utils.ts"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["All files in folders whose names start with ",(0,s.jsx)(i.code,{children:"_"}),". For example: ",(0,s.jsx)(i.code,{children:"_utils/index.ts"}),", ",(0,s.jsx)(i.code,{children:"_utils/cp.ts"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Test files. For example: ",(0,s.jsx)(i.code,{children:"foo.test.ts"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["TypeScript type files. For example: ",(0,s.jsx)(i.code,{children:"hello.d.ts"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Files under ",(0,s.jsx)(i.code,{children:"node_modules"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(i.h2,{id:"function-definition",children:["Function Definition",(0,s.jsx)(i.a,{className:"header-anchor","aria-hidden":"true",href:"#function-definition",children:"#"})]}),"\n",(0,s.jsx)(i.p,{children:"In addition to the routing rules above, there are also conventions for function definitions and exports in the code."}),"\n",(0,s.jsx)(i.p,{children:"Functions are exported by name, and the name of the exported function is the HTTP method accepted by the corresponding interface, that is:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"export const get = async () => {\n  return {\n    name: 'Modern.js',\n    desc: 'Modern web Solutions',\n  };\n};\n"})}),"\n",(0,s.jsxs)(i.p,{children:["By exporting functions in this way, you will get a ",(0,s.jsx)(i.code,{children:"GET"})," interface."]}),"\n",(0,s.jsxs)(i.p,{children:["The application project supports 9 Method definitions, namely: ",(0,s.jsx)(i.code,{children:"GET"}),", ",(0,s.jsx)(i.code,{children:"POST"}),", ",(0,s.jsx)(i.code,{children:"PUT"}),", ",(0,s.jsx)(i.code,{children:"DELETE"}),", ",(0,s.jsx)(i.code,{children:"CONNECT"}),", ",(0,s.jsx)(i.code,{children:"TRACE"}),", ",(0,s.jsx)(i.code,{children:"PATCH"}),", ",(0,s.jsx)(i.code,{children:"OPTION"}),", ",(0,s.jsx)(i.code,{children:"HEAD"}),", that is, these Methods can be used as the names of the exported functions."]}),"\n",(0,s.jsxs)(i.p,{children:["The name is case-insensitive, that is, if it is ",(0,s.jsx)(i.code,{children:"GET"}),", it can be written as ",(0,s.jsx)(i.code,{children:"get"}),", ",(0,s.jsx)(i.code,{children:"Get"}),", ",(0,s.jsx)(i.code,{children:"GEt"}),", ",(0,s.jsx)(i.code,{children:"GET"}),", all of which can be accurately recognized. The default export, that is, ",(0,s.jsx)(i.code,{children:"export default xxx"}),", will be mapped to ",(0,s.jsx)(i.code,{children:"Get"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["Because ",(0,s.jsx)(i.code,{children:"delete"})," is a keyword in JavaScript, you can use ",(0,s.jsx)(i.code,{children:"del"})," or ",(0,s.jsx)(i.code,{children:"DELETE"})," instead."]}),"\n",(0,s.jsx)(i.p,{children:"Multiple functions with different Methods can be defined in one file, but if multiple functions with the same Method are defined, only the first one will take effect."}),"\n",(0,s.jsxs)(i.div,{className:"rspress-directive info",children:[(0,s.jsx)(i.div,{className:"rspress-directive-title",children:"INFO"}),(0,s.jsxs)(i.div,{className:"rspress-directive-content",children:[(0,s.jsx)(i.p,{children:"It should be noted that the defined functions should all be asynchronous, which is related to the type when calling the function."}),"\n"]})]})]})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:i}=Object.assign({},(0,d.ah)(),e.components);return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}i.default=r,r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["en%2Fapis%2Fapp%2Fhooks%2Fapi%2Fapi.mdx"]={toc:[{text:"Routing File Convention",id:"routing-file-convention",depth:2},{text:"Default Routing",id:"default-routing",depth:3},{text:"Nested Routing",id:"nested-routing",depth:3},{text:"Dynamic Routing",id:"dynamic-routing",depth:3},{text:"Allow List",id:"allow-list",depth:3},{text:"Function Definition",id:"function-definition",depth:2}],title:"**/*.[tj]s",frontmatter:{title:"**/*.[tj]s",sidebar_position:1}}}}]);