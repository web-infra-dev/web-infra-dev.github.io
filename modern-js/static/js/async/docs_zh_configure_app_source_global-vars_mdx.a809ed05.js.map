{"version":3,"file":"static/js/async/docs_zh_configure_app_source_global-vars_mdx.a809ed05.js","sources":["../builder-doc/docs/zh/config/source/globalVars.md","./docs/zh/configure/app/source/global-vars.mdx"],"sourcesContent":["globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"..%2F..%2Fbuilder-doc%2Fdocs%2Fzh%2Fconfig%2Fsource%2FglobalVars.md\"] = {\"toc\":[{\"text\":\"示例\",\"id\":\"示例\",\"depth\":3},{\"text\":\"函数用法\",\"id\":\"函数用法\",\"depth\":3},{\"text\":\"与 define 的区别\",\"id\":\"与-define-的区别\",\"depth\":3},{\"text\":\"注意事项\",\"id\":\"注意事项\",\"depth\":3}],\"title\":\"\",\"frontmatter\":{}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        ul: \"ul\",\n        li: \"li\",\n        strong: \"strong\",\n        code: \"code\",\n        pre: \"pre\",\n        p: \"p\",\n        h3: \"h3\",\n        a: \"a\"\n    }, _provideComponents(), props.components);\n    return <><_components.ul>{\"\\n\"}<_components.li><_components.strong>{\"类型：\"}</_components.strong>{\" \"}<_components.code>{\"Record<string, JSONValue> | Function\"}</_components.code></_components.li>{\"\\n\"}<_components.li><_components.strong>{\"默认值：\"}</_components.strong></_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"// Builder 默认会添加环境变量 `process.env.NODE_ENV`，因此你不需要手动添加它。\\nconst defaultGlobalVars = {\\n  'process.env.NODE_ENV': process.env.NODE_ENV,\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"用于在构建时将类似 \"}<_components.code>{\"process.env.FOO\"}</_components.code>{\" 的全局变量表达式替换为指定的值，比如：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"console.log(process.env.NODE_ENV);\\n\\n// ⬇️ Turn into being...\\nconsole.log('development');\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"示例\">{\"示例\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#示例\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p>{\"在下方示例中，会在代码中注入 \"}<_components.code>{\"ENABLE_VCONSOLE\"}</_components.code>{\" 和 \"}<_components.code>{\"APP_CONTEXT\"}</_components.code>{\" 两个环境变量：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"export default {\\n  source: {\\n    globalVars: {\\n      ENABLE_VCONSOLE: true,\\n      APP_CONTEXT: { answer: 42 },\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"你可以在代码中直接使用它们：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"if (ENABLE_VCONSOLE) {\\n  // do something\\n}\\n\\nconsole.log(APP_CONTEXT);\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"函数用法\">{\"函数用法\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#函数用法\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.ul>{\"\\n\"}<_components.li><_components.strong>{\"类型：\"}</_components.strong></_components.li>{\"\\n\"}</_components.ul>{\"\\n\"}<_components.pre><_components.code className=\"language-ts\">{\"type GlobalVarsFn = (\\n  obj: Record<string, JSONValue>,\\n  utils: { env: NodeEnv; target: BuilderTarget },\\n) => Record<string, JSONValue> | void;\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.p>{\"你可以将 \"}<_components.code>{\"source.globalVars\"}</_components.code>{\" 设置为一个函数，从而动态设置一些环境变量的值。\"}</_components.p>{\"\\n\"}<_components.p>{\"比如，根据当前的构建产物类型进行动态设置：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"export default {\\n  source: {\\n    globalVars(obj, { target }) {\\n      obj['MY_TARGET'] = target === 'node' ? 'server' : 'client';\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"与-define-的区别\">{\"与 define 的区别\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#与-define-的区别\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p><_components.code>{\"source.globalVars\"}</_components.code>{\" 是 \"}<_components.code>{\"source.define\"}</_components.code>{\" 的一个语法糖，它们之间唯一的区别是，\"}<_components.code>{\"source.globalVars\"}</_components.code>{\" 会自动将传入的值进行 JSON 序列化处理，这使得设置全局变量的值更加方便。注意 \"}<_components.code>{\"globalVars\"}</_components.code>{\" 的每个值都需要是可以被 JSON 序列化的值。\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"export default {\\n  source: {\\n    globalVars: {\\n      'process.env.BUILD_VERSION': '0.0.1',\\n      'import.meta.foo': { bar: 42 },\\n      'import.meta.baz': false,\\n    },\\n    define: {\\n      'process.env.BUILD_VERSION': JSON.stringify('0.0.1'),\\n      'import.meta': {\\n        foo: JSON.stringify({ bar: 42 }),\\n        baz: JSON.stringify(false),\\n      },\\n    },\\n  },\\n};\\n\"}</_components.code></_components.pre>{\"\\n\"}<_components.h3 id=\"注意事项\">{\"注意事项\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#注意事项\">{\"#\"}</_components.a></_components.h3>{\"\\n\"}<_components.p><_components.code>{\"source.globalVars\"}</_components.code>{\" 是通过字符串替换的形式来注入环境变量的，因此它无法对「解构赋值」等动态写法生效。\"}</_components.p>{\"\\n\"}<_components.p>{\"在使用解构赋值时，Builder 将无法判断变量 \"}<_components.code>{\"NODE_ENV\"}</_components.code>{\" 是否与要替换的表达式 \"}<_components.code>{\"process.env.NODE_ENV\"}</_components.code>{\" 存在关联，因此以下使用方式是无效的：\"}</_components.p>{\"\\n\"}<_components.pre><_components.code className=\"language-js\">{\"const { NODE_ENV } = process.env;\\nconsole.log(NODE_ENV);\\n// ❌ Won't get a string.\\n\"}</_components.code></_components.pre></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n","globalThis.__RSPRESS_PAGE_META ||= {};\nglobalThis.__RSPRESS_PAGE_META[\"zh%2Fconfigure%2Fapp%2Fsource%2Fglobal-vars.mdx\"] = {\"toc\":[],\"title\":\"source.globalVars\",\"frontmatter\":{\"sidebar_label\":\"globalVars\"}};\nimport { useMDXComponents as _provideComponents } from \"@mdx-js/react\";\nimport Main from '@modern-js/builder-doc/docs/zh/config/source/globalVars.md';\nfunction _createMdxContent(props) {\n    const _components = Object.assign({\n        h1: \"h1\",\n        a: \"a\",\n        div: \"div\",\n        p: \"p\"\n    }, _provideComponents(), props.components);\n    return <><_components.h1 id=\"sourceglobalvars\">{\"source.globalVars\"}<_components.a className=\"header-anchor\" aria-hidden=\"true\" href=\"#sourceglobalvars\">{\"#\"}</_components.a></_components.h1>{\"\\n\"}<_components.div className=\"modern-directive tip\"><_components.div className=\"modern-directive-title\">{\"TIP\"}</_components.div><_components.div className=\"modern-directive-content\"><_components.p>{\"该配置由 Modern.js Builder 提供，更多信息可参考 \"}<_components.a href=\"https://modernjs.dev/builder/api/config-source.html#sourceglobalvars\" target=\"_blank\" rel=\"noopener noreferrer\">{\"source.globalVars\"}</_components.a>{\"。\\n\"}</_components.p></_components.div></_components.div>{\"\\n\"}{\"\\n\"}<Main/></>;\n}\nfunction MDXContent(props = {}) {\n    const { wrapper: MDXLayout } = Object.assign({}, _provideComponents(), props.components);\n    return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props}/></MDXLayout> : _createMdxContent(props);\n}\nexport default MDXContent;\n"],"names":["_createMdxContent","props","_components","Object","assign","ul","li","strong","code","pre","p","h3","a","components","className","id","href","globalThis","__RSPRESS_PAGE_META","MDXLayout","wrapper","_","h1","div","target","rel"],"mappings":"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"}