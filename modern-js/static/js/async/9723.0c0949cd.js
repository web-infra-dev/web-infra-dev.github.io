/*! For license information please see 9723.0c0949cd.js.LICENSE.txt */
(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["9723"],{78707:function(e,n,r){"use strict";r.r(n);var s=r("39980"),d=r("76713");function i(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",div:"div",h2:"h2",pre:"pre",h3:"h3",ul:"ul",li:"li"},(0,d.useMDXComponents)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"useloader",children:["useLoader",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#useloader",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["\u4E00\u4E2A\u540C\u6784\u7684 API\uFF0C\u901A\u5E38\u4F1A\u7528\u6765\u505A\u5F02\u6B65\u8BF7\u6C42\u3002\u5F53 SSR \u7684\u65F6\u5019\uFF0C\u670D\u52A1\u7AEF\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"useLoader"})," \u9884\u52A0\u8F7D\u6570\u636E\uFF0C\u540C\u65F6\u6D4F\u89C8\u5668\u7AEF\u4E5F\u4F1A\u590D\u7528\u8FD9\u90E8\u5206\u6570\u636E\u3002"]}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,s.jsx)(n.div,{className:"rspress-directive-content",children:(0,s.jsx)(n.p,{children:"\u5728\u4F7F\u7528 Rspack \u4F5C\u4E3A\u6253\u5305\u5DE5\u5177\u65F6\uFF0C\u6682\u4E0D\u652F\u6301\u4F7F\u7528 useLoader API\u3002"})})]}),"\n",(0,s.jsxs)(n.h2,{id:"\u4F7F\u7528\u59FF\u52BF",children:["\u4F7F\u7528\u59FF\u52BF",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4F7F\u7528\u59FF\u52BF",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { useLoader } from '@modern-js/runtime';\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"\u51FD\u6570\u7B7E\u540D",children:["\u51FD\u6570\u7B7E\u540D",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u51FD\u6570\u7B7E\u540D",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type LoaderFn = (context: runtimeContext) => Promise<unknow>;\ntype Options = {\n  onSuccess: (data: Record<string, any>) => void;\n  onError: (error: Error) => void;\n  initialData: Record<string, any>;\n  skip: boolean;\n  params: Record<string, any>;\n  static: boolean;\n};\ntype ReturnData = {\n  data: Record<string, any>;\n  loading: boolean;\n  error: Error;\n  reload: (params?: Record<string, any>) => Promise<any> | undefined;\n  reloading: boolean;\n};\n\nfunction useLoader(loaderFn: LoaderFn, options: Options): ReturnData;\n"})}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive info",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"INFO"}),(0,s.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"runtimeContext"})," \u7C7B\u578B\u53EF\u4EE5\u53C2\u8003 ",(0,s.jsx)(n.a,{href:"/apis/app/runtime/core/use-runtime-context",children:"useRuntimeContext"}),"\u3002"]}),"\n"]})]}),"\n",(0,s.jsxs)(n.h3,{id:"\u53C2\u6570",children:["\u53C2\u6570",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"loaderFn"}),"\uFF1A\u7528\u4E8E\u52A0\u8F7D\u6570\u636E\u7684\u51FD\u6570\uFF0C\u8FD4\u56DE Promise\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"options"}),"\uFF1A\u53EF\u9009\u914D\u7F6E\u9879\u3002","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"onSuccess"}),"\uFF1A\u6267\u884C\u6210\u529F\u7684\u56DE\u8C03\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"onError"}),"\uFF1A\u6267\u884C\u5931\u8D25\u7684\u56DE\u8C03\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"initialData"}),"\uFF1A\u9996\u6B21\u6267\u884C\u524D\u7684\u521D\u59CB\u6570\u636E\uFF0C\u5BF9\u5E94\u8FD4\u56DE\u503C\u4E2D\u7684 ",(0,s.jsx)(n.code,{children:"data"})," \u5B57\u6BB5\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"skip"}),"\uFF1A\u5F53\u503C\u4E3A ",(0,s.jsx)(n.code,{children:"true"})," \u65F6\uFF0C\u51FD\u6570\u4E0D\u6267\u884C\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"params"}),"\uFF1A\u5F53 ",(0,s.jsx)(n.code,{children:"params"})," \u5E8F\u5217\u5316\u7ED3\u679C\u53D1\u751F\u6539\u53D8\u65F6\uFF0C\u51FD\u6570\u4F1A\u91CD\u65B0\u6267\u884C\u3002\u540C\u65F6\uFF0C",(0,s.jsx)(n.code,{children:"params"})," \u4E5F\u4F1A\u4F5C\u4E3A\u51FD\u6570\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u88AB\u4F20\u5165\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"static"}),"\uFF1A\u5F53\u503C\u4E3A ",(0,s.jsx)(n.code,{children:"true"})," \u65F6\uFF0C",(0,s.jsx)(n.code,{children:"useLoader"})," \u7528\u4E8E ",(0,s.jsx)(n.a,{href:"/guides/advanced-features/ssg",children:"SSG"})," \u7F16\u8BD1\u9636\u6BB5\u6570\u636E\u7684\u83B7\u53D6\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"\u8FD4\u56DE\u503C",children:["\u8FD4\u56DE\u503C",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u8FD4\u56DE\u503C",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data"}),"\uFF1A\u6267\u884C\u6210\u529F\u65F6\u7684\u8FD4\u56DE\u6570\u636E\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"loading"}),"\uFF1A\u8868\u793A\u51FD\u6570\u662F\u5426\u5904\u4E8E\u6267\u884C\u8FC7\u7A0B\u4E2D\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"error"}),"\uFF1A\u51FD\u6570\u6267\u884C\u5931\u8D25\u65F6\u7684\u9519\u8BEF\u4FE1\u606F\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"reload"}),"\uFF1A\u8C03\u7528\u540E\u53EF\u4EE5\u91CD\u65B0\u6267\u884C\u51FD\u6570\u3002","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"params"}),"\uFF1A\u5F53\u503C\u4E3A ",(0,s.jsx)(n.code,{children:"undefined"})," \u65F6\uFF0C\u51FD\u6570\u6267\u884C\u65F6\u5C06\u590D\u7528\u4E0A\u6B21\u7684\u503C\uFF1B\u5426\u5219\u4F1A\u4F7F\u7528\u65B0\u7684\u503C\u91CD\u65B0\u6267\u884C\u51FD\u6570\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"reloading"}),"\uFF1A\u8C03\u7528 ",(0,s.jsx)(n.code,{children:"reload"})," \u7684\u6267\u884C\u8FC7\u7A0B\u4E2D\uFF0C",(0,s.jsx)(n.code,{children:"reloading"})," \u503C\u4E3A ",(0,s.jsx)(n.code,{children:"true"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"\u793A\u4F8B",children:["\u793A\u4F8B",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u793A\u4F8B",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function Container() {\n  const { data, error, loading } = useLoader(\n    async (context, params) => {\n      console.log(params) // nicole\n      return fetch(user);\n    },\n    {\n      onSuccess: data => {\n        console.log('I did success:(',  data);\n      },\n      onError: error => {\n        console.log('I met error:)',  error);\n      },\n      initialData: { name: 'nicole', gender: 'female' },\n      params: 'nicole'\n    }\n  );\n\n  return ...;\n}\n"})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.useMDXComponents)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}n.default=c,c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fapis%2Fapp%2Fruntime%2Fcore%2Fuse-loader.mdx"]={toc:[{text:"\u4F7F\u7528\u59FF\u52BF",id:"\u4F7F\u7528\u59FF\u52BF",depth:2},{text:"\u51FD\u6570\u7B7E\u540D",id:"\u51FD\u6570\u7B7E\u540D",depth:2},{text:"\u53C2\u6570",id:"\u53C2\u6570",depth:3},{text:"\u8FD4\u56DE\u503C",id:"\u8FD4\u56DE\u503C",depth:3},{text:"\u793A\u4F8B",id:"\u793A\u4F8B",depth:2}],title:"useLoader",frontmatter:{title:"useLoader"}}}}]);