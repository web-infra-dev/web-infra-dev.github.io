(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["97680"],{28388:function(n,e,o){"use strict";o.r(e),o.d(e,{default:function(){return c},frontmatter:function(){return d}});var s=o("15169"),r=o("43932"),i=o("9880"),l=o("23169");function a(n){var e=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",pre:"pre",code:"code",h3:"h3"},(0,l.useMDXComponents)(),n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h1,{id:"\u6269\u5C55\u63D2\u4EF6-hook",children:["\u6269\u5C55\u63D2\u4EF6 Hook",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6269\u5C55\u63D2\u4EF6-hook",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u672C\u5C0F\u8282\u4ECB\u7ECD\u5982\u4F55\u901A\u8FC7\u52A8\u6001\u6CE8\u518C ",(0,i.jsx)(e.a,{href:"/guides/topic-detail/framework-plugin/hook",children:"Hook \u6A21\u578B"})," \u7684\u65B9\u5F0F\u6765\u6269\u5C55\u63D2\u4EF6 Hook\u3002"]}),"\n",(0,i.jsxs)(e.h2,{id:"\u793A\u4F8B",children:["\u793A\u4F8B",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u793A\u4F8B",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"\u8FD9\u91CC\u6211\u4EEC\u7528\u4E00\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\u6F14\u793A\u4E00\u4E0B\u3002\u5047\u8BBE\u6211\u4EEC\u8981\u6DFB\u52A0\u4E00\u4E9B\u7BA1\u7406\u63A7\u5236\u53F0\u8F93\u51FA\u4FE1\u606F\u7684 Hook\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u9996\u5148\u6211\u4EEC\u521D\u59CB\u5316\u4E00\u4E2A\u7A7A\u7684\u9879\u76EE\u6587\u4EF6\uFF0C\u5E76\u6DFB\u52A0\u57FA\u7840\u4F9D\u8D56\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"$ npx @modern-js/create@latest modern-js-demo\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"\u521B\u5EFA-hook",children:["\u521B\u5EFA Hook",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u521B\u5EFA-hook",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4EEC\u5148\u521B\u5EFA\u4E00\u4E2A Hook \u6A21\u578B\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:"title=config/plugin/myPlugin.ts",children:"import { createWaterfall } from '@modern-js/plugin';\n\nconst message = createWaterfall<string[]>();\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u7136\u540E\u6CE8\u518C\u5B83\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:"title=config/plugin/myPlugin.ts",children:"import type { CliPlugin } from '@modern-js/core';\n\nexport const myPlugin = (): CliPlugin => ({\n  name: 'my-plugin',\n\n  registerHook: {\n    message,\n  },\n});\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6DFB\u52A0 Hook \u7C7B\u578B\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:"title=config/plugin/myPlugin.ts",children:"declare module '@modern-js/core' {\n  export interface Hooks {\n    message: typeof message;\n  }\n}\n"})}),"\n",(0,i.jsxs)(e.h3,{id:"\u4F7F\u7528-hook",children:["\u4F7F\u7528 Hook",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4F7F\u7528-hook",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u521B\u5EFA\u63D2\u4EF6\uFF0C\u901A\u8FC7 ",(0,i.jsx)(e.code,{children:"commands"})," Hook \u51FD\u6570\uFF0C\u6DFB\u52A0\u547D\u4EE4\u5904\u7406\u903B\u8F91\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:"title=config/plugin/myPlugin.ts",children:"import type { CliPlugin } from '@modern-js/core';\n\nexport const myPlugin = (): CliPlugin => ({\n  name: 'my-plugin',\n\n  setup(api) {\n    return {\n      commands({ program }) {\n        program.command('message').action(async () => {\n          const hookRunners = api.useHookRunners();\n          const messages = hookRunners.message([]);\n          console.log(messages.join('\\n'));\n        });\n      },\n    };\n  },\n});\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6700\u540E ",(0,i.jsx)(e.code,{children:"config/plugin/myPlugin.ts"})," \u7684\u72B6\u6001\u662F\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:"title=config/plugin/myPlugin.ts",children:"import { createWaterfall } from '@modern-js/plugin';\nimport type { CliPlugin } from '@modern-js/core';\n\nconst message = createWaterfall<string[]>();\n\nexport const myPlugin = (): CliPlugin => ({\n  name: 'my-plugin',\n\n  registerHook: {\n    message,\n  },\n\n  setup(api) {\n    return {\n      commands({ program }) {\n        program.command('message').action(async () => {\n          const hookRunners = api.useHookRunners();\n          const messages = hookRunners.message([]);\n          console.log(messages.join('\\n'));\n        });\n      },\n    };\n  },\n});\n\ndeclare module '@modern-js/core' {\n  export interface Hooks {\n    message: typeof message;\n  }\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u7136\u540E\u5728 ",(0,i.jsx)(e.code,{children:"modern.config.ts"})," \u4E2D\u6DFB\u52A0\u8FD9\u4E2A\u63D2\u4EF6\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:'title="modern.config.ts"',children:"import { defineConfig } from '@modern-js/app-tools';\nimport { myPlugin } from './config/plugin/myPlugin';\n\nexport default defineConfig({\n  plugins: [myPlugin()],\n});\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8FD9\u65F6\u8FD0\u884C ",(0,i.jsx)(e.code,{children:"npx modern message"})," \u5C31\u4F1A\u6267\u884C\u76F8\u5173\u903B\u8F91\uFF0C\u4F46\u7531\u4E8E\u6CA1\u6709\u6536\u96C6\u5230\u4EFB\u4F55\u4FE1\u606F\uFF0C\u6240\u4EE5\u63A7\u5236\u53F0\u8F93\u51FA\u4E3A\u7A7A\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u90A3\u8FD9\u91CC\u6211\u4EEC\u6DFB\u52A0\u4E00\u4E2A\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:"title=config/plugin/otherPlugin.ts",children:"import type { CliPlugin } from '@modern-js/core';\n\nexport const otherPlugin = (): CliPlugin => ({\n  name: 'other-plugin',\n\n  setup(api) {\n    return {\n      message(list) {\n        return [...list, '[foo] line 0', '[foo] line 1'];\n      },\n    };\n  },\n});\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5C06\u5B83\u6DFB\u52A0\u5230\u914D\u7F6E\u4E2D\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",meta:'title="modern.config.ts"',children:"import { defineConfig } from '@modern-js/app-tools';\nimport { myPlugin } from './config/plugin/myPlugin';\nimport { otherPlugin } from './config/plugin/otherPlugin';\n\nexport default defineConfig({\n  plugins: [myPlugin(), otherPlugin()],\n});\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8FD9\u65F6\u8FD0\u884C ",(0,i.jsx)(e.code,{children:"npx modern message"})," \u5C31\u53EF\u4EE5\u5728\u63A7\u5236\u53F0\u770B\u5230\u4FE1\u606F\u4E86\uFF1A"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"$ modern message\n[foo] line 0\n[foo] line 1\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4EE5\u4E0A\u9762\u8FD9\u79CD\u65B9\u5F0F\u5C31\u53EF\u4EE5\u6269\u5C55\u51FA\u62E5\u6709\u5404\u79CD\u80FD\u529B\u7684\u63D2\u4EF6 Hook\u3002"})]})}function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},(0,l.useMDXComponents)(),n.components).wrapper;return e?(0,i.jsx)(e,(0,r._)((0,s._)({},n),{children:(0,i.jsx)(a,(0,s._)({},n))})):a(n)}var c=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["zh%2Fguides%2Ftopic-detail%2Fframework-plugin%2Fextend.mdx"]={toc:[{text:"\u793A\u4F8B",id:"\u793A\u4F8B",depth:2},{text:"\u521B\u5EFA Hook",id:"\u521B\u5EFA-hook",depth:3},{text:"\u4F7F\u7528 Hook",id:"\u4F7F\u7528-hook",depth:3}],title:"\u6269\u5C55\u63D2\u4EF6 Hook"};var d={sidebar_position:5}}}]);