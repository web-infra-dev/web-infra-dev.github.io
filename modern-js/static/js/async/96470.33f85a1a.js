"use strict";(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["96470"],{53442:function(e,s,n){n.r(s),n.d(s,{default:function(){return a}});var t=n(38093),o=n(75878);function r(e){let s=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre",h3:"h3"},(0,o.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.h1,{id:"outputassetsretry",children:["output.assetsRetry",(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#outputassetsretry",children:"#"})]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Type:"})," ",(0,t.jsx)(s.code,{children:"Object"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"output.assetsRetry"})," is used to configure the retry of assets.The type of ",(0,t.jsx)(s.code,{children:"AssetsRetryOptions"})," is as follows:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"export type AssetsRetryHookContext = {\n  times: number;\n  domain: string;\n  url: string;\n  tagName: string;\n};\n\nexport type AssetsRetryOptions = {\n  type?: string[];\n  domain?: string[];\n  max?: number;\n  test?: string | ((url: string) => boolean);\n  crossOrigin?: boolean | 'anonymous' | 'use-credentials';\n  inlineScript?: boolean;\n  onRetry?: (options: AssetsRetryHookContext) => void;\n  onSuccess?: (options: AssetsRetryHookContext) => void;\n  onFail?: (options: AssetsRetryHookContext) => void;\n};\n"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Default:"})," ",(0,t.jsx)(s.code,{children:"undefined"})]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Since the ability will inject some extra runtime code into HTML, we have disabled this ability by default. If you need to enable it, you can configure it in the form of an object, for example:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {},\n  },\n};\n"})}),"\n",(0,t.jsxs)(s.p,{children:["When you enable this ability, the default config of ",(0,t.jsx)(s.code,{children:"assetsRetry"})," is as follows:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"export const defaultAssetsRetryOptions: AssetsRetryOptions = {\n  type: ['script', 'link', 'img'],\n  domain: [],\n  max: 3,\n  test: '',\n  crossOrigin: false,\n  onRetry: () => {},\n  onSuccess: () => {},\n  onFail: () => {},\n};\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"example",children:["Example",(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,t.jsxs)(s.p,{children:["You can also customize your retry logic using the ",(0,t.jsx)(s.code,{children:"assetsRetry"})," options."]}),"\n",(0,t.jsxs)(s.p,{children:["For example, setting ",(0,t.jsx)(s.code,{children:"assetsRetry.domain"})," to specify the retry domain when assets fail to load."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      domain: ['https://cdn1.com', 'https://cdn2.com', 'https://cdn3.com'],\n    },\n  },\n};\n"})}),"\n",(0,t.jsxs)(s.p,{children:["After adding the above configuration, when assets fail to load from the ",(0,t.jsx)(s.code,{children:"cdn1.com"})," domain, the request domain will automatically fallback to ",(0,t.jsx)(s.code,{children:"cdn2.com"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["If the assets request for ",(0,t.jsx)(s.code,{children:"cdn2.com"})," also fails, the request will fallback to ",(0,t.jsx)(s.code,{children:"cdn3.com"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"assetsRetry"})," is implemented based on the Assets Retry plugin of Rsbuild and provides the same configuration options. You can refer to ",(0,t.jsx)(s.a,{href:"https://rsbuild.dev/plugins/list/plugin-assets-retry#options",target:"_blank",rel:"noopener noreferrer",children:"Rsbuild - Assets Retry Plugin"})," to understand all available configuration options."]})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.ah)(),e.components);return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}let a=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["en%2Fconfigure%2Fapp%2Foutput%2Fassets-retry.mdx"]={toc:[{text:"Example",id:"example",depth:3}],title:"assetsRetry",frontmatter:{title:"assetsRetry"}}}}]);